var y=Object.defineProperty;var u=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var F=(t,i,s)=>i in t?y(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s,m=(t,i)=>{for(var s in i||(i={}))w.call(i,s)&&F(t,s,i[s]);if(u)for(var s of u(i))S.call(i,s)&&F(t,s,i[s]);return t};import{j as e,L as N}from"./main.js";import{h as k,B as R,_ as r,a7 as M}from"./bi-490-178.js";import{S as V}from"./bi-652-725.js";import{g as L,a as T,V as b}from"./bi-544-818.js";import{T as $}from"./bi-528-726.js";import{h as q}from"./bi-266-720.js";const o=(t,i,s)=>{const a=m({},i);a.field_map.splice(t,0,{}),s(m({},a))},A=(t,i,s)=>{const a=m({},i);a.field_map.length>1&&a.field_map.splice(t,1),s(m({},a))},_=(t,i,s,a)=>{const c=m({},s);c.field_map[i][t.target.name]=t.target.value,t.target.value==="custom"&&(c.field_map[i].customValue=""),a(m({},c))};function I({i:t,formFields:i,field:s,vboutConf:a,setVboutConf:c}){var x,n;if(((x=a==null?void 0:a.field_map)==null?void 0:x.length)===1&&s.VboutFormField===""){const l=m({},a),h=L(l);l.field_map=h,c(l)}const d=(a==null?void 0:a.VboutFields.filter(l=>l.required===!0))||[],p=(a==null?void 0:a.VboutFields.filter(l=>l.required===!1))||[],g=k(R),{isPro:j}=g;return e.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:e.jsxs("div",{className:"pos-rel flx",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:s.formField||"",onChange:l=>_(l,t,a,c),children:[e.jsx("option",{value:"",children:r("Select Field","bit-integrations")}),e.jsx("optgroup",{label:"Form Fields",children:i==null?void 0:i.map(l=>e.jsx("option",{value:l.name,children:l.label},`ff-rm-${l.name}`))}),e.jsx("option",{value:"custom",children:r("Custom...","bit-integrations")}),e.jsx("optgroup",{label:`General Smart Codes ${j?"":"(PRO)"}`,children:j&&((n=V)==null?void 0:n.map(l=>e.jsx("option",{value:l.name,children:l.label},`ff-rm-${l.name}`)))})]}),s.formField==="custom"&&e.jsx($,{onChange:l=>q(l,t,a,c),label:r("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:s.customValue,placeholder:r("Custom Value","bit-integrations"),formFields:i}),e.jsxs("select",{className:"btcd-paper-inp",disabled:t<d.length,name:"VboutFormField",value:t<d?d[t].label||"":s.VboutFormField||"",onChange:l=>_(l,t,a,c),children:[e.jsx("option",{value:"",children:r("Select Field","bit-integrations")}),t<d.length?e.jsx("option",{value:d[t].key,children:d[t].label},d[t].key):p.map(({key:l,label:h})=>e.jsx("option",{value:l,children:h},l))]})]}),t>=d.length&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>o(t,a,c),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>A(t,a,c),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function U({vboutConf:t,setVboutConf:i}){var a;const s=(c,d)=>{const p=m({},t);d==="update"&&(c.target.checked?p.actions.update=!0:delete p.actions.update),i(m({},p))};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"pos-rel d-flx w-8",children:e.jsx(M,{checked:((a=t.actions)==null?void 0:a.update)||!1,onChange:c=>s(c,"update"),className:"wdt-200 mt-4 mr-2",value:"update",title:r("Update Contact","bit-integrations"),subTitle:r("Update Responses with Vbout exist Contact?","bit-integrations")})})})}function D({handleInput:t,formFields:i,vboutConf:s,setVboutConf:a,loading:c,setLoading:d,setSnackbar:p}){var x;const g=n=>{const l=m({},s),{name:h}=n.target;n.target.value!==""?l[h]=n.target.value:delete l[h],n.target.value!==""&&b(l,a,c,d),a(m({},l))},j=[{label:"Active",value:"active"},{label:"Unconfirmed",value:"unconfirmed"}];return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:r("List:","bit-integrations")}),e.jsxs("select",{name:"list_id",value:s.list_id,className:"btcd-paper-inp w-5",onChange:g,children:[e.jsx("option",{value:"",children:r("Select List","bit-integrations")}),((x=s==null?void 0:s.default)==null?void 0:x.lists)&&s.default.lists.map(n=>e.jsx("option",{value:n.list_id,children:n.name},n.list_id))]}),e.jsx("button",{onClick:()=>T(s,a,c,d),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh list"'},type:"button",disabled:c.list,children:"↻"}),e.jsx("br",{}),e.jsx("br",{}),c.list&&e.jsx(N,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),e.jsx("b",{className:"wdt-200 d-in-b",children:r("Contact Status:","bit-integrations")}),e.jsxs("select",{onChange:n=>t(n,s,a),name:"contact_status",value:s.contact_status,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:r("Select Status","bit-integrations")}),j.map(n=>e.jsx("option",{value:n.value,children:n.label},n.value))]}),(s==null?void 0:s.list_id)&&(s==null?void 0:s.contact_status)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-5",children:e.jsxs("b",{className:"wdt-100",children:[r("Field Map","bit-integrations"),e.jsx("button",{onClick:()=>b(s,a,c,d),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Fields"'},type:"button",disabled:c.field,children:"↻"})]})}),e.jsx("br",{}),c.field&&e.jsx(N,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:r("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:r("Vbout Fields","bit-integrations")})})]}),s==null?void 0:s.field_map.map((n,l)=>e.jsx(I,{i:l,field:n,vboutConf:s,formFields:i,setVboutConf:a,setSnackbar:p},`rp-m-${l+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>o(s.field_map.length,s,a),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{})]}),(s==null?void 0:s.list_id)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:r("Actions","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(U,{vboutConf:s,setVboutConf:a,formFields:i})]})]})}export{D as V};
