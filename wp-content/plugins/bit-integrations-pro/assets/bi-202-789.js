var k=Object.defineProperty;var w=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var F=(s,a,t)=>a in s?k(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,o=(s,a)=>{for(var t in a||(a={}))S.call(a,t)&&F(s,t,a[t]);if(w)for(var t of w(a))A.call(a,t)&&F(s,t,a[t]);return s};import{r as j,j as e,L as M}from"./main.js";import{a7 as R,_ as n,d as V,a8 as $,h as I,B as L}from"./bi-490-178.js";import{g as y,a as B}from"./bi-500-788.js";import{S as E}from"./bi-652-725.js";import{T as O}from"./bi-528-726.js";import{h as P}from"./bi-266-720.js";const T=(s,a,t)=>{const l=o({},a);l.field_map.splice(s,0,{}),t(o({},l))},G=(s,a,t)=>{const l=o({},a);l.field_map.length>1&&l.field_map.splice(s,1),t(o({},l))},f=(s,a,t,l)=>{const r=o({},t);r.field_map[a][s.target.name]=s.target.value,s.target.value==="custom"&&(r.field_map[a].customValue=""),l(o({},r))};function H({mauticConf:s,setMauticConf:a,formFields:t}){var u,N,v;const[l,r]=j.useState(!1),[b,c]=j.useState({show:!1,action:()=>{}}),[h,m]=j.useState({show:!1}),i=(d,x)=>{const g=o({},s);x==="tag"&&(d.target.checked?(y(s,a,r,m),g.actions.tag=!0,c({show:"tag"})):(c({show:!1}),delete g.actions.tag)),a(o({},g))},p=()=>{c({show:!1})},_=d=>{const x=o({},s);x.tag=d?d.split(","):[],a(o({},x))};return e.jsxs("div",{className:"pos-rel d-flx w-8",children:[e.jsx(R,{checked:((u=s.actions)==null?void 0:u.tag)||!1,onChange:d=>i(d,"tag"),className:"wdt-200 mt-4 mr-2",value:"tag",title:n("Add Tag","bit-integrations"),subTitle:n("Add tag to mautic contact","bit-integrations")}),e.jsxs(V,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:n("Ok","bit-integrations"),show:b.show==="tag",close:p,action:p,title:n("Tag Records","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2 mb-2"}),e.jsx("small",{children:n("Add a tag to contacts","bit-integrations")}),e.jsx("div",{className:"mt-2",children:n("Tag Name","bit-integrations")}),l?e.jsx(M,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):e.jsxs("div",{className:"flx flx-between mt-2",children:[e.jsx($,{className:"msl-wrp-options",defaultValue:s==null?void 0:s.tag,options:(v=(N=s.default)==null?void 0:N.tags)==null?void 0:v.map(d=>({label:d.tagName,value:d.tagName.toString()})),onChange:d=>_(d),customValue:!0}),e.jsx("button",{onClick:()=>y(s,a,r,m),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`${n("Refresh CRM Tags","bit-integrations")}'`},type:"button",disabled:l,children:"↻"})]})]})]})}function q({i:s,formFields:a,field:t,mauticConf:l,setMauticConf:r}){var h,m;const b=I(L),{isPro:c}=b;return e.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:e.jsxs("div",{className:"pos-rel flx",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:t.formField||"",onChange:i=>f(i,s,l,r),children:[e.jsx("option",{value:"",children:n("Select Field","bit-integrations")}),e.jsx("optgroup",{label:"Form Fields",children:a==null?void 0:a.map(i=>i.type!=="file"&&e.jsx("option",{value:i.name,children:i.label},`ff-rm-${i.name}`))}),e.jsx("option",{value:"custom",children:n("Custom...","bit-integrations")}),e.jsx("optgroup",{label:`General Smart Codes ${c?"":"(PRO)"}`,children:c&&((h=E)==null?void 0:h.map(i=>e.jsx("option",{value:i.name,children:i.label},`ff-rm-${i.name}`)))})]}),t.formField==="custom"&&e.jsx(O,{onChange:i=>P(i,s,l,r),label:n("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:t.customValue,placeholder:n("Custom Value","bit-integrations"),formFields:a}),e.jsxs("select",{className:"btcd-paper-inp",name:"mauticField",value:t.mauticField||"",onChange:i=>f(i,s,l,r),children:[e.jsx("option",{value:"",children:n("Select Field","bit-integrations")}),(m=l==null?void 0:l.default)==null?void 0:m.fields.map(({fieldName:i,fieldAlias:p})=>e.jsx("option",{value:p,children:i},p))]})]}),e.jsx("button",{onClick:()=>T(s,l,r),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>G(s,l,r),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx("span",{className:"btcd-icn icn-trash-2"})})]})})}function X({formFields:s,handleInput:a,mauticConf:t,setMauticConf:l,isLoading:r,setIsLoading:b,setSnackbar:c,a:h}){return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"mt-4",children:[e.jsx("b",{className:"wdt-100",children:n("Map Fields","bit-integrations")}),e.jsx("button",{onClick:()=>B(t,l,b,c),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${n("Refresh Mautic Fields","bit-integrations")}'`},type:"button",disabled:r,children:"↻"})]}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:n("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:n("Mautic Fields","bit-integrations")})})]}),t==null?void 0:t.field_map.map((m,i)=>e.jsx(q,{i,field:m,mauticConf:t,formFields:s,setMauticConf:l,setSnackbar:c},`rp-m-${i+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>T(t.field_map.length,t,l),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:n("Actions","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(H,{mauticConf:t,setMauticConf:l,formFields:s})]})}export{X as M};
