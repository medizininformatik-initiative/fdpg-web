var I=Object.defineProperty;var j=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var v=(a,t,s)=>t in a?I(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,C=(a,t)=>{for(var s in t||(t={}))P.call(t,s)&&v(a,s,t[s]);if(j)for(var s of j(t))w.call(t,s)&&v(a,s,t[s]);return a};import{r as n,j as r}from"./main.js";import{e as M,c as F,_ as R,a as o}from"./bi-490-178.js";import{S as L}from"./bi-224-925.js";import{e as E}from"./bi-266-720.js";import{I as O}from"./bi-811-721.js";import T from"./bi-947-388.js";import{h as q,c as N}from"./bi-417-918.js";import{S as z}from"./bi-500-919.js";import"./bi-369-724.js";import"./bi-422-718.js";import"./bi-652-725.js";function Z({formFields:a,setFlow:t,flow:s,allIntegURL:u}){const f=M(),[g,d]=n.useState(!1),[S,h]=n.useState({}),[i,x]=n.useState(1),[_,p]=n.useState({show:!1}),[e,c]=n.useState({name:"Salesmate",type:"Salesmate",session_token:"",link_name:"",field_map:[{formField:"",salesmateFormField:""}],actionName:"",actionId:"",salesmateFields:[],actions:{}}),k=()=>{d(!0),E(s,t,u,e,f,"","",d).then(m=>{var b;m.success?(o.success((b=m.data)==null?void 0:b.msg),f.push(u)):o.error(m.data||m)})},y=l=>{if(!N(e)){o.error("Please map mandatory fields");return}if(!e.selectedCRMOwner){o.error("Please select a Owner");return}if(Number(e.actionId)===4){if(!e.selectedCRMContact){o.error("Please select a Contact");return}if(!e.selectedCRMPipeline){o.error("Please select a Pipeline");return}if(!e.selectedCRMStage){o.error("Please select a Stage");return}}e.field_map.length>0&&x(l)};return document.querySelector(".btcd-s-wrp").scrollTop=0,r.jsxs("div",{children:[r.jsx(F,{snack:_,setSnackbar:p}),r.jsx("div",{className:"txt-center mt-2",children:r.jsx(L,{step:3,active:i})}),r.jsx(T,{salesmateConf:e,setSalesmateConf:c,step:i,setStep:x,loading:S,setLoading:h,setSnackbar:p}),r.jsxs("div",{className:"btcd-stp-page",style:C({},i===2&&{width:900,height:"auto",overflow:"visible"}),children:[r.jsx(z,{formFields:a,handleInput:l=>q(l,e,c),salesmateConf:e,setSalesmateConf:c,loading:S,setLoading:h,isLoading:g,setIsLoading:d,setSnackbar:p}),(e==null?void 0:e.actionName)&&r.jsxs("button",{onClick:()=>y(3),disabled:!N(e),className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[R("Next","bit-integrations")," ","Â ",r.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(e==null?void 0:e.actionName)&&r.jsx(O,{step:i,saveConfig:()=>k(),isLoading:g,dataConf:e,setDataConf:c,formFields:a})]})}export{Z as default};
