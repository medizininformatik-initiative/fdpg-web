var F=Object.defineProperty;var y=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var j=(a,s,t)=>s in a?F(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t,k=(a,s)=>{for(var t in s||(s={}))I.call(s,t)&&j(a,t,s[t]);if(y)for(var t of y(s))q.call(s,t)&&j(a,t,s[t]);return a};import{r,j as i}from"./main.js";import{e as w,c as L,_ as T,a as m}from"./bi-490-178.js";import{S as z}from"./bi-224-925.js";import{e as A}from"./bi-266-720.js";import{I as E}from"./bi-811-721.js";import B from"./bi-25-353.js";import{h as C,c as P}from"./bi-731-851.js";import{M as D}from"./bi-131-852.js";import"./bi-369-724.js";import"./bi-422-718.js";import"./bi-652-725.js";import"./bi-528-726.js";function U({formFields:a,setFlow:s,flow:t,allIntegURL:u}){const p=w(),[S,f]=r.useState(!1),[b,h]=r.useState({auth:!1,customFields:!1}),[o,g]=r.useState(1),[v,d]=r.useState({show:!1}),M=[{key:"email",label:"Email",required:!0},{key:"firstName",label:"First Name",required:!1},{key:"lastName",label:"Last Name",required:!1},{key:"timezone",label:"Timezone",required:!1},{key:"ipAddress",label:"Ip Address",required:!1}],[e,n]=r.useState({name:"MailBluster",type:"MailBluster",auth_token:"",field_map:[{formField:"",mailBlusterFormField:""}],staticFields:M,subscribed:"",customFields:[],selectedTags:[],actions:{}}),N=()=>{f(!0),A(t,s,u,e,p,"","",f).then(c=>{var x;c.success?(m.success((x=c.data)==null?void 0:x.msg),p.push(u)):m.error(c.data||c)})},_=l=>{if(!P(e)){m.error("Please map mandatory fields");return}e.field_map.length>0&&g(l)};return document.querySelector(".btcd-s-wrp").scrollTop=0,i.jsxs("div",{children:[i.jsx(L,{snack:v,setSnackbar:d}),i.jsx("div",{className:"txt-center mt-2",children:i.jsx(z,{step:3,active:o})}),i.jsx(B,{mailBlusterConf:e,setMailBlusterConf:n,step:o,setStep:g,loading:b,setLoading:h,setSnackbar:d}),i.jsxs("div",{className:"btcd-stp-page",style:k({},o===2&&{width:900,height:"auto",overflow:"visible"}),children:[i.jsx(D,{formFields:a,handleInput:l=>C(l,e,n),mailBlusterConf:e,setMailBlusterConf:n,loading:b,setLoading:h,setSnackbar:d}),(e==null?void 0:e.subscribed)&&i.jsxs("button",{onClick:()=>_(3),disabled:!(e!=null&&e.subscribed),className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[T("Next","bit-integrations")," ","Â ",i.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(e==null?void 0:e.subscribed)&&i.jsx(E,{step:o,saveConfig:()=>N(),isLoading:S,dataConf:e,setDataConf:n,formFields:a})]})}export{U as default};
