var E=Object.defineProperty;var j=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var A=(a,i,s)=>i in a?E(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s,o=(a,i)=>{for(var s in i||(i={}))C.call(i,s)&&A(a,s,i[s]);if(j)for(var s of j(i))K.call(i,s)&&A(a,s,i[s]);return a};import{r as b,j as e}from"./main.js";import{_ as t,E as k,ad as I,b as P,ag as g}from"./bi-490-178.js";import{B}from"./bi-475-763.js";import{r as F}from"./bi-598-912.js";function R({lemlistConf:a,setLemlistConf:i,step:s,setstep:f,setSnackbar:N,isInfo:m,isLoading:c,setIsLoading:p}){const[l,z]=b.useState(!1),[h,u]=b.useState({name:"",api_key:""}),[_,v]=b.useState(!1),w=()=>{const r=o({},a);if(!r.name||!r.api_key){u({name:r.name?"":t("Integration name cann't be empty","bit-integrations"),api_key:r.api_key?"":t("Access Api Key cann't be empty","bit-integrations")});return}p("auth");const d={api_key:r.api_key};P(d,"lemlist_authorize").then(n=>{if(n&&n.success){const y=o({},a);y.tokenDetails=n.data,i(y),z(!0),g.success(t("Authorized Successfully","bit-integrations"))}else n&&n.data&&n.data.data||!n.success&&typeof n.data=="string"?g.error(`${t("Authorization failed Cause:","bit-integrations")}${n.data.data||n.data}. ${t("please try again","bit-integrations")}`):g.error(t("Authorization failed. please try again","bit-integrations"));v(!0),p(!1)})},x=r=>{const d=o({},a),n=o({},h);n[r.target.name]="",d[r.target.name]=r.target.value,u(n),i(d)},S=()=>{setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),F(a,i,p,N),f(2)},T=`
            <h4>Get Api key</h4>
            <ul>
                <li>First go to your Lemlist dashboard.</li>
                <li>Click on the "Team Setting" from sidebar</li>
                <li>Then Click "Integrations"</li>
                <li>Then click "Api", Then click "Generate Api Key"</li>
            </ul>`;return e.jsxs("div",{className:"btcd-stp-page",style:{width:s===1&&900,height:s===1&&"auto"},children:[e.jsx("div",{className:"mt-3 wdt-200",children:e.jsx("b",{children:t("Integration Name:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:x,name:"name",value:a.name,type:"text",placeholder:t("Integration Name...","bit-integrations"),disabled:m}),e.jsx("div",{style:{color:"red",fontSize:"15px"},children:h.name}),e.jsx("div",{className:"mt-3 wdt-250",children:e.jsx("b",{children:t("Access Api Key:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:x,name:"api_key",value:a.api_key,type:"text",placeholder:t("Access Api Key...","bit-integrations"),disabled:m}),e.jsx("div",{style:{color:"red",fontSize:"15px"},children:h.api_key}),e.jsxs("small",{className:"d-blk mt-3",children:[t("To Get Api Key, Please Visit","bit-integrations")," ",e.jsx("a",{className:"btcd-link",href:"https://api.lemlist.com/teams/tea_beEpCu2irsJfn3PJr/settings/integrations#api",target:"_blank",rel:"noreferrer",children:t("Lemlist API Token","bit-integrations")})]}),e.jsx("br",{}),e.jsx("br",{}),c==="auth"&&e.jsxs("div",{className:"flx mt-5",children:[e.jsx(k,{size:25,clr:"#022217",className:"mr-2"}),"Checking Api Key!!!"]}),_&&!l&&!c&&e.jsxs("div",{className:"flx mt-5",style:{color:"red"},children:[e.jsx("span",{className:"btcd-icn mr-2",style:{fontSize:30,marginTop:-5},children:"×"}),"Sorry, Api key is invalid"]}),!m&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:w,className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:l||c,children:[l?t("Authorized ✔","bit-integrations"):t("Authorize","bit-integrations"),c&&e.jsx(k,{size:20,clr:"#022217",className:"ml-2"})]}),e.jsx("br",{}),e.jsxs("button",{onClick:()=>S(),className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",disabled:!l,children:[t("Next","bit-integrations"),e.jsx(B,{className:"ml-1 rev-icn"})]})]}),e.jsx(I,{note:T})]})}export{R as default};
