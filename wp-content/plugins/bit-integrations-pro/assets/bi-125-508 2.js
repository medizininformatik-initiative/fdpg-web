var I=Object.defineProperty;var v=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var _=(a,t,s)=>t in a?I(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,S=(a,t)=>{for(var s in t||(t={}))T.call(t,s)&&_(a,s,t[s]);if(v)for(var s of v(t))w.call(t,s)&&_(a,s,t[s]);return a};import{r,j as i}from"./main.js";import{e as L,c as C,_ as M,a as m}from"./bi-490-178.js";import{S as D}from"./bi-224-925.js";import{e as P}from"./bi-266-720.js";import{I as E}from"./bi-811-721.js";import F from"./bi-315-390.js";import{a as R,c as j}from"./bi-528-922.js";import{G as z}from"./bi-23-923.js";import"./bi-369-724.js";import"./bi-422-718.js";import"./bi-652-725.js";function Z({formFields:a,setFlow:t,flow:s,allIntegURL:p}){const u=L(),[f,l]=r.useState(!1),[b,g]=r.useState({}),[o,y]=r.useState(1),[q,c]=r.useState({show:!1}),h=[{key:"send_date",label:"Send Date",required:!1},{key:"ttl",label:"Time to Live",required:!1},{key:"push_tag",label:"Push Tag",required:!1},{key:"display_time",label:"Display Time",required:!1},{key:"is_transactional",label:"Is Transactional",required:!1},{key:"segments",label:"Segments",required:!1},{key:"message",label:"Message",required:!0},{key:"title",label:"Title",required:!1},{key:"icon",label:"Icon",required:!0},{key:"image",label:"Image",required:!1},{key:"redirect_url",label:"Redirect URL",required:!0}],[e,d]=r.useState({name:"Gravitec",type:"Gravitec",app_key:"",app_secret:"",site_url:"",field_map:R(h),actionName:"",notificationFields:h,actions:{}}),N=()=>{l(!0),P(s,t,p,e,u,"","",l).then(n=>{var x;n.success?(m.success((x=n.data)==null?void 0:x.msg),u.push(p)):m.error(n.data||n)})},G=k=>{if(!j(e)){m.error("Please map mandatory fields");return}e.field_map.length>0&&y(k)};return document.querySelector(".btcd-s-wrp").scrollTop=0,i.jsxs("div",{children:[i.jsx(C,{snack:q,setSnackbar:c}),i.jsx("div",{className:"txt-center mt-2",children:i.jsx(D,{step:3,active:o})}),i.jsx(F,{gravitecConf:e,setGravitecConf:d,step:o,setStep:y,loading:b,setLoading:g,setSnackbar:c}),i.jsxs("div",{className:"btcd-stp-page",style:S({},o===2&&{width:900,height:"auto",overflow:"visible"}),children:[i.jsx(z,{formFields:a,gravitecConf:e,setGravitecConf:d,loading:b,setLoading:g,isLoading:f,setIsLoading:l,setSnackbar:c}),(e==null?void 0:e.actionName)&&i.jsxs("button",{onClick:()=>G(3),disabled:!j(e),className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[M("Next","bit-integrations")," ","Â ",i.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(e==null?void 0:e.actionName)&&i.jsx(E,{step:o,saveConfig:()=>N(),isLoading:f,dataConf:e,setDataConf:d,formFields:a})]})}export{Z as default};
