var $=Object.defineProperty;var w=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var _=(d,t,l)=>t in d?$(d,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):d[t]=l,o=(d,t)=>{for(var l in t||(t={}))I.call(t,l)&&_(d,l,t[l]);if(w)for(var l of w(t))L.call(t,l)&&_(d,l,t[l]);return d};import{j as e,L as R}from"./main.js";import{h as k,B as T,j as c,a7 as q}from"./bi-490-178.js";import{a as O}from"./bi-266-720.js";import{r as S,a as M}from"./bi-422-910.js";import{T as A}from"./bi-422-718.js";import{S as B}from"./bi-652-725.js";import{M as H}from"./bi-369-724.js";function P({i:d,formFields:t,field:l,mailifyConf:a,setMailifyConf:r}){var g,v,N,F;const i=l.required,p=((g=a==null?void 0:a.default)==null?void 0:g.fields)&&Object.values((v=a==null?void 0:a.default)==null?void 0:v.fields).filter(s=>!s.required),j=k(T),{isPro:x}=j,u=s=>{const n=o({},a);n.field_map.splice(s,0,{}),r(n)},b=s=>{const n=o({},a);n.field_map.length>1&&n.field_map.splice(s,1),r(n)},m=(s,n)=>{const h=o({},a);h.field_map[n][s.target.name]=s.target.value,s.target.value==="custom"&&(h.field_map[n].customValue=""),r(h)},V=(s,n)=>{const h=o({},a);h.field_map[n].customValue=s.target.value,r(h)};return e.jsxs("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:l.formField||"",onChange:s=>m(s,d),children:[e.jsx("option",{value:"",children:c("Select Field","bit-integrations")}),e.jsx("optgroup",{label:"List Fields",children:t==null?void 0:t.map(s=>e.jsx("option",{value:s.name,children:s.label},`ff-rm-${s.name}`))}),e.jsx("option",{value:"custom",children:c("Custom...","bit-integrations")}),e.jsx("optgroup",{label:`General Smart Codes ${x?"":"(PRO)"}`,children:x&&((N=B)==null?void 0:N.map(s=>e.jsx("option",{value:s.name,children:s.label},`ff-rm-${s.name}`)))})]}),l.formField==="custom"&&e.jsx(H,{onChange:s=>V(s,d),label:c("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:l.customValue,placeholder:c("Custom Value","bit-integrations")}),e.jsxs("select",{className:"btcd-paper-inp",name:"mailifyField",value:l.mailifyField||"",onChange:s=>m(s,d),disabled:i,children:[e.jsx("option",{value:"",children:c("Select Field","bit-integrations")}),i?((F=a==null?void 0:a.default)==null?void 0:F.fields)&&Object.values(a.default.fields).map(s=>e.jsx("option",{value:s.fieldValue,children:s.fieldName},`${s.fieldValue}`)):p&&p.map(s=>e.jsx("option",{value:s.fieldValue,children:s.fieldName},`${s.fieldValue}`))]})]}),!i&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>u(d),className:"icn-btn sh-sm ml-2",type:"button",children:"+"}),e.jsx("button",{onClick:()=>b(d),className:"icn-btn sh-sm ml-2",type:"button","aria-label":"btn",children:e.jsx(A,{})})]})]})}function U({mailifyConf:d,setMailifyConf:t}){var a;const l=(r,i)=>{const p=o({},d);i==="update"&&(r.target.checked?p.actions.update=!0:delete p.actions.update),t(o({},p))};return e.jsx("div",{className:"pos-rel d-flx w-8",children:e.jsx(q,{checked:((a=d.actions)==null?void 0:a.update)||!1,onChange:r=>l(r,"update"),className:"wdt-200 mt-4 mr-2",value:"user_share",title:c("Update Mailify","bit-integrations"),subTitle:c("Update Responses with Mailify existing email?","bit-integrations")})})}function X({formFields:d,mailifyConf:t,setMailifyConf:l,isLoading:a,setIsLoading:r,setSnackbar:i}){var j,x;const p=u=>{const b=u.target.value,m=o({},t);b&&(m.listId=b),M(m,l,r,i)};return console.log(t),e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:c("List:","bit-integrations")}),e.jsxs("select",{value:t==null?void 0:t.listId,name:"listId",id:"",className:"btcd-paper-inp w-5",onChange:p,children:[e.jsx("option",{value:"",children:c("Select List","bit-integrations")}),((j=t==null?void 0:t.default)==null?void 0:j.mailifyLists)&&Object.keys(t.default.mailifyLists).map(u=>e.jsx("option",{value:t.default.mailifyLists[u].listId,children:t.default.mailifyLists[u].listName},`${u+1}`))]}),e.jsx("button",{onClick:()=>S(t,l,r,i),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Mailify list"'},type:"button",disabled:a,children:"↻"}),e.jsx("br",{}),e.jsx("br",{}),a&&e.jsx(R,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,translist:"scale(0.7)"}}),e.jsxs("div",{className:"mt-4",children:[e.jsx("b",{className:"wdt-100",children:c("Map Fields","bit-integrations")}),e.jsx("button",{onClick:()=>M(t,l,r,i),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${c("Refresh Mailify Field","bit-integrations")}'`},type:"button",disabled:a,children:"↻"})]}),((t==null?void 0:t.listId)||((x=t==null?void 0:t.default)==null?void 0:x.fields))&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:c("List Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:c("Mailify Fields","bit-integrations")})})]}),t.field_map.map((u,b)=>e.jsx(P,{i:b,field:u,mailifyConf:t,formFields:d,setMailifyConf:l},`Mailify-m-${b+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>O(t.field_map.length,t,l),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:c("Actions","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(U,{mailifyConf:t,setMailifyConf:l})]})]})}export{X as M};
