var F=Object.defineProperty;var N=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var o=(e,s,a)=>s in e?F(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a,u=(e,s)=>{for(var a in s||(s={}))E.call(s,a)&&o(e,a,s[a]);if(N)for(var a of N(s))S.call(s,a)&&o(e,a,s[a]);return e};import{j as i,L}from"./main.js";import{F as g,b as A,a as w,_ as h,a8 as y}from"./bi-490-178.js";const G=(e,s,a,n,d)=>{let r=g(s);const{name:t,value:b}=e.target;switch(r[t]=b,t){case"module":r=k(r,a,n,d);break}a(r)},k=(e,s,a,n)=>{var r,t;let d=g(e);return d.field_map=[],(t=(r=d==null?void 0:d.default)==null?void 0:r.fields)!=null&&t[e.module]?d=P(d):refreshFields(d,s,a,n),d},_=(e,s,a,n=null)=>{a(!0);const r=A(null,"tutor_all_course",{type:n},"GET").then(t=>{if(t&&t.success){const b=u({},e);return b.default||(b.default={}),b.default.courses=t.data,s(u({},b)),a(!1),"Courses fetched successfully"}return a(!1),"Courses fetch failed. please try again"});w.promise(r,{success:t=>t,error:h("Error Occurred","bit-integrations"),loading:h("Loading Courses...")})},v=(e,s,a)=>{a(!0);const n=A(null,"tutor_all_lesson","","GET").then(d=>{if(d&&d.success){const r=u({},e);return r.default||(r.default={}),r.default.lessons=d.data,s(u({},r)),a(!1),"Lessons fetched successfully"}return a(!1),"Lessons fetch failed, please try again..."});w.promise(n,{success:d=>d,error:h("Error Occurred","bit-integrations"),loading:h("Loading Lessons...")})},P=e=>{const s=g(e);return s.default.fields[s.module].required.forEach(a=>{s.field_map.find(n=>n.wcField===a)||s.field_map.unshift({formField:"",wcField:a,required:!0})}),s.field_map.length||(s.field_map=[{formField:"",wcField:""}]),s};function O({tutorlmsConf:e,setTutorlmsConf:s,isLoading:a,setIsLoading:n}){var b,j;const d=[{value:"enroll-course",label:"Enroll the user in a course"},{value:"unenroll-course",label:"Unenroll user from a course"},{value:"complete-course",label:"Mark a course complete for the user"},{value:"complete-lesson",label:"Mark a lesson complete for the user"},{value:"reset-course",label:"Reset the user progress in a course"}],r=l=>{const c=u({},e),{name:p,value:x}=l.target;l.target.value!==""?c[p]=x:delete c[p],p==="actionName"?(c!=null&&c.selectedCourse&&delete c.selectedCourse,c!=null&&c.selectedLesson&&delete c.selectedLesson,c!=null&&c.selectedAllCourse&&delete c.selectedAllCourse,s(u({},c)),x==="enroll-course"||x==="unenroll-course"||x==="complete-course"||x==="reset-course"?_(c,s,n,x):x==="complete-lesson"&&v(c,s,n)):s(u({},c))},t=(l,c)=>{const p=u({},e);l?(c==="selectedCourse"&&l.includes("all-course")&&(p.selectedAllCourse=p.default.courses),p[c]=l?l.split(","):[]):p!=null&&p.selectedAllCourse&&delete p.selectedAllCourse,s(u({},p))};return i.jsxs(i.Fragment,{children:[i.jsx("br",{}),i.jsxs("div",{className:"flx",children:[i.jsx("b",{className:"wdt-200 d-in-b",children:h("Action:","bit-integrations")}),i.jsxs("select",{onChange:r,name:"actionName",value:e==null?void 0:e.actionName,className:"btcd-paper-inp w-5",children:[i.jsx("option",{value:"",children:h("Select Action","bit-integrations")}),d.map(({label:l,value:c})=>i.jsx("option",{value:c,children:l},l))]})]}),i.jsx("br",{}),((e==null?void 0:e.actionName)==="enroll-course"||(e==null?void 0:e.actionName)==="unenroll-course"||(e==null?void 0:e.actionName)==="complete-course"||(e==null?void 0:e.actionName)==="reset-course")&&i.jsxs("div",{className:"flx",children:[i.jsx("b",{className:"wdt-200 d-in-b",children:h("Select Course: ","bit-integrations")}),i.jsx(y,{defaultValue:e==null?void 0:e.selectedCourse,className:"btcd-paper-drpdwn w-5",options:((b=e==null?void 0:e.default)==null?void 0:b.courses)&&e.default.courses.map(l=>({label:l.courseTitle,value:l.courseId.toString()})),onChange:l=>t(l,"selectedCourse"),singleSelect:(e==null?void 0:e.actionName)==="complete-course"||(e==null?void 0:e.actionName)==="reset-course"}),i.jsx("button",{onClick:()=>_(e,s,n,e==null?void 0:e.actionName),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`${h("Refresh Courses","bit-integrations")}'`},type:"button",disabled:a,children:"↻"})]}),(e==null?void 0:e.actionName)==="complete-lesson"&&i.jsxs("div",{className:"flx",children:[i.jsx("b",{className:"wdt-200 d-in-b",children:h("Select Lessons: ","bit-integrations")}),i.jsx(y,{defaultValue:e==null?void 0:e.selectedLesson,className:"btcd-paper-drpdwn w-5",options:((j=e==null?void 0:e.default)==null?void 0:j.lessons)&&e.default.lessons.map(l=>({label:l.lessonTitle,value:l.lessonId.toString()})),onChange:l=>t(l,"selectedLesson"),singleSelect:!0}),i.jsx("button",{onClick:()=>v(e,s,n),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`${h("Refresh Courses","bit-integrations")}'`},type:"button",disabled:a,children:"↻"})]}),i.jsx("br",{}),i.jsx("br",{}),a&&i.jsx(L,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}})]})}export{O as T,G as h};
