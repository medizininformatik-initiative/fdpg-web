var v=Object.defineProperty,P=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var k=(e,i,t)=>i in e?v(e,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[i]=t,c=(e,i)=>{for(var t in i||(i={}))S.call(i,t)&&k(e,t,i[t]);if(j)for(var t of j(i))w.call(i,t)&&k(e,t,i[t]);return e},u=(e,i)=>P(e,z(i));import{r as F,j as s}from"./main.js";import{_ as a,b as _,a as m,E as I,ad as K}from"./bi-490-178.js";const B=(e,i,t,o)=>{t(!0);const r={public_id:e.public_id,secret_key:e.secret_key,action_name:e.actionName};_(r,"company_hub_fetch_all_fields").then(n=>{n&&n.success?(i(d=>{const l=c({},d);return l.field_map=[{formField:"",companyHubFormField:""}],n.data&&(l.companyHubFields=n.data,l.field_map=q(l)),l}),o({show:!0,msg:a("CompanyHub fields refreshed","bit-integrations")})):o({show:!0,msg:a("CompanyHub fields refresh failed. please try again","bit-integrations")}),t(!1)}).catch(()=>t(!1))},q=e=>{const i=(e==null?void 0:e.companyHubFields)&&(e==null?void 0:e.companyHubFields.filter(t=>t.required===!0&&t.key!=="owner"&&t.key!=="pipeline"));return i.length>0?i.map(t=>({formField:"",companyHubFormField:t.key})):[{formField:"",companyHubFormField:""}]},O=e=>!((e!=null&&e.field_map?e.field_map.filter(t=>!t.formField||!t.companyHubFormField||t.formField==="custom"&&!t.customValue||t.companyHubFormField==="customFieldKey"&&!t.customFieldKey):[]).length>0),D=(e,i,t,o,r,n)=>{if(!e.sub_domain||!e.api_key){t({sub_domain:e.sub_domain?"":a("Sub Domain can't be empty","bit-integrations"),api_key:e.api_key?"":a("API Key can't be empty","bit-integrations")});return}t({}),n(u(c({},r),{auth:!0}));const d={sub_domain:e.sub_domain,api_key:e.api_key};_(d,"company_hub_authentication").then(l=>{if(l&&l.success){o(!0),n(u(c({},r),{auth:!1})),m.success(a("Authorized successfully","bit-integrations"));return}n(u(c({},r),{auth:!1})),m.error(a("Authorized failed, Please enter valid Sub Domain & API Key","bit-integrations"))})},R=(e,i,t)=>{t(u(c({},t),{companies:!0}));const o={public_id:e.public_id,secret_key:e.secret_key};_(o,"company_hub_fetch_all_companies").then(r=>{if(r&&r.success){if(r.data){i(n=>(n.companies=r.data,n)),t(u(c({},t),{companies:!1})),m.success(a("Companies fetched successfully","bit-integrations"));return}t(u(c({},t),{companies:!1})),m.error(a("Companies Not Found!","bit-integrations"));return}t(u(c({},t),{companies:!1})),m.error(a("Companies fetching failed","bit-integrations"))})};function E({companyHubConf:e,setCompanyHubConf:i,step:t,setStep:o,loading:r,setLoading:n,isInfo:d}){const[l,f]=F.useState(!1),[h,g]=F.useState({session_token:""}),A=()=>{e!=null&&e.default,o(2),document.querySelector(".btcd-s-wrp").scrollTop=0},b=p=>{const x=c({},e),y=c({},h);y[p.target.name]="",x[p.target.name]=p.target.value,g(y),i(x)},N=`
            <h4>To Get Public Id & Secret Key</h4>
            <ul>
                <li>First go to your CompanyHub dashboard.</li>
                <li>Click go to "Settings" from Left Bottom corner</li>
                <li>Then Click "Integrations"</li>
                <li>Then Click "Generate Api key"</li>
                <li>Then copy "API Authorization Credentials"</li>
            </ul>`;return s.jsxs("div",{className:"btcd-stp-page",style:{width:t===1&&900,height:t===1&&"auto"},children:[s.jsx("div",{className:"mt-3",children:s.jsx("b",{children:a("Integration Name:","bit-integrations")})}),s.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:b,name:"name",value:e.name,type:"text",placeholder:a("Integration Name...","bit-integrations"),disabled:d}),s.jsx("div",{className:"mt-3",children:s.jsx("b",{children:a("Sub Domain:","bit-integrations")})}),s.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:b,name:"sub_domain",value:e.sub_domain,type:"text",placeholder:a("Sub Domain...","bit-integrations"),disabled:d}),s.jsx("div",{style:{color:"red",fontSize:"15px"},children:h.sub_domain}),s.jsx("div",{className:"mt-3",children:s.jsx("b",{children:a("API Key:","bit-integrations")})}),s.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:b,name:"api_key",value:e.api_key,type:"text",placeholder:a("API Key...","bit-integrations"),disabled:d}),s.jsx("div",{style:{color:"red",fontSize:"15px"},children:h.api_key}),s.jsxs("small",{className:"d-blk mt-3",children:[a("To Get Sub Domain & API Key, Please Visit","bit-integrations")," ",s.jsx("a",{className:"btcd-link",href:"https://app.companyhub.com/settings/integration",target:"_blank",children:a("CompanyHub Sub Domain & API Key","bit-integrations")})]}),s.jsx("br",{}),s.jsx("br",{}),!d&&s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>D(e,i,g,f,r,n),className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:l||r.auth,children:[l?a("Authorized ✔","bit-integrations"):a("Authorize","bit-integrations"),r.auth&&s.jsx(I,{size:"20",clr:"#022217",className:"ml-2"})]}),s.jsx("br",{}),s.jsxs("button",{onClick:A,className:"btn ml-auto btcd-btn-lg green sh-sm flx",type:"button",disabled:!l,children:[a("Next","bit-integrations"),s.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),s.jsx(K,{note:N})]})}var $=Object.freeze({__proto__:null,default:E});export{E as C,$ as a,O as c,R as g,B as r};
