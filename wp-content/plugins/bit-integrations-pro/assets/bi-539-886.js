var R=Object.defineProperty;var w=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var N=(r,e,t)=>e in r?R(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,p=(r,e)=>{for(var t in e||(e={}))_.call(e,t)&&N(r,t,e[t]);if(w)for(var t of w(e))$.call(e,t)&&N(r,t,e[t]);return r};import{j as s,L as g}from"./main.js";import{h as H,B as V,_ as n,a8 as v}from"./bi-490-178.js";import{g as I,a as y,b as k}from"./bi-871-885.js";import{S as M}from"./bi-652-725.js";import{T as q}from"./bi-528-726.js";import{h as T}from"./bi-266-720.js";const W=(r,e,t)=>{const l=p({},e);l.field_map.splice(r,0,{}),t(p({},l))},A=(r,e,t)=>{const l=p({},e);l.field_map.length>1&&l.field_map.splice(r,1),t(p({},l))},F=(r,e,t,l)=>{const c=p({},t);c.field_map[e][r.target.name]=r.target.value,r.target.value==="custom"&&(c.field_map[e].customValue=""),l(p({},c))};function P({i:r,formFields:e,field:t,zohoSheetConf:l,setZohoSheetConf:c}){var a,d,b;const m=((a=l==null?void 0:l.workSheetHeaders)==null?void 0:a.filter(i=>i.required===!0))||[],j=((d=l==null?void 0:l.workSheetHeaders)==null?void 0:d.filter(i=>i.required===!1))||[],u=H(V),{isPro:x}=u;return s.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:s.jsxs("div",{className:"pos-rel flx",children:[s.jsxs("div",{className:"flx integ-fld-wrp",children:[s.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:t.formField||"",onChange:i=>F(i,r,l,c),children:[s.jsx("option",{value:"",children:n("Select Field","bit-integrations")}),s.jsx("optgroup",{label:"Form Fields",children:e==null?void 0:e.map(i=>s.jsx("option",{value:i.name,children:i.label},`ff-rm-${i.name}`))}),s.jsx("option",{value:"custom",children:n("Custom...","bit-integrations")}),s.jsx("optgroup",{label:`General Smart Codes ${x?"":"(PRO)"}`,children:x&&((b=M)==null?void 0:b.map(i=>s.jsx("option",{value:i.name,children:i.label},`ff-rm-${i.name}`)))})]}),t.formField==="custom"&&s.jsx(q,{onChange:i=>T(i,r,l,c),label:n("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:t.customValue,placeholder:n("Custom Value","bit-integrations"),formFields:e}),s.jsxs("select",{className:"btcd-paper-inp",disabled:r<m.length,name:"zohoSheetFormField",value:r<m?m[r].label||"":t.zohoSheetFormField||"",onChange:i=>F(i,r,l,c),children:[s.jsx("option",{value:"",children:n("Select Field","bit-integrations")}),r<m.length?s.jsx("option",{value:m[r].key,children:m[r].label},m[r].key):j.map(({key:i,label:o})=>s.jsx("option",{value:i,children:o},i))]})]}),r>=m.length&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>W(r,l,c),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),s.jsx("button",{onClick:()=>A(r,l,c),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:s.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function Q({formFields:r,zohoSheetConf:e,setZohoSheetConf:t,loading:l,setLoading:c}){var u,x;const m=(a,d)=>{const b=p({},e);b[d]=a,d==="selectedWorkbook"?(b.selectedWorksheet="",a!==""&&y(b,t,l,c)):d==="selectedWorksheet"&&a!==""&&k(b,t,l,c),t(p({},b))},j=a=>{const d=p({},e),{name:b}=a.target;a.target.value!==""?(d[b]=a.target.value,k(d,t,l,c)):delete d[b],t(p({},d))};return s.jsxs(s.Fragment,{children:[s.jsx("br",{}),s.jsxs("div",{className:"flx",children:[s.jsx("b",{className:"wdt-200 d-in-b",children:n("Select workbook:","bit-integrations")}),s.jsx(v,{singleSelect:!0,options:(u=e.workbooks)==null?void 0:u.map(a=>({label:a.name,value:a.id})),className:"msl-wrp-options dropdown-custom-width",defaultValue:e==null?void 0:e.selectedWorkbook,onChange:a=>m(a,"selectedWorkbook")}),s.jsx("button",{onClick:()=>I(e,t,l,c),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${n("Refresh  workbooks","bit-integrations")}'`},type:"button",disabled:l.workbooks,children:"↻"})]}),s.jsx("br",{}),s.jsxs("div",{className:"flx",children:[s.jsx("b",{className:"wdt-200 d-in-b",children:n("Select worksheet:","bit-integrations")}),s.jsx(v,{singleSelect:!0,options:(x=e==null?void 0:e.worksheets)==null?void 0:x.map(a=>({label:a.name,value:a.id})),className:"msl-wrp-options dropdown-custom-width",defaultValue:e==null?void 0:e.selectedWorksheet,onChange:a=>m(a,"selectedWorksheet"),disabled:!e.selectedWorkbook||l.worksheets}),s.jsx("button",{onClick:()=>y(e,t,l,c),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${n("Refresh  worksheets","bit-integrations")}'`},type:"button",disabled:l.worksheets||l.workbooks||!e.selectedWorkbook,children:"↻"})]}),s.jsx("br",{}),s.jsxs("div",{className:"flx",children:[s.jsx("b",{className:"wdt-200 d-in-b",children:n("Header Row:","bit-integrations")}),s.jsx("input",{type:"number",min:"1",className:"btcd-paper-inp w-5",placeholder:"Header Row",onChange:a=>j(a),value:e.headerRow,name:"headerRow",disabled:l.worksheets||l.workbooks||!e.selectedWorkbook||!e.selectedWorksheet}),s.jsx("button",{onClick:()=>k(e,t,l,c),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${n("Refresh  worksheet headers","bit-integrations")}'`},type:"button",disabled:l.worksheets||l.workbooks||!e.selectedWorkbook||!e.selectedWorksheet||l.header,children:"↻"})]}),(l.workbooks||l.worksheets)&&s.jsx(g,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),s.jsxs("div",{children:[s.jsx("br",{}),s.jsx("div",{className:"mt-5",children:s.jsx("b",{className:"wdt-100",children:n("Field Map","bit-integrations")})}),s.jsx("br",{}),s.jsx("div",{className:"btcd-hr mt-1"}),s.jsx("br",{}),l.header&&s.jsx(g,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),s.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[s.jsx("div",{className:"txt-dp",children:s.jsx("b",{children:n("Form Fields","bit-integrations")})}),s.jsx("div",{className:"txt-dp",children:s.jsx("b",{children:n("ZohoSheet Fields","bit-integrations")})})]}),l.workSheetHeaders&&e.selectedWorksheet&&s.jsxs("div",{children:[" ",e==null?void 0:e.field_map.map((a,d)=>s.jsx(P,{i:d,field:a,zohoSheetConf:e,formFields:r,setZohoSheetConf:t},`rp-m-${d+9}`)),s.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:s.jsx("button",{onClick:()=>W(e.field_map.length,e,t),className:"icn-btn sh-sm",type:"button",children:"+"})}),s.jsx("br",{}),s.jsx("br",{})]})]})]})}export{Q as Z};
