var I=Object.defineProperty;var h=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var x=(r,a,l)=>a in r?I(r,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[a]=l,S=(r,a)=>{for(var l in a||(a={}))L.call(a,l)&&x(r,l,a[l]);if(h)for(var l of h(a))M.call(a,l)&&x(r,l,a[l]);return r};import{r as i,j as t}from"./main.js";import{e as T,c as Z,_ as D,a as s}from"./bi-490-178.js";import{S as E}from"./bi-224-925.js";import{e as R}from"./bi-266-720.js";import{I as A}from"./bi-811-721.js";import O from"./bi-122-376.js";import{h as H,c as g}from"./bi-576-895.js";import{Z as V}from"./bi-855-896.js";import"./bi-369-724.js";import"./bi-422-718.js";import"./bi-652-725.js";function ae({formFields:r,setFlow:a,flow:l,allIntegURL:f}){const k=T(),[_,y]=i.useState(!1),[b,m]=i.useState({}),[o,p]=i.useState(1),[C,c]=i.useState({show:!1}),N=[{key:"name",label:"Name",required:!0},{key:"phone",label:"Phone",required:!1},{key:"mobile",label:"Mobile",required:!1},{key:"email",label:"Email",required:!1},{key:"description",label:"Description",required:!1},{key:"line1",label:"Street",required:!1},{key:"city",label:"City",required:!1},{key:"state",label:"State",required:!1},{key:"postal_code",label:"Postal Code",required:!1},{key:"country",label:"Country",required:!1},{key:"fax",label:"Fax",required:!1},{key:"facebook",label:"Facebook",required:!1},{key:"skype",label:"Skype",required:!1},{key:"linkedin",label:"LinkedIn",required:!1},{key:"twitter",label:"Twitter",required:!1}],F=[{key:"first_name",label:"First Name",required:!1},{key:"last_name",label:"Last Name",required:!0},{key:"title",label:"Title",required:!1},{key:"phone",label:"Phone",required:!1},{key:"mobile",label:"Mobile",required:!1},{key:"email",label:"Email",required:!1},{key:"description",label:"Description",required:!1},{key:"line1",label:"Street",required:!1},{key:"city",label:"City",required:!1},{key:"state",label:"State",required:!1},{key:"postal_code",label:"Postal Code",required:!1},{key:"country",label:"Country",required:!1},{key:"fax",label:"Fax",required:!1},{key:"facebook",label:"Facebook",required:!1},{key:"skype",label:"Skype",required:!1},{key:"linkedin",label:"LinkedIn",required:!1},{key:"twitter",label:"Twitter",required:!1}],v=[{key:"first_name",label:"First Name",required:!1},{key:"last_name",label:"Last Name",required:!0},{key:"title",label:"Title",required:!1},{key:"phone",label:"Phone",required:!1},{key:"mobile",label:"Mobile",required:!1},{key:"fax",label:"Fax",required:!1},{key:"website",label:"Website",required:!1},{key:"email",label:"Email",required:!1},{key:"description",label:"Description",required:!1},{key:"line1",label:"Street",required:!1},{key:"city",label:"City",required:!1},{key:"state",label:"State",required:!1},{key:"postal_code",label:"Postal Code",required:!1},{key:"country",label:"Country",required:!1},{key:"facebook",label:"Facebook",required:!1},{key:"skype",label:"Skype",required:!1},{key:"linkedin",label:"LinkedIn",required:!1},{key:"twitter",label:"Twitter",required:!1}],j=[{key:"name",label:"Deal Name",required:!0},{key:"value",label:"Value",required:!1},{key:"estimated_close_date",label:"Estimated Close Date",required:!1},{key:"added_at",label:"Added On",required:!1},{key:"last_stage_change_at",label:"Last Moved Stage On",required:!1}],[e,d]=i.useState({name:"Zendesk",type:"Zendesk",api_key:"",field_map:[{formField:"",zendeskFormField:""}],actionName:"",organizationFields:N,contactFields:F,leadFields:v,dealFields:j,actions:{}}),w=()=>{y(!0),R(l,a,f,e,k,"","",y).then(u=>{var q;u.success?(s.success((q=u.data)==null?void 0:q.msg),k.push(f)):s.error(u.data||u)})},P=n=>{if(!g(e)){s.error("Please map mandatory fields");return}if(e.actionName==="lead"||e.actionName==="deal"){if(!e.selectedCRMCompany){s.error("Please select a company");return}if(!e.selectedCRMContact){s.error("Please select a contact");return}if(!e.selectedCRMSources&&e.actionName==="lead"){s.error("Please select a Source");return}}e.field_map.length>0&&p(n)};return document.querySelector(".btcd-s-wrp").scrollTop=0,t.jsxs("div",{children:[t.jsx(Z,{snack:C,setSnackbar:c}),t.jsx("div",{className:"txt-center mt-2",children:t.jsx(E,{step:3,active:o})}),t.jsx(O,{zendeskConf:e,setZendeskConf:d,step:o,setStep:p,loading:b,setLoading:m,setSnackbar:c}),t.jsxs("div",{className:"btcd-stp-page",style:S({},o===2&&{width:900,height:"auto",overflow:"visible"}),children:[t.jsx(V,{formFields:r,handleInput:n=>H(n,e,d),zendeskConf:e,setZendeskConf:d,loading:b,setLoading:m,setSnackbar:c}),(e==null?void 0:e.actionName)&&t.jsxs("button",{onClick:()=>P(3),disabled:!g(e),className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[D("Next","bit-integrations")," ","Â ",t.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(e==null?void 0:e.actionName)&&t.jsx(A,{step:o,saveConfig:()=>w(),isLoading:_,dataConf:e,setDataConf:d,formFields:r})]})}export{ae as default};
