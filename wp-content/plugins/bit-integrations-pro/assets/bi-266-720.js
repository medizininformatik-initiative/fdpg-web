var l=Object.defineProperty;var M=Object.getOwnPropertySymbols;var o=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable;var A=(e,g,d)=>g in e?l(e,g,{enumerable:!0,configurable:!0,writable:!0,value:d}):e[g]=d,D=(e,g)=>{for(var d in g||(g={}))o.call(g,d)&&A(e,d,g[d]);if(M)for(var d of M(g))f.call(g,d)&&A(e,d,g[d]);return e};var $=(e,g,d)=>new Promise((c,_)=>{var n=p=>{try{u(d.next(p))}catch(a){_(a)}},t=p=>{try{u(d.throw(p))}catch(a){_(a)}},u=p=>p.done?c(p.value):Promise.resolve(p.value).then(n,t);u((d=d.apply(e,g)).next())});import{G as E,H as R,I as B,J as G,K as z,N as w,O as U,P as V,Q as J,U as K,V as L,W as N,X as O,Y as q,Z,a0 as j,a1 as Q,a2 as X,a3 as ee,a4 as te,a5 as Y,a6 as x,b as W,_ as y,a as ae}from"./bi-490-178.js";const ie=["Webhook","KaliForms","Amelia","WPFunnels","Typebot","JetForm","FluentSupport"],T=e=>ie.includes(e),ge=(e,g,d,c,_,n,t,u)=>$(void 0,null,function*(){var r,C,m,I,S,F,b,H;let p="flow/save";u(!0);let a=c;if(((r=c==null?void 0:c.condition)==null?void 0:r.action_behavior)!=="cond"&&(a.condition={action_behavior:"",actions:[{field:"",action:"value"}],logics:[{field:"",logic:"",val:""},"or",{field:"",logic:"",val:""}]}),e.triggered_entity==="Elementor"||e.triggered_entity==="Divi"||e.triggered_entity==="Bricks"||e.triggered_entity==="Brizy"||e.triggered_entity==="Breakdance"||e.triggered_entity==="CartFlow")t?a.postId=(m=(C=e==null?void 0:e.flow_details)==null?void 0:C.postId)!=null?m:null:a.postId=(S=(I=e==null?void 0:e.triggerData)==null?void 0:I.postId)!=null?S:null;else if(e.triggered_entity==="TutorLms"){const i=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;a=E(a,i)}else if(e.triggered_entity==="WC"){const i=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;a=R(a,i)}else if(e.triggered_entity==="Groundhogg"){const i=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;a=B(a,i)}else if(e.triggered_entity==="RestrictContent"){const i=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;a=G(a,i)}else if(e.triggered_entity==="LearnDash"){const i=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;a=z(a,i)}else if(e.triggered_entity==="GamiPress"){const i=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;a=w(a,i)}else if(e.triggered_entity==="Affiliate"){const i=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;a=U(a,i)}else if(e.triggered_entity==="BuddyBoss"){const i=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;a=V(a,i)}else if(e.triggered_entity==="WPCourseware"){const i=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;a=J(a,i)}else if(e.triggered_entity==="FluentCrm"){const i=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;a=K(a,i)}else if(e.triggered_entity==="Post"){const i=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;a=L(a,i)}else if(e.triggered_entity==="JetEngine"){const i=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;a=N(a,i)}else if(e.triggered_entity==="Memberpress"){const i=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;a=O(a,i)}else if(e.triggered_entity==="PaidMembershipPro"){const i=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;a=q(a,i)}else if(e.triggered_entity==="SliceWp"){const i=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;a=Z(a,i)}else if(e.triggered_entity==="SureCart"){const i=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;a=j(a,i)}else if(e.triggered_entity==="GiveWp"){const i=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;a=Q(a,i)}else if(e.triggered_entity==="LifterLms"){const i=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;a=X(a,i)}else if(e.triggered_entity==="MasterStudyLms"){const i=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;a=ee(a,i)}else if(e.triggered_entity==="ThriveApprentice"){const i=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;a=te(a,i)}else if(e.triggered_entity==="EDD"){const i=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;a=Y(a,i)}else if(e.triggered_entity==="UltimateMember"){const i=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;a=x(a,i)}const h={name:c.name,trigger:e.triggered_entity,triggered_entity_id:(F=e==null?void 0:e.triggerData)!=null&&F.formID?e.triggerData.formID:e.triggered_entity_id||0,flow_details:a};e.id&&(h.id=e.id),T(e.triggered_entity)&&(h.flow_details.fields=t?(H=e==null?void 0:e.flow_details)==null?void 0:H.fields:(b=e==null?void 0:e.triggerDetail)==null?void 0:b.data),t&&(p="flow/update");try{const i=yield W(h,p);return!t&&i.success&&_.push(d),u(!1),i}catch(i){return u(!1),y("Failed to save integration","bit-integrations")}}),de=a=>$(void 0,[a],function*({flow:e,setFlow:g,allIntegURL:d,conf:c,history:_,index:n,edit:t,setIsLoading:u,setSnackbar:p}){var m,I,S,F,b,H,i;let h="flow/save";u&&u instanceof Function&&u(!0);let r=c;if(e.triggered_entity==="Elementor"||e.triggered_entity==="Divi"||e.triggered_entity==="Bricks"||e.triggered_entity==="Brizy"||e.triggered_entity==="Breakdance"||e.triggered_entity==="CartFlow")t?r.postId=(I=(m=e==null?void 0:e.flow_details)==null?void 0:m.postId)!=null?I:null:r.postId=(F=(S=e==null?void 0:e.triggerData)==null?void 0:S.postId)!=null?F:null;else if(e.triggered_entity==="TutorLms"){const s=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;r=E(r,s)}else if(e.triggered_entity==="WC"){const s=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;r=R(r,s)}else if(e.triggered_entity==="Groundhogg"){const s=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;r=B(r,s)}else if(e.triggered_entity==="RestrictContent"){const s=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;r=G(r,s)}else if(e.triggered_entity==="LearnDash"){const s=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;r=z(r,s)}else if(e.triggered_entity==="BuddyBoss"){const s=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;r=V(r,s)}else if(e.triggered_entity==="WPCourseware"){const s=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;r=J(r,s)}else if(e.triggered_entity==="FluentCrm"){const s=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;r=K(r,s)}else if(e.triggered_entity==="Post"){const s=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;r=L(r,s)}else if(e.triggered_entity==="JetEngine"){const s=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;r=N(r,s)}else if(e.triggered_entity==="Affiliate"){const s=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;r=U(r,s)}else if(e.triggered_entity==="Memberpress"){const s=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;r=O(r,s)}else if(e.triggered_entity==="PaidMembershipPro"){const s=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;r=q(r,s)}else if(e.triggered_entity==="SliceWp"){const s=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;r=Z(r,s)}else if(e.triggered_entity==="SureCart"){const s=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;r=j(r,s)}else if(e.triggered_entity==="GiveWp"){const s=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;r=Q(r,s)}else if(e.triggered_entity==="LifterLms"){const s=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;r=X(r,s)}else if(e.triggered_entity==="EDD"){const s=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;r=Y(r,s)}else if(e.triggered_entity==="UltimateMember"){const s=t?e==null?void 0:e.flow_details:e==null?void 0:e.triggerData;r=x(r,s)}const C={name:c.name,trigger:e.triggered_entity,triggered_entity_id:(b=e==null?void 0:e.triggerData)!=null&&b.formID?e.triggerData.formID:e.triggered_entity_id||0,flow_details:r};e.id&&(C.id=e.id),T(e.triggered_entity)&&(C.flow_details.fields=t?(i=e==null?void 0:e.flow_details)==null?void 0:i.fields:(H=e==null?void 0:e.triggerDetail)==null?void 0:H.data),t&&(h="flow/update");try{yield W(C,h).then(s=>{var k;!t&&s.success&&_.push(d);let v="",P="success";(k=s.data)!=null&&k.msg?v=s.data.msg:s.success?v=t?y("Integration updated successfully","bit-integrations"):y("Integration saved successfully","bit-integrations"):(P="error",v=t?y("Failed to update integration","bit-integrations"):y("Failed to save integration","bit-integrations")),ae(v,{type:P}),u&&u instanceof Function&&u(!1),t||setTimeout(()=>{_.push(d)},700)})}catch(s){return u&&u instanceof Function&&u(!1),y("Failed to save integration","bit-integrations")}}),ce=e=>{const g={},c=window.location.href.replace(`${window.opener.location.href}/redirect`,"").split("&");c&&c.forEach(_=>{const n=_.split("=");n[1]&&(g[n[0]]=n[1])}),localStorage.setItem(`__${e}`,JSON.stringify(g)),window.close()},_e=(e,g,d,c,_,n,t,u,p,a)=>{if(!c.dataCenter||!c.clientId||!c.clientSecret){n({dataCenter:c.dataCenter?"":y("Data center cann't be empty","bit-integrations"),clientId:c.clientId?"":y("Client ID cann't be empty","bit-integrations"),clientSecret:c.clientSecret?"":y("Secret key cann't be empty","bit-integrations")});return}u(!0);const h=`https://accounts.zoho.${c.dataCenter}/oauth/v2/auth?scope=${d}&response_type=code&client_id=${c.clientId}&prompt=Consent&access_type=offline&state=${encodeURIComponent(window.location.href)}/redirect&redirect_uri=${encodeURIComponent(`${a.api.base}`)}/redirect`,r=window.open(h,e,"width=400,height=609,toolbar=off"),C=setInterval(()=>{if(r.closed){clearInterval(C);let m={},I=!1;const S=localStorage.getItem(`__${e}`);if(S&&(I=!0,m=JSON.parse(S),localStorage.removeItem(`__${e}`)),!m.code||m.error||!m||!I){const F=m.error?`Cause: ${m.error}`:"";p({show:!0,msg:`${y("Authorization failed","bit-integrations")} ${F}. ${y("please try again","bit-integrations")}`}),u(!1)}else{const F=D({},c);F.accountServer=m["accounts-server"],re(g,m,F,_,t,u,p,a)}}},500)},re=(e,g,d,c,_,n,t,u)=>{const p=D({},g);p.dataCenter=d.dataCenter,p.clientId=d.clientId,p.clientSecret=d.clientSecret,p.redirectURI=`${u.api.base}/redirect`,W(p,`${e}_generate_token`).then(a=>a).then(a=>{if(a&&a.success){const h=D({},d);h.tokenDetails=a.data,c(h),_(!0),t({show:!0,msg:y("Authorized Successfully","bit-integrations")})}else a&&a.data&&a.data.data||!a.success&&typeof a.data=="string"?t({show:!0,msg:`${y("Authorization failed Cause:","bit-integrations")}${a.data.data||a.data}. ${y("please try again","bit-integrations")}`}):t({show:!0,msg:y("Authorization failed. please try again","bit-integrations")});n(!1)})},ue=(e,g,d,c,_)=>{const n=D({},g);_?c?n.relatedlists[_-1].upload_field_map.splice(e,0,{}):n.relatedlists[_-1].field_map.splice(e,0,{}):c?n.upload_field_map.splice(e,0,{}):n.field_map.splice(e,0,{}),d(D({},n))},pe=(e,g,d,c,_)=>{const n=D({},g);_?c?n.relatedlists[_-1].upload_field_map.length>1&&n.relatedlists[_-1].upload_field_map.splice(e,1):n.relatedlists[_-1].field_map.length>1&&n.relatedlists[_-1].field_map.splice(e,1):c?n.upload_field_map.length>1&&n.upload_field_map.splice(e,1):n.field_map.length>1&&n.field_map.splice(e,1),d(D({},n))},ye=(e,g,d,c,_,n)=>{const t=D({},d);n?_?t.relatedlists[n-1].upload_field_map[g][e.target.name]=e.target.value:t.relatedlists[n-1].field_map[g][e.target.name]=e.target.value:_?t.upload_field_map[g][e.target.name]=e.target.value:t.field_map[g][e.target.name]=e.target.value,e.target.value==="custom"&&(n?t.relatedlists[n-1].field_map[g].customValue="":t.field_map[g].customValue=""),c(D({},t))},me=(e,g,d,c,_)=>{const n=D({},d);_?n.relatedlists[_-1].field_map[g].customValue=e.target.value:n.field_map[g].customValue=e,c(D({},n))};export{ue as a,ye as b,T as c,pe as d,ge as e,_e as f,ce as g,me as h,de as s};
