var O=Object.defineProperty;var j=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var S=(a,t,e)=>t in a?O(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,v=(a,t)=>{for(var e in t||(t={}))I.call(t,e)&&S(a,e,t[e]);if(j)for(var e of j(t))L.call(t,e)&&S(a,e,t[e]);return a};import{r as o,j as i}from"./main.js";import{e as w,c as N,_ as C,a as p}from"./bi-490-178.js";import{S as T}from"./bi-224-925.js";import{e as M}from"./bi-266-720.js";import{I as P}from"./bi-811-721.js";import q from"./bi-86-360.js";import{h as z,c as E}from"./bi-621-865.js";import{E as A}from"./bi-728-866.js";import"./bi-369-724.js";import"./bi-422-718.js";import"./bi-652-725.js";import"./bi-528-726.js";function $({formFields:a,setFlow:t,flow:e,allIntegURL:d}){const u=w(),[y,f]=o.useState(!1),[g,h]=o.useState({auth:!1,tags:!1,customFields:!1,lists:!1,emailOctopusFields:!1}),[r,x]=o.useState(1),[_,m]=o.useState({show:!1}),[s,c]=o.useState({name:"EmailOctopus",type:"EmailOctopus",auth_token:"",field_map:[{formField:"",emailOctopusFormField:""}],emailOctopusFields:[],lists:[],selectedList:"",status:"",tags:[],selectedTags:[],actions:{}}),k=()=>{f(!0),M(e,t,d,s,u,"","",f).then(l=>{var b;l.success?(p.success((b=l.data)==null?void 0:b.msg),u.push(d)):p.error(l.data||l)})},F=n=>{if(!E(s)){p.error("Please map mandatory emailOctopusFields");return}s.field_map.length>0&&x(n)};return document.querySelector(".btcd-s-wrp").scrollTop=0,i.jsxs("div",{children:[i.jsx(N,{snack:_,setSnackbar:m}),i.jsx("div",{className:"txt-center mt-2",children:i.jsx(T,{step:3,active:r})}),i.jsx(q,{emailOctopusConf:s,setEmailOctopusConf:c,step:r,setStep:x,loading:g,setLoading:h,setSnackbar:m}),i.jsxs("div",{className:"btcd-stp-page",style:v({},r===2&&{width:900,height:"auto",overflow:"visible"}),children:[i.jsx(A,{formFields:a,handleInput:n=>z(n,s,c),emailOctopusConf:s,setEmailOctopusConf:c,loading:g,setLoading:h,setSnackbar:m}),(s==null?void 0:s.selectedList)&&i.jsxs("button",{onClick:()=>F(3),disabled:!E(s),className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[C("Next","bit-integrations")," ","Â ",i.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(s==null?void 0:s.selectedList)&&i.jsx(P,{step:r,saveConfig:()=>k(),isLoading:y,dataConf:s,setDataConf:c,formFields:a})]})}export{$ as default};
