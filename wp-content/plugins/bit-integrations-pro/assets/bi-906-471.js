var w=Object.defineProperty;var x=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var k=(a,t,s)=>t in a?w(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,S=(a,t)=>{for(var s in t||(t={}))F.call(t,s)&&k(a,s,t[s]);if(x)for(var s of x(t))I.call(t,s)&&k(a,s,t[s]);return a};import{r as i,j as r}from"./main.js";import{e as N,c as C,_ as L,a as u}from"./bi-490-178.js";import{S as E}from"./bi-224-925.js";import{e as T}from"./bi-266-720.js";import{I as z}from"./bi-811-721.js";import A from"./bi-614-354.js";import{h as P,c as R}from"./bi-566-853.js";import{M as B}from"./bi-918-854.js";import"./bi-369-724.js";import"./bi-422-718.js";import"./bi-652-725.js";import"./bi-528-726.js";function U({formFields:a,setFlow:t,flow:s,allIntegURL:m}){const p=N(),[j,f]=i.useState(!1),[b,y]=i.useState({auth:!1,groups:!1,customFields:!1}),[o,h]=i.useState(1),[q,c]=i.useState({show:!1}),v=[{key:"email",label:"Email",required:!0},{key:"name",label:"Name",required:!1},{key:"address",label:"Address",required:!1},{key:"city",label:"City",required:!1},{key:"state",label:"State",required:!1},{key:"country",label:"Country",required:!1},{key:"birthday",label:"Birthday",required:!1},{key:"website",label:"Website",required:!1},{key:"locale",label:"Locale",required:!1},{key:"time_zone",label:"Time Zone",required:!1}],[e,l]=i.useState({name:"MailRelay",type:"MailRelay",auth_token:"",domain:"",field_map:[{formField:"",mailRelayFormField:""}],staticFields:v,status:"",customFields:[],groups:[],selectedGroups:[],actions:{}}),M=()=>{f(!0),T(s,t,m,e,p,"","",f).then(d=>{var g;d.success?(u.success((g=d.data)==null?void 0:g.msg),p.push(m)):u.error(d.data||d)})},_=n=>{if(!R(e)){u.error("Please map mandatory fields");return}e.field_map.length>0&&h(n)};return document.querySelector(".btcd-s-wrp").scrollTop=0,r.jsxs("div",{children:[r.jsx(C,{snack:q,setSnackbar:c}),r.jsx("div",{className:"txt-center mt-2",children:r.jsx(E,{step:3,active:o})}),r.jsx(A,{mailRelayConf:e,setMailRelayConf:l,step:o,setStep:h,loading:b,setLoading:y,setSnackbar:c}),r.jsxs("div",{className:"btcd-stp-page",style:S({},o===2&&{width:900,height:"auto",overflow:"visible"}),children:[r.jsx(B,{formFields:a,handleInput:n=>P(n,e,l),mailRelayConf:e,setMailRelayConf:l,loading:b,setLoading:y,setSnackbar:c}),(e==null?void 0:e.status)&&r.jsxs("button",{onClick:()=>_(3),disabled:!(e!=null&&e.status),className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[L("Next","bit-integrations")," ","Â ",r.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(e==null?void 0:e.status)&&r.jsx(z,{step:o,saveConfig:()=>M(),isLoading:j,dataConf:e,setDataConf:l,formFields:a})]})}export{U as default};
