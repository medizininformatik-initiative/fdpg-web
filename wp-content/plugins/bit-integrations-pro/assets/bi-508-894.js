var v=Object.defineProperty;var S=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var N=(a,i,e)=>i in a?v(a,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[i]=e,o=(a,i)=>{for(var e in i||(i={}))z.call(i,e)&&N(a,e,i[e]);if(S)for(var e of S(i))I.call(i,e)&&N(a,e,i[e]);return a};import{r as q,j as t,L as k}from"./main.js";import{b as g,a as s,_ as u,a8 as j}from"./bi-490-178.js";const P=(a,i,e,d,n,l)=>{const r=o({},i),{name:p}=a.target;a.target.value!==""?r[p]=a.target.value:delete r[p],r[a.target.name]=a.target.value,e(o({},r))},F=(a,i,e,d)=>{e(!0),a.courseId,g({},"mslms_fetch_all_course").then(n=>{if(n&&n.success){const l=o({},a);l.default||(l.default={}),n.data&&(l.default.allCourse=n.data),i(o({},l)),e(!1),s.success(u("Course fetched successfully","bit-integrations"));return}e(!1),s.error(u("Course fetch failed. please try again","bit-integrations"))}).catch(()=>e(!1))},w=(a,i,e,d)=>{e(!0);const n={courseId:a.courseId};g(n,"msLms_fetch_all_lesson").then(l=>{if(l&&l.success){const r=o({},a);r.default||(r.default={}),l.data&&(r.default.allLesson=l.data),i(o({},r)),e(!1),s.success(u("Lesson fetched successfully","bit-integrations"));return}e(!1),s.error(u("Lesson fetch failed. please try again","bit-integrations"))}).catch(()=>e(!1))},f=(a,i,e,d)=>{e(!0);const n={courseId:a.courseId};g(n,"msLms_fetch_all_quiz").then(l=>{if(l&&l.success){const r=o({},a);r.default||(r.default={}),l.data&&(r.default.allQuiz=l.data),i(o({},r)),e(!1),s.success(u("Quiz fetched successfully","bit-integrations"));return}e(!1),s.error(u("Quiz fetch failed. please try again","bit-integrations"))}).catch(()=>e(!1))};function R({formFields:a,handleInput:i,msLmsConf:e,setMsLmsConf:d,isLoading:n,setIsLoading:l,setSnackbar:r,allIntegURL:p,isInfo:Q,edit:D}){var A,y,_;q.useEffect(()=>{["1","2","3","4","5"].includes(e.mainAction)&&F(e,d,l)},[e.mainAction]);const x=(c,h)=>{const b=o({},e);c!==""?(b[h]=c,(e.mainAction==="2"||e.mainAction==="5")&&w(b,d,l),e.mainAction==="3"&&f(b,d,l)):delete b[h],d(o({},b))};return t.jsxs(t.Fragment,{children:[t.jsx("br",{}),t.jsx("b",{className:"wdt-200 d-in-b",children:u("Actions:","bit-integrations")}),t.jsxs("select",{onChange:i,name:"mainAction",value:e.mainAction,className:"btcd-paper-inp w-5",children:[t.jsx("option",{value:"",children:u("Select Actions","bit-integrations")}),e.allActions&&e.allActions.map(({key:c,label:h})=>t.jsx("option",{value:c,children:h},c))]}),t.jsx("br",{}),t.jsx("br",{}),["1","2","3","4","5"].includes(e.mainAction)&&t.jsxs("div",{className:"flx mt-4",children:[t.jsx("b",{className:"wdt-200 d-in-b",children:u("Select a Course: ","bit-integrations")}),t.jsx(j,{className:"w-5",singleSelect:!0,defaultValue:e==null?void 0:e.courseId,options:((A=e==null?void 0:e.default)==null?void 0:A.allCourse)&&e.default.allCourse.map(c=>({label:c.post_title,value:c.ID.toString()})),onChange:c=>x(c,"courseId")}),t.jsx("button",{onClick:()=>fetchAllCourse(e,d,l,r),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${u("Fetch course list","bit-integrations")}'`},type:"button",disabled:n,children:"↻"})]}),(e.mainAction==="2"||e.mainAction==="5")&&(e==null?void 0:e.courseId)&&t.jsxs("div",{className:"flx mt-4",children:[t.jsx("b",{className:"wdt-200 d-in-b",children:u("Select lesson: ","bit-integrations")}),t.jsx(j,{className:"w-5",singleSelect:!0,defaultValue:e==null?void 0:e.lessonId,options:((y=e==null?void 0:e.default)==null?void 0:y.allLesson)&&e.default.allLesson.map(c=>({label:c.post_title,value:c.ID.toString()})),onChange:c=>x(c,"lessonId")}),t.jsx("button",{onClick:()=>w(e,d,l),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${u("Fetch lesson list","bit-integrations")}'`},type:"button",disabled:n,children:"↻"})]}),e.mainAction==="3"&&(e==null?void 0:e.courseId)&&t.jsxs("div",{className:"flx mt-4",children:[t.jsx("b",{className:"wdt-200 d-in-b",children:u("Select quiz: ","bit-integrations")}),t.jsx(j,{className:"w-5",singleSelect:!0,defaultValue:e==null?void 0:e.quizId,options:((_=e==null?void 0:e.default)==null?void 0:_.allQuiz)&&e.default.allQuiz.map(c=>({label:c.post_title,value:c.ID.toString()})),onChange:c=>x(c,"quizId")}),t.jsx("button",{onClick:()=>f(e,d,l),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${u("Fetch quiz list","bit-integrations")}'`},type:"button",disabled:n,children:"↻"})]}),t.jsx("br",{}),t.jsx("br",{}),n&&t.jsx(k,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}})]})}export{R as M,P as h};
