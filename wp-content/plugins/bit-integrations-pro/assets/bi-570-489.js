var I=Object.defineProperty;var v=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var L=(a,s,n)=>s in a?I(a,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[s]=n,y=(a,s)=>{for(var n in s||(s={}))w.call(s,n)&&L(a,n,s[n]);if(v)for(var n of v(s))C.call(s,n)&&L(a,n,s[n]);return a};import{r as m,j as e}from"./main.js";import{_ as l,E as A,b as z,F as E,e as _,f as F,c as B}from"./bi-490-178.js";import{S as D}from"./bi-224-925.js";import{s as M}from"./bi-266-720.js";import{I as T}from"./bi-811-721.js";import{L as P,h as H,c as U}from"./bi-21-887.js";import{B as q}from"./bi-475-763.js";import"./bi-369-724.js";import"./bi-422-718.js";function G({formID:a,lifterLmsConf:s,setLifterLmsConf:n,step:d,setStep:g,isLoading:f,setIsLoading:h,setSnackbar:x}){const[i,u]=m.useState(!1),[c,p]=m.useState(!1),j=()=>{h("auth"),z({},"lifterLms_authorize").then(o=>{o!=null&&o.success&&(u(!0),x({show:!0,msg:l("Connected with LifterLms Successfully","bit-integrations")})),h(!1),p(!0)})},r=o=>{const t=E(s);t[o.target.name]=o.target.value,n(t)};return e.jsxs("div",{className:"btcd-stp-page",style:{width:d===1&&900,height:d===1&&"auto"},children:[e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:l("Integration Name:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:r,name:"name",value:s.name,type:"text",placeholder:l("Integration Name...","bit-integrations")}),f==="auth"&&e.jsxs("div",{className:"flx mt-5",children:[e.jsx(A,{size:25,clr:"#022217",className:"mr-2"}),"Checking if LifterLms is active!!!"]}),c&&!i&&!f&&e.jsxs("div",{className:"flx mt-5",style:{color:"red"},children:[e.jsx("span",{className:"btcd-icn mr-2",style:{fontSize:30,marginTop:-5},children:"×"}),"LifterLms plugin must be activated to integrate with Bit Integrations."]}),!i&&e.jsx("button",{onClick:j,className:"btn btcd-btn-lg green sh-sm flx mt-5",type:"button",children:l("Connect","bit-integrations")}),i&&e.jsxs("button",{onClick:()=>g(2),className:"btn btcd-btn-lg green sh-sm flx mt-5",type:"button",disabled:!i,children:[l("Next","bit-integrations"),e.jsx(q,{className:"ml-1 rev-icn"})]})]})}function $({formFields:a,setFlow:s,flow:n,allIntegURL:d,isInfo:g,edit:f}){const h=_(),{formID:x}=F(),[i,u]=m.useState(!1),[c,p]=m.useState(1),[j,r]=m.useState({show:!1}),o=[{key:"1",label:"Lesson complete for the user"},{key:"2",label:"Section complete for the user"},{key:"3",label:"Enroll user in a course"},{key:"4",label:"Enroll user in a membership"},{key:"5",label:"Course complete for the user"},{key:"6",label:"Unenroll user from a course"},{key:"7",label:"Unenroll user from a membership"}],[t,b]=m.useState({name:"LifterLms",type:"LifterLms",mainAction:"",field_map:[{formField:"",lifterLmsFormField:""}],allActions:o,actions:{}}),N=()=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),t.mainAction==="11"&&!U(t)){r({show:!0,msg:"Please map fields to continue."});return}t.mainAction!==""&&p(3)};function k(){switch(t.mainAction){case"1":return t.lessonId===void 0;case"2":return t.sectionId===void 0;case"3":case"5":case"6":return t.courseId===void 0;case"4":case"7":return t.membershipId===void 0;default:return!1}}return e.jsxs("div",{children:[e.jsx(B,{snack:j,setSnackbar:r}),e.jsx("div",{className:"txt-center mt-2",children:e.jsx(D,{step:3,active:c})}),e.jsx(G,{formID:x,lifterLmsConf:t,setLifterLmsConf:b,step:c,setStep:p,isLoading:i,setIsLoading:u,setSnackbar:r}),e.jsxs("div",{className:"btcd-stp-page",style:y({},c===2&&{width:900,height:"auto",overflow:"visible"}),children:[e.jsx(P,{formFields:a,handleInput:S=>H(S,t,b),lifterLmsConf:t,setLifterLmsConf:b,isLoading:i,setIsLoading:u,setSnackbar:r,allIntegURL:d,isInfo:g,edit:f}),e.jsxs("button",{onClick:()=>N(),disabled:!t.mainAction||i||k(),className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[l("Next","bit-integrations")," ",e.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),e.jsx(T,{step:c,saveConfig:()=>M({flow:n,setFlow:s,allIntegURL:d,history:h,conf:t,setIsLoading:u,setSnackbar:r}),isLoading:i,dataConf:t,setDataConf:b,formFields:a})]})}export{$ as default};
