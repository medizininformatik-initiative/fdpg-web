var S=Object.defineProperty;var k=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var j=(n,s,a)=>s in n?S(n,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[s]=a,A=(n,s)=>{for(var a in s||(s={}))C.call(s,a)&&j(n,a,s[a]);if(k)for(var a of k(s))I.call(s,a)&&j(n,a,s[a]);return n};import{r as m,j as e}from"./main.js";import{_ as l,E as G,b as R,F as T,e as _,f as z,h as B,B as F,c as D}from"./bi-490-178.js";import{S as E}from"./bi-224-925.js";import{s as M}from"./bi-266-720.js";import{I as H}from"./bi-811-721.js";import{G as q,h as L}from"./bi-35-830.js";import{B as $}from"./bi-475-763.js";import"./bi-369-724.js";import"./bi-422-718.js";import"./bi-652-725.js";import"./bi-528-726.js";function J({formID:n,gamiPressConf:s,setGamiPressConf:a,step:d,setStep:x,isLoading:u,setIsLoading:p,setSnackbar:v}){const[i,h]=m.useState(!1),[r,b]=m.useState(!1),y=()=>{p("auth"),R({},"gamiPress_authorize").then(o=>{o!=null&&o.success&&(h(!0),v({show:!0,msg:l("Connected with GamiPress Successfully","bit-integrations")})),p(!1),b(!0)})},c=o=>{const f=T(s);f[o.target.name]=o.target.value,a(f)};return e.jsxs("div",{className:"btcd-stp-page",style:{width:d===1&&900,height:d===1&&"auto"},children:[e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:l("Integration Name:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:c,name:"name",value:s.name,type:"text",placeholder:l("Integration Name...","bit-integrations")}),u==="auth"&&e.jsxs("div",{className:"flx mt-5",children:[e.jsx(G,{size:25,clr:"#022217",className:"mr-2"}),"Checking if GamiPress is active!!!"]}),r&&!i&&!u&&e.jsxs("div",{className:"flx mt-5",style:{color:"red"},children:[e.jsx("span",{className:"btcd-icn mr-2",style:{fontSize:30,marginTop:-5},children:"×"}),"GamiPress plugin must be activated to integrate with Bit Integrations."]}),!i&&e.jsx("button",{onClick:y,className:"btn btcd-btn-lg green sh-sm flx mt-5",type:"button",children:l("Connect","bit-integrations")}),i&&e.jsxs("button",{onClick:()=>x(2),className:"btn btcd-btn-lg green sh-sm flx mt-5",type:"button",disabled:!i,children:[l("Next","bit-integrations"),e.jsx($,{className:"ml-1 rev-icn"})]})]})}function ae({formFields:n,setFlow:s,flow:a,allIntegURL:d,isInfo:x,edit:u}){const p=_(),{formID:v}=z();B(F);const[i,h]=m.useState(!1),[r,b]=m.useState(1),[y,c]=m.useState({show:!1}),o=[{key:"1",label:"Award rank to the user"},{key:"2",label:"Award an achievement to the user"},{key:"3",label:"Award a points to the user"},{key:"4",label:"Revoke a rank form the user"},{key:"5",label:"Revoke an achievement form the user"},{key:"6",label:"Revoke points from the user"}],f=[{key:"point",label:"Point",required:!0}],[t,g]=m.useState({name:"GamiPress",type:"GamiPress",mainAction:"",field_map:[{formField:"",gamiPressFormField:""}],pointFields:f,allActions:o,actions:{}}),N=()=>{setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),t.mainAction!==""&&b(3)};function P(){switch(t.mainAction){case"1":return t.selectedRank===void 0||t.selectedRank==="";case"2":return t.selectedAchievement===void 0||t.selectedAchievement==="";case"3":return t.selectedPointType===void 0||t.selectedPointType==="";case"4":return t.selectedRank===void 0||t.selectedRank==="";case"5":return t.selectedAchievement===void 0||t.selectedAchievement==="";case"6":return t.selectedPointType===void 0||t.selectedPointType==="";default:return!1}}return e.jsxs("div",{children:[e.jsx(D,{snack:y,setSnackbar:c}),e.jsx("div",{className:"txt-center mt-2",children:e.jsx(E,{step:3,active:r})}),e.jsx(J,{formID:v,gamiPressConf:t,setGamiPressConf:g,step:r,setStep:b,isLoading:i,setIsLoading:h,setSnackbar:c}),e.jsxs("div",{className:"btcd-stp-page",style:A({},r===2&&{width:900,height:"auto",overflow:"visible"}),children:[e.jsx(q,{formFields:n,handleInput:w=>L(w,t,g),gamiPressConf:t,setGamiPressConf:g,isLoading:i,setIsLoading:h,setSnackbar:c,allIntegURL:d,isInfo:x,edit:u}),e.jsxs("button",{onClick:()=>N(),disabled:!t.mainAction||i||P(),className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[l("Next","bit-integrations")," ",e.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),e.jsx(H,{step:r,saveConfig:()=>M({flow:a,setFlow:s,allIntegURL:d,history:p,conf:t,setIsLoading:h,setSnackbar:c}),isLoading:i,dataConf:t,setDataConf:g,formFields:n})]})}export{ae as default};
