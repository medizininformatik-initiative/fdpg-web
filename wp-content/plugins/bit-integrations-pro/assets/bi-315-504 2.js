var w=Object.defineProperty;var k=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var q=(t,s,a)=>s in t?w(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,g=(t,s)=>{for(var a in s||(s={}))F.call(s,a)&&q(t,a,s[a]);if(k)for(var a of k(s))C.call(s,a)&&q(t,a,s[a]);return t};import{r as i,j as r}from"./main.js";import{e as D,c as P,_ as A,a as m}from"./bi-490-178.js";import{S as E}from"./bi-224-925.js";import{e as M}from"./bi-266-720.js";import{I as T}from"./bi-811-721.js";import z from"./bi-936-386.js";import{s as B,h as H,c as x}from"./bi-664-914.js";import{L as G}from"./bi-687-915.js";import"./bi-369-724.js";import"./bi-422-718.js";import"./bi-652-725.js";function ee({formFields:t,setFlow:s,flow:a,allIntegURL:f}){const y=D(),[p,o]=i.useState(!1),[S,_]=i.useState({}),[l,b]=i.useState(1),[v,u]=i.useState({show:!1}),j=[{key:"name",label:"Name",required:!0}],N=[{key:"first_name",label:"First Name",required:!1},{key:"last_name",label:"Last Name",required:!1},{key:"email",label:"Email",required:!0},{key:"mobile_phone",label:"Mobile Phone",required:!1},{key:"home_phone",label:"Home Phone",required:!1},{key:"office_phone",label:"Office Phone",required:!1},{key:"fax",label:"Fax",required:!1},{key:"company",label:"Company",required:!1},{key:"birthday",label:"Birthday",required:!1},{key:"anniversary",label:"Anniversary",required:!1},{key:"spouse_name",label:"Spouse Name",required:!1},{key:"spouse_email",label:"Spouse Email",required:!1},{key:"spouse_phone",label:"Spouse Phone",required:!1},{key:"spouse_birthday",label:"Spouse Birthday",required:!1},{key:"type",label:"Address type",required:!1},{key:"street_address_1",label:"Street Address 1",required:!1},{key:"street_address_2",label:"Street Address 2",required:!1},{key:"zip",label:"Zip",required:!1},{key:"city",label:"City",required:!1},{key:"state",label:"State",required:!1}],[e,n]=i.useState({name:"LionDesk",type:"LionDesk",clientId:"",clientSecret:"",field_map:[{formField:"",lionDeskFormField:""}],actionName:"",actionId:"",campaignFields:j,contactFields:N,actions:{}});i.useEffect(()=>{window.opener&&B("lionDesk")},[]);const L=()=>{o(!0),M(a,s,f,e,y,"","",o).then(c=>{var h;c.success?(m.success((h=c.data)==null?void 0:h.msg),y.push(f)):m.error(c.data||c)})},I=d=>{if(!x(e)){m.error("Please map mandatory fields");return}e.field_map.length>0&&b(d)};return document.querySelector(".btcd-s-wrp").scrollTop=0,r.jsxs("div",{children:[r.jsx(P,{snack:v,setSnackbar:u}),r.jsx("div",{className:"txt-center mt-2",children:r.jsx(E,{step:3,active:l})}),r.jsx(z,{lionDeskConf:e,setLionDeskConf:n,step:l,setStep:b,setSnackbar:u,isLoading:p,setIsLoading:o}),r.jsxs("div",{className:"btcd-stp-page",style:g({},l===2&&{width:900,height:"auto",overflow:"visible"}),children:[r.jsx(G,{formFields:t,handleInput:d=>H(d,e,n),lionDeskConf:e,setLionDeskConf:n,loading:S,setLoading:_,isLoading:p,setIsLoading:o,setSnackbar:u}),(e==null?void 0:e.actionName)&&r.jsxs("button",{onClick:()=>I(3),disabled:!x(e),className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[A("Next","bit-integrations")," ","Â ",r.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(e==null?void 0:e.actionName)&&r.jsx(T,{step:l,saveConfig:()=>L(),isLoading:p,dataConf:e,setDataConf:n,formFields:t})]})}export{ee as default};
