var w=Object.defineProperty;var g=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var b=(n,e,s)=>e in n?w(n,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[e]=s,l=(n,e)=>{for(var s in e||(e={}))A.call(e,s)&&b(n,s,e[s]);if(g)for(var s of g(e))E.call(e,s)&&b(n,s,e[s]);return n};import{r as i,j as t}from"./main.js";import{_ as r,E as x,b as _}from"./bi-490-178.js";import{B as k}from"./bi-475-763.js";function D({formID:n,fluentCrmConf:e,setFluentCrmConf:s,step:m,nextPage:f,setSnackbar:p,isInfo:j}){const[o,N]=i.useState(!1),[C,S]=i.useState({integrationName:""}),[v,z]=i.useState(!1),[c,d]=i.useState(!1),[I,y]=i.useState(!0);i.useEffect(()=>()=>{y(!1)},[]);const F=()=>{d("auth"),_({},"fluent_crm_authorize").then(a=>{I&&(a!=null&&a.success&&(N(!0),p({show:!0,msg:r("Connected Successfully","bit-integrations")})),z(!0),d(!1))})},M=a=>{const u=l({},e),h=l({},C);h[a.target.name]="",u[a.target.name]=a.target.value,S(h),s(u)};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"btcd-stp-page",style:{width:m===1&&900,height:m===1&&"auto"},children:[t.jsx("div",{className:"mt-3",children:t.jsx("b",{children:r("Integration Name:","bit-integrations")})}),t.jsx("input",{className:"btcd-paper-inp w-5 mt-1",onChange:M,name:"name",value:e.name,type:"text",placeholder:r("Integration Name...","bit-integrations"),disabled:j}),c==="auth"&&t.jsxs("div",{className:"flx mt-5",children:[t.jsx(x,{size:25,clr:"#022217",className:"mr-2"}),"Checking if Fluent CRM is active!!!"]}),v&&!o&&!c&&t.jsxs("div",{className:"flx mt-5",style:{color:"red"},children:[t.jsx("span",{className:"btcd-icn mr-2",style:{fontSize:30,marginTop:-5},children:"×"}),"Please! First Install Fluent CRM Plugins"]}),t.jsxs("button",{onClick:F,className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:o||c,children:[o?r("Connected ✔","bit-integrations"):r("Connect to Fluent CRM","bit-integrations"),c&&t.jsx(x,{size:20,clr:"#022217",className:"ml-2"})]}),t.jsx("br",{}),t.jsxs("button",{onClick:()=>f(2),className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",disabled:!o,children:[r("Next","bit-integrations"),t.jsx(k,{className:"ml-1 rev-icn"})]})]})})}export{D as default};
