var H=Object.defineProperty;var P=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var E=(d,t,s)=>t in d?H(d,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[t]=s,p=(d,t)=>{for(var s in t||(t={}))K.call(t,s)&&E(d,s,t[s]);if(P)for(var s of P(t))D.call(t,s)&&E(d,s,t[s]);return d};import{r as m,j as e}from"./main.js";import{_ as a,a8 as T,F as S,e as L,f as B,c as V}from"./bi-490-178.js";import{S as _}from"./bi-224-925.js";import{s as I}from"./bi-266-720.js";import{I as M}from"./bi-811-721.js";import{T as U,a as w,P as k}from"./bi-805-737.js";import{P as R,R as W,B as $}from"./bi-568-764.js";import"./bi-369-724.js";import"./bi-422-718.js";function q({formID:d,customApiConf:t,setCustomApiConf:s,step:c,setStep:h,isLoading:j,setIsLoading:v,setSnackbar:y,redirectLocation:b,isInfo:n}){m.useState(!1);const u=[{label:"API Key",value:"apikey"},{label:"Bearer Token",value:"bearer"},{label:"Basic Auth",value:"basic"}],x=[{label:"Header",value:"header"},{label:"Query String",value:"query"}],i=l=>{const g=p({},t);g[l.target.name]=l.target.value,s(g)},r=(l,g)=>{const N=S(t);l?N[g]=l:delete N[g],s(p({},N))};function o(l){switch(l){case"apikey":return!t.key||!t.value||!t.apiKeyAddTo;case"bearer":return!t.key||!t.token;case"basic":return!t.username||!t.password;default:return!0}}return e.jsxs("div",{className:"btcd-stp-page",style:{width:c===1&&900,height:c===1&&"1000px"},children:[e.jsxs("div",{className:"d-flx",children:[e.jsx("div",{className:"wdt-200 d-in-b mt-3",children:e.jsx("b",{children:a("Integration Name:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:i,name:"name",value:t.name,type:"text",placeholder:a("Integration Name...","bit-integrations"),disabled:n})]}),e.jsx("br",{}),e.jsxs("div",{className:"d-flx",children:[e.jsx("b",{className:"wdt-200 d-in-b mt-3",children:a("Select Auth Protocol: ","bit-integrations")}),e.jsx(T,{defaultValue:t.authType,className:"btcd-paper-drpdwn w-5",singleSelect:!0,options:u,onChange:l=>r(l,"authType")})]}),t.authType==="apikey"&&e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:a("Key:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-2",onChange:i,name:"key",value:t.key,type:"text",placeholder:a("key","bit-integrations"),disabled:n})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:a("Value:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-2",onChange:i,name:"value",value:t.value,type:"text",placeholder:a("value","bit-integrations"),disabled:n})]}),e.jsx("b",{className:"wdt-200 d-in-b mt-3",children:a("Add to: ","bit-integrations")}),e.jsx(T,{defaultValue:t.apiKeyAddTo,className:"btcd-paper-drpdwn w-5 mt-2",singleSelect:!0,options:x,onChange:l=>r(l,"apiKeyAddTo")})]}),t.authType==="bearer"&&e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:a("Key:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-2",onChange:i,name:"key",value:t.key,type:"text",placeholder:a("key","bit-integrations"),disabled:n})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:a("Token:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-2",onChange:i,name:"token",value:t.token,type:"text",placeholder:a("Token","bit-integrations"),disabled:n})]})]}),t.authType==="basic"&&e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:a("Key:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-2",onChange:i,name:"key",value:t.key,type:"text",placeholder:a("key","bit-integrations"),disabled:n})]}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:a("User Name:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:i,name:"username",value:t.username,type:"text",placeholder:a("User Name...","bit-integrations"),disabled:n}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:a("password:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:i,name:"password",value:t.password,type:"text",placeholder:a("password...","bit-integrations"),disabled:n})]}),e.jsx("br",{}),e.jsx("div",{style:p({},c===1&&{width:900,height:"auto",overflow:"visible"}),children:e.jsxs("button",{onClick:()=>h(2),disabled:o(t.authType)||j,className:"btn btcd-btn-lg green sh-sm ",type:"button",children:[a("Next","bit-integrations"),e.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})})]})}const F=({formID:d,formFields:t,customApiConf:s,setCustomApiConf:c,isInfo:h,create:j,step:v,setStep:y})=>{const[b,n]=m.useState(1),u=[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"DELETE",label:"DELETE"},{value:"PATCH",label:"PATCH"}],x=(r,o)=>{const l=S(s);r?l[o]=r:delete l[o],c(p({},l))},i=r=>{const o=S(s);o[r.target.name]=r.target.value,c(o)};return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsxs("div",{className:"d-flx",children:[e.jsx("b",{className:"wdt-200 d-in-b mt-3",children:a("Select Method: ","bit-integrations")}),e.jsx(T,{defaultValue:s.actionMethod,className:"btcd-paper-drpdwn w-5",singleSelect:!0,options:u,onChange:r=>x(r,"actionMethod")})]}),e.jsx("br",{}),e.jsxs("div",{className:"d-flx",children:[e.jsx("div",{className:"wdt-200 d-in-b mt-3",children:e.jsx("b",{children:a("Api endpoint:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:i,name:"url",value:s.apiEndpoint,type:"text",placeholder:a("api endpoint","bit-integrations")})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs(U,{children:[e.jsxs("div",{className:"flx mt-2",children:[e.jsx(w,{children:e.jsx("button",{className:`btcd-s-tab-link ${b===1&&"s-t-l-active"}`,type:"button",children:a("Params","bit-integrations")})}),e.jsx(w,{children:e.jsx("button",{className:`btcd-s-tab-link ${b===2&&"s-t-l-active"}`,type:"button",children:a("Headers","bit-integrations")})}),e.jsx(w,{children:e.jsx("button",{className:`btcd-s-tab-link ${b===3&&"s-t-l-active"}`,type:"button",children:a("Body","bit-integrations")})})]}),e.jsx("div",{className:"btcd-hr"}),e.jsx(k,{children:e.jsx(R,{webHooks:s,setWebHooks:c,formFields:t,isInfo:h,setTab:n})}),e.jsx(k,{children:e.jsx(W,{webHooks:s,setWebHooks:c,formFields:t,isInfo:h,setTab:n})}),e.jsx(k,{children:e.jsx($,{webHooks:s,setWebHooks:c,formFields:t,isInfo:h,setTab:n})})]})]})};function A({formFields:d,setFlow:t,flow:s,allIntegURL:c}){const h=L(),{formID:j}=B(),[v,y]=m.useState(!1),[b,n]=m.useState(1),[u,x]=m.useState({show:!1}),[i,r]=m.useState({name:"CustomApi",type:"CustomApi",url:"",field_map:[{formField:"",customApiFormField:""}],actions:{}}),o=()=>{setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),n(3)};return e.jsxs("div",{children:[e.jsx(V,{snack:u,setSnackbar:x}),e.jsx("div",{className:"txt-center mt-2",children:e.jsx(_,{step:3,active:b})}),e.jsx(q,{formID:j,customApiConf:i,setCustomApiConf:r,step:b,setStep:n,isLoading:v,setIsLoading:y,setSnackbar:x}),e.jsxs("div",{className:"btcd-stp-page",style:p({},b===2&&{width:900,height:"1000px",overflow:"visible"}),children:[e.jsx(F,{formID:j,formFields:d,customApiConf:i,setCustomApiConf:r,create:!0,step:!0,setStep:!0}),e.jsxs("button",{onClick:()=>o(),className:"btn btcd-btn-lg green sh-sm flx",type:"button",children:[a("Next","bit-integrations"),"Â ",e.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),e.jsx(M,{step:b,saveConfig:()=>I({flow:s,setFlow:t,allIntegURL:c,history:h,conf:i,setIsLoading:y,setSnackbar:x}),isLoading:v,dataConf:i,setDataConf:r,formFields:d})]})}export{A as default};
