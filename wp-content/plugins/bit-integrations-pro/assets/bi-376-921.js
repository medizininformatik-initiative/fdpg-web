var A=Object.defineProperty;var y=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var v=(l,t,c)=>t in l?A(l,t,{enumerable:!0,configurable:!0,writable:!0,value:c}):l[t]=c,p=(l,t)=>{for(var c in t||(t={}))M.call(t,c)&&v(l,c,t[c]);if(y)for(var c of y(t))R.call(t,c)&&v(l,c,t[c]);return l};import{r as $,j as e,L as u}from"./main.js";import{a7 as V,_ as s,d as q,a8 as _,h as I,B as T}from"./bi-490-178.js";import{g as h,r as F}from"./bi-147-920.js";import{S as P}from"./bi-652-725.js";const k=(l,t,c)=>{const n=p({},t);n.field_map.splice(l,0,{}),c(p({},n))},S=(l,t,c)=>{const n=p({},t);n.field_map.length>1&&n.field_map.splice(l,1),c(p({},n))},w=(l,t,c,n)=>{const r=p({},c);r.field_map[t][l.target.name]=l.target.value,l.target.value==="custom"&&(r.field_map[t].customValue=""),n(p({},r))};function B({suiteDashConf:l,setSuiteDashConf:t,loading:c,setLoading:n}){var j,i;const[r,o]=$.useState({show:!1,action:()=>{}}),d=(a,m)=>{var N;const b=p({},l);m==="company"&&((N=a.target)!=null&&N.checked?(b.companies===void 0&&(b.companies=h(l,t,n)),b.actions.company=!0):(o({show:!1}),delete b.actions.company)),o({show:m}),t(p({},b))},x=()=>{o({show:!1})},g=(a,m)=>{t(b=>(b[m]=a,b))};return e.jsxs("div",{className:"pos-rel d-flx flx-wrp",children:[l.actionName==="contact"&&e.jsx(V,{checked:((j=l==null?void 0:l.selectedCompany)==null?void 0:j.length)||!1,onChange:a=>d(a,"company"),className:"wdt-200 mt-4 mr-2",value:"company",title:s("Add Company","bit - integrations"),subTitle:s("Add Company")}),e.jsxs(q,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:s("Ok","bit-integrations"),show:r.show==="company",close:x,action:x,title:s("company","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2 mb-2"}),e.jsx("div",{className:"mt-2",children:s("Select Company","bit-integrations")}),c.companies?e.jsx(u,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):e.jsxs("div",{className:"flx flx-between mt-2",children:[e.jsx(_,{options:(i=l==null?void 0:l.companies)==null?void 0:i.map(a=>({label:a,value:a})),className:"msl-wrp-options",defaultValue:l.selectedCompany,onChange:a=>g(a,"selectedCompany"),singleSelect:!0}),e.jsx("button",{onClick:()=>h(l,t,n),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`${s("Refresh Companies","bit-integrations")}'`},type:"button",children:"↻"})]})]})]})}function E({i:l,formFields:t,field:c,suiteDashConf:n,setSuiteDashConf:r}){var i;const o=["owner","pipeline","stage","primaryContact","type","tags","lostReason","source","status","priority","currency","isActive","primaryCompany"],d=(n==null?void 0:n.suiteDashFields)&&(n==null?void 0:n.suiteDashFields.filter(a=>a.required===!0&&!o.includes(a.key)))||[],x=(n==null?void 0:n.suiteDashFields)&&(n==null?void 0:n.suiteDashFields.filter(a=>a.required===!1&&!o.includes(a.key)))||[],g=I(T),{isPro:j}=g;return e.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:e.jsxs("div",{className:"pos-rel flx",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:c.formField||"",onChange:a=>w(a,l,n,r),children:[e.jsx("option",{value:"",children:s("Select Field","bit-integrations")}),e.jsx("optgroup",{label:"Form Fields",children:t==null?void 0:t.map(a=>e.jsx("option",{value:a.name,children:a.label},`ff-rm-${a.name}`))}),e.jsx("option",{value:"custom",children:s("Custom...","bit-integrations")}),e.jsx("optgroup",{label:`General Smart Codes ${j?"":"(PRO)"}`,children:j&&((i=P)==null?void 0:i.map(a=>e.jsx("option",{value:a.name,children:a.label},`ff-rm-${a.name}`)))})]}),c.formField==="custom"&&e.jsx(CustomField,{field:c,index:l,conf:n,setConf:r,fieldValue:"customValue",fieldLabel:"Custom Value",className:"mr-2"}),e.jsxs("select",{className:"btcd-paper-inp",disabled:l<d.length,name:"suiteDashFormField",value:l<d.length?d[l].key||"":c.suiteDashFormField||"",onChange:a=>w(a,l,n,r),children:[e.jsx("option",{value:"",children:s("Select Field","bit-integrations")}),l<d.length?e.jsx("option",{value:d[l].key,children:d[l].label},d[l].key):x.map(({key:a,label:m})=>e.jsx("option",{value:a,children:m},a))]})]}),l>=d.length&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>k(l,n,r),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>S(l,n,r),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function J({formFields:l,suiteDashConf:t,setSuiteDashConf:c,loading:n,setLoading:r,isLoading:o,setIsLoading:d,setSnackbar:x}){const g=i=>{const a=p({},t),{name:m}=i.target;i.target.value!==""?(a[m]=i.target.value,F(a,c,d,x)):(delete a[m],delete a.actionId),c(a)},j=(i,a)=>{c(m=>(m[a]=i,m))};return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:s("Select Action:","bit-integrations")}),e.jsxs("select",{onChange:g,name:"actionName",value:t.actionName,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:s("Select an action","bit-integrations")}),e.jsx("option",{value:"contact","data-action_name":"contact",children:s("Create Contact","bit-integrations")})]}),o&&e.jsx(u,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),t.actionName==="contact"&&!o&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"flx",children:[e.jsx("b",{className:"wdt-200 d-in-b",children:s("Select Role:","bit-integrations")}),e.jsx(_,{options:["Lead","Prospect","Client"].map(i=>({label:i,value:i})),className:"msl-wrp-options dropdown-custom-width",defaultValue:t==null?void 0:t.selectedRole,onChange:i=>j(i,"selectedRole"),singleSelect:!0})]})]}),t.actionName&&!o&&e.jsxs("div",{children:[e.jsx("br",{}),e.jsxs("div",{className:"mt-5",children:[e.jsx("b",{className:"wdt-100",children:s("Field Map","bit-integrations")}),e.jsx("button",{onClick:()=>F(t,c,d,x),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${s("Refresh Fields","bit-integrations")}'`},type:"button",children:"↻"})]}),e.jsx("br",{}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:s("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:s("SuiteDash Fields","bit-integrations")})})]}),t==null?void 0:t.field_map.map((i,a)=>e.jsx(E,{i:a,field:i,suiteDashConf:t,formFields:l,setSuiteDashConf:c,setSnackbar:x},`rp-m-${a+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>k(t.field_map.length,t,c),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:s("Actions","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(B,{suiteDashConf:t,setSuiteDashConf:c,formFields:l,loading:n,setLoading:r})]})]})}export{J as S};
