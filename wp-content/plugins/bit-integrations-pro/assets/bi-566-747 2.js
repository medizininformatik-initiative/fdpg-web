var C=Object.defineProperty;var W=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var G=(t,d,r)=>d in t?C(t,d,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[d]=r,k=(t,d)=>{for(var r in d||(d={}))ee.call(d,r)&&G(t,r,d[r]);if(W)for(var r of W(d))se.call(d,r)&&G(t,r,d[r]);return t};import{r as Z,j as e,L as U}from"./main.js";import{T as le,a as te,b as H,c as J}from"./bi-815-730.js";import{a7 as D,_ as i,d as K,h as ae,B as de,a9 as ie}from"./bi-490-178.js";import{b as Q,h as ne,a as z,d as oe}from"./bi-266-720.js";import{r as X,a as Y,b as me,d as ce}from"./bi-60-746.js";import{T as re}from"./bi-422-718.js";import{S as he}from"./bi-652-725.js";import{T as xe}from"./bi-528-726.js";function A({tab:t,formID:d,formFields:r,recruitConf:l,setRecruitConf:a,setSnackbar:s}){var g,T,O,_,M,$,f,u,F,n,S,E,L,q,I,V,P,B;const[h,m]=Z.useState(!1),[w,j]=Z.useState(!1),[b,v]=Z.useState(!1),c=(o,y)=>{const x=k({},l);t===0?(y==="approval"&&(o.target.checked?x.actions.approval=!0:delete x.actions.approval),y==="workflow"&&(o.target.checked?x.actions.workflow=!0:delete x.actions.workflow),y==="upsert"&&(o.target.checked?x.actions.upsert=!0:delete x.actions.upsert),y==="recordOwner"&&(o!==""?x.actions.recordOwner=o:delete x.actions.recordOwner)):(y==="approval"&&(o.target.checked?x.relatedlists[t-1].actions.approval=!0:delete x.relatedlists[t-1].actions.approval),y==="workflow"&&(o.target.checked?x.relatedlists[t-1].actions.workflow=!0:delete x.relatedlists[t-1].actions.workflow),y==="recordOwner"&&(o!==""?x.relatedlists[t-1].actions.recordOwner=o:delete x.relatedlists[t-1].actions.recordOwner)),a(k({},x))},p=()=>{l.default.noteTypes||X(d,l,a,v,s),j(!0)},N=(o,y)=>{const x=k({},l);x.actions.note||(x.actions.note={}),o==="field"?(x.actions.note.content||(x.actions.note.content=""),x.actions.note.content+=y):y?x.actions.note[o]=y:delete x.actions.note[o],a(k({},x))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flx flx-wrp",children:[((T=(g=l==null?void 0:l.relatedlists)==null?void 0:g[t-1])==null?void 0:T.module)!=="Notes"&&e.jsxs(e.Fragment,{children:[e.jsx(D,{onChange:o=>c(o,"workflow"),checked:t===0?"workflow"in l.actions:"workflow"in((_=(O=l.relatedlists)==null?void 0:O[t-1])==null?void 0:_.actions),className:"wdt-200 mt-4 mr-2",value:"Workflow",title:i("Workflow","bit-integrations"),subTitle:i("Trigger workflows in Zoho Recruit.","bit-integrations")}),e.jsx(D,{onChange:o=>c(o,"approval"),checked:t===0?"approval"in l.actions:"approval"in(($=(M=l.relatedlists)==null?void 0:M[t-1])==null?void 0:$.actions),className:"wdt-200 mt-4 mr-2",value:"Approval",title:i("Approval","bit-integrations"),subTitle:i("Send entries to approval list in Zoho Recruit","bit-integrations")}),t===0&&!["Calls","Events","Tasks"].includes(l.module)&&e.jsxs(e.Fragment,{children:[e.jsx(D,{onChange:o=>c(o,"upsert"),checked:"upsert"in l.actions,className:"wdt-200 mt-4 mr-2",value:"Upsert_Record",title:i("Upsert Record","bit-integrations"),subTitle:i("A record gets updated if the email already exists, else a new record will be created.","bit-integrations")}),e.jsx(D,{onChange:p,checked:"note"in l.actions&&"type"in((f=l.actions)==null?void 0:f.note),className:"wdt-200 mt-4 mr-2",value:"notes",title:i("Add a Note","bit-integrations"),subTitle:i("Add a note from bitform to pushed to Zoho Recruit.","bit-integrations")})]})]}),e.jsx(D,{onChange:()=>m(!0),checked:t===0?"recordOwner"in l.actions:"recordOwner"in((F=(u=l.relatedlists)==null?void 0:u[t-1])==null?void 0:F.actions),className:"wdt-200 mt-4 mr-2",value:"recordOwner",title:i("Record Owner","bit-integrations"),subTitle:i("Set owner of current record","bit-integrations")})]}),e.jsxs(K,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:"Ok",show:h,close:()=>m(!1),action:()=>m(!1),title:i("Record Owner","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2 mb-2"}),e.jsx("div",{className:"mt-2",children:i("Owner ID","bit-integrations")}),e.jsx("div",{className:"flx flx-between",children:e.jsx("input",{onChange:o=>c(o.target.value,"recordOwner"),className:"btcd-paper-inp mt-2",type:"number",min:"0",value:t===0?((n=l==null?void 0:l.actions)==null?void 0:n.recordOwner)||"":((L=(E=(S=l.relatedlists)==null?void 0:S[t-1])==null?void 0:E.actions)==null?void 0:L.recordOwner)||"",placeholder:i("Enter Owner ID","bit-integrations")})})]}),t===0&&e.jsxs(K,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:"Ok",show:w,close:()=>j(!1),action:()=>j(!1),title:i("Notes","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2 mb-2"}),b?e.jsx(U,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flx",children:[e.jsxs("select",{className:"btcd-paper-inp",onChange:o=>N("type",o.target.value),value:((I=(q=l.actions)==null?void 0:q.note)==null?void 0:I.type)||"",children:[e.jsx("option",{value:"",children:i("Select Note Type","bit-integrations")}),((V=l==null?void 0:l.default)==null?void 0:V.noteTypes)&&Object.values(l.default.noteTypes).map(o=>e.jsx("option",{value:`${o.noteTypeId}__${o.noteTypeName}`,children:o.noteTypeName},o.noteTypeId))]}),e.jsx("button",{onClick:()=>X(d,l,a,v,s),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Note Types"'},type:"button",disabled:b,children:"↻"})]}),e.jsx("div",{className:"mt-2 mb-1",children:i("Note Content","bit-integrations")}),e.jsxs("select",{className:"btcd-paper-inp w-5",onChange:o=>N("field",o.target.value),children:[e.jsx("option",{value:"",children:i("Field","bit-integrations")}),r.map(o=>o.type!=="file"&&e.jsx("option",{value:`\${${o.name}}`,children:o.label},`ff-zhcrm-${o.name}`))]}),e.jsx("textarea",{rows:"5",className:"btcd-paper-inp mt-2",onChange:o=>N("content",o.target.value),value:((B=(P=l.actions)==null?void 0:P.note)==null?void 0:B.content)||""})]})]})]})}function R({i:t,uploadFields:d,formFields:r,field:l,recruitConf:a,setRecruitConf:s,tab:h}){var v,c,p,N,g,T,O,_,M,$,f,u,F;const m=h===0?a.module:(c=(v=a.relatedlists)==null?void 0:v[h-1])==null?void 0:c.module,w=ae(de),{isPro:j}=w;let b;return d?b=l.zohoFormField===""||((g=(N=(p=a.default.moduleData)==null?void 0:p[m])==null?void 0:N.requiredFileUploadFields)==null?void 0:g.indexOf(l.zohoFormField))===-1:b=l.zohoFormField===""||((_=(O=(T=a.default.moduleData)==null?void 0:T[m])==null?void 0:O.required)==null?void 0:_.indexOf(l.zohoFormField))===-1,e.jsxs("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:l.formField||"",onChange:n=>Q(n,t,a,s,d,h),children:[e.jsx("option",{value:"",children:i("Select Field","bit-integrations")}),e.jsx("optgroup",{label:"Form Fields",children:d?r.map(n=>n.type==="file"&&e.jsx("option",{value:n.name,children:n.label},`ff-zhcrm-${n.name}`)):r.map(n=>n.type!=="file"&&e.jsx("option",{value:n.name,children:n.label},`ff-zhcrm-${n.name}`))}),!d&&e.jsx("option",{value:"custom",children:i("Custom...","bit-integrations")}),e.jsx("optgroup",{label:`General Smart Codes ${j?"":"(PRO)"}`,children:j&&((M=he)==null?void 0:M.map(n=>e.jsx("option",{value:n.name,children:n.label},`ff-rm-${n.name}`)))})]}),l.formField==="custom"&&e.jsx(xe,{onChange:n=>ne(n,t,a,s),label:i("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:l.customValue,placeholder:i("Custom Value","bit-integrations"),formFields:r}),e.jsxs("select",{className:"btcd-paper-inp",disabled:!b,name:"zohoFormField",value:l.zohoFormField||"",onChange:n=>Q(n,t,a,s,d,h),children:[e.jsx("option",{value:"",children:i("Select Field","bit-integrations")}),d?((f=($=a.default.moduleData)==null?void 0:$[m])==null?void 0:f.fileUploadFields)&&Object.keys(a.default.moduleData[m].fileUploadFields).map(n=>b?a.default.moduleData[m].fileUploadFields[n].required==="false"&&e.jsx("option",{value:n,children:a.default.moduleData[m].fileUploadFields[n].display_label},n):e.jsx("option",{value:n,children:a.default.moduleData[m].fileUploadFields[n].display_label},n)):((F=(u=a.default.moduleData)==null?void 0:u[m])==null?void 0:F.fields)&&Object.keys(a.default.moduleData[m].fields).map(n=>b?a.default.moduleData[m].fields[n].required==="false"&&e.jsx("option",{value:n,children:a.default.moduleData[m].fields[n].display_label},n):e.jsx("option",{value:n,children:a.default.moduleData[m].fields[n].display_label},n))]})]}),e.jsx("button",{onClick:()=>z(t,a,s,d,h),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),b&&e.jsx("button",{onClick:()=>oe(t,a,s,d,h),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx(re,{})})]})}function pe({tab:t,settab:d,formID:r,formFields:l,recruitConf:a,setRecruitConf:s,isLoading:h,setSnackbar:m}){var w,j,b,v,c,p;return Z.useEffect(()=>{Y(0,d)},[]),e.jsxs(e.Fragment,{children:[h&&e.jsx(U,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),((b=(j=(w=a.default)==null?void 0:w.moduleData)==null?void 0:j[a.module])==null?void 0:b.fields)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:i("Map Fields","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:i("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:i("Zoho Fields","bit-integrations")})})]}),a.field_map.map((N,g)=>e.jsx(R,{i:g,field:N,recruitConf:a,formFields:l,setRecruitConf:s,tab:t,setSnackbar:m},`recruit-m-${g+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>z(a.field_map.length,a,s,!1,t),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{}),Object.keys((p=(c=(v=a.default)==null?void 0:v.moduleData)==null?void 0:c[a.module])==null?void 0:p.fileUploadFields).length!==0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:i("Map Attachments","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:i("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:i("Zoho Fields","bit-integrations")})})]}),a.upload_field_map.map((N,g)=>e.jsx(R,{uploadFields:1,i:g,field:N,recruitConf:a,formFields:l,setRecruitConf:s,tab:t,setSnackbar:m},`crm-m-${g+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>z(a.upload_field_map.length,a,s,!0,t),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{})]}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:i("Actions","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(A,{tab:t,formID:r,formFields:l,recruitConf:a,setRecruitConf:s,setSnackbar:m})]})]})}function be({indx:t,tab:d,settab:r,formID:l,formFields:a,recruitConf:s,setRecruitConf:h,handleInput:m,isLoading:w,setIsLoading:j,setSnackbar:b}){var v,c,p,N,g,T,O,_,M,$,f;return Z.useEffect(()=>{Y(t+1,r,s,h,l,j,b)},[]),e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-100 d-in-b",children:"Related List:"}),e.jsxs("select",{onChange:m,name:"module",value:(c=(v=s==null?void 0:s.relatedlists)==null?void 0:v[d-1])==null?void 0:c.module,className:"btcd-paper-inp w-7",disabled:!s.module,children:[e.jsx("option",{value:"",children:i("Select Related Module","bit-integrations")}),((p=s==null?void 0:s.default.relatedlists)==null?void 0:p[s.module])&&Object.values(s.default.relatedlists[s.module]).map(u=>e.jsx("option",{value:u.aMod,children:u.pl},u.aMod))]}),e.jsx("button",{onClick:()=>me(l,s,h,j,b),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Recruit Related Lists"'},type:"button",disabled:w,children:"↻"}),e.jsx("br",{}),e.jsx("br",{}),w&&e.jsx(U,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),((_=(O=(N=s.default)==null?void 0:N.moduleData)==null?void 0:O[(T=(g=s.relatedlists)==null?void 0:g[d-1])==null?void 0:T.module])==null?void 0:_.fields)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:i("Map Fields","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:i("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:i("Zoho Fields","bit-integrations")})})]}),s.relatedlists[d-1].field_map.map((u,F)=>e.jsx(R,{i:F,field:u,recruitConf:s,formFields:a,setRecruitConf:h,tab:d},`crm-m-${F+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>z(s.relatedlists[d-1].field_map.length,s,h,!1,d),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{}),Object.keys((f=($=(M=s.default)==null?void 0:M.moduleData)==null?void 0:$[s.relatedlists[d-1].module])==null?void 0:f.fileUploadFields).length!==0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:i("Map Attachments","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:i("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:i("Zoho Fields","bit-integrations")})})]}),s.relatedlists[d-1].upload_field_map.map((u,F)=>e.jsx(R,{uploadFields:1,i:F,field:u,recruitConf:s,formFields:a,setRecruitConf:h,tab:d},`crm-m-${F+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>z(s.relatedlists[d-1].upload_field_map.length,s,h,!0,d),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{})]}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:i("Actions","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(A,{recruitConf:s,setRecruitConf:h,tab:d})]})]})}function Te({tab:t,settab:d,formID:r,formFields:l,handleInput:a,recruitConf:s,setRecruitConf:h,isLoading:m,setIsLoading:w,setSnackbar:j}){const b=()=>{const c=k({},s);c.relatedlists.length<3&&c.relatedlists.push({actions:{},field_map:[{formField:"",zohoFormField:""}],module:"",upload_field_map:[{formField:"",zohoFormField:""}]}),h(k({},c))},v=c=>{const p=k({},s);p.relatedlists.splice(c,1),p.relatedlists.length||d(0),h(k({},p))};return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:"Module:"}),e.jsxs("select",{onChange:a,name:"module",value:s.module,className:"btcd-paper-inp w-5",disabled:t===1,children:[e.jsx("option",{value:"",children:i("Select Module","bit-integrations")}),s.default&&s.default.modules&&Object.keys(s.default.modules).map(c=>e.jsx("option",{value:c,children:s.default.modules[c].pl},c))]}),t===0&&e.jsx("button",{onClick:()=>ce(r,s,h,w,j),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Recruit Modules"'},type:"button",disabled:m,children:"↻"}),e.jsx("br",{}),e.jsxs(le,{selectedTabClassName:"s-t-l-active",children:[e.jsxs(te,{className:"flx mt-2 mb-0",children:[e.jsx(H,{className:"btcd-s-tab-link",children:i("New Record","bit-integrations")}),(s==null?void 0:s.relatedlists)&&s.relatedlists.map((c,p)=>e.jsxs(e.Fragment,{children:[e.jsxs(H,{className:"btcd-s-tab-link",children:[i("Related List #","bit-integrations"),p+1]},`rel-${p+64}`),e.jsx("button",{onClick:()=>v(p),className:"icn-btn","aria-label":"delete-relatedlist",type:"button",children:e.jsx(ie,{size:"14"})})]})),s.relatedlists.length<3&&e.jsx("button",{onClick:b,className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Add More Related List"'},type:"button",children:"+"})]}),e.jsx("div",{className:"btcd-hr"}),e.jsx(J,{children:e.jsx(pe,{tab:t,settab:d,formID:r,formFields:l,recruitConf:s,setRecruitConf:h,isLoading:m,setSnackbar:j})}),(s==null?void 0:s.relatedlists)&&s.relatedlists.map((c,p)=>e.jsx(J,{children:e.jsx(be,{indx:p,tab:t,settab:d,formID:r,formFields:l,recruitConf:s,setRecruitConf:h,handleInput:a,isLoading:m,setIsLoading:w,setSnackbar:j})},`rlt-${p+89}`))]})]})}export{Te as Z};
