var b=Object.defineProperty;var F=Object.getOwnPropertySymbols;var g=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;var k=(e,s,t)=>s in e?b(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,f=(e,s)=>{for(var t in s||(s={}))g.call(s,t)&&k(e,t,s[t]);if(F)for(var t of F(s))p.call(s,t)&&k(e,t,s[t]);return e};import{_ as u,b as o,a as h}from"./bi-490-178.js";const A=(e,s,t,i,r,a)=>{var n,_;let l=f({},s);const{name:d}=e.target;switch(e.target.value!==""?l[d]=e.target.value:delete l[d],l[e.target.name]=e.target.value,e.target.name){case"listId":l.listId&&!((_=(n=l.default)==null?void 0:n.allFields)!=null&&_[l.listId])&&(l=y(a,l,t,i));break}t(f({},l))},y=(e,s,t,i,r)=>{const{listId:a}=s;if(!a)return;i(!0);const l={auth_token:s.auth_token,list_id:a};o(l,"acumbamail_refresh_fields").then(d=>{var n,_;if(d&&d.success){const c=f({},s);if(d.data){(n=c.default)!=null&&n.allFields||(c.default.allFields={}),(_=c.default.allFields)!=null&&_[a]||(c.default.allFields[a]={}),c.default.allFields[a].fields=d.data,c.default.allFields[a].required=["email"],t(f({},c)),i(!1),h.success(u("All list field fetched successfully","bit-integrations"));return}i(!1),h.error(u("Failed to fetch list fields","bit-integrations"))}}).catch(()=>i(!1))},z=(e,s,t,i)=>{t(!0);const r={auth_token:e.auth_token};o(r,"acumbamail_fetch_all_list").then(a=>{if(a&&a.success){const l=f({},e);l.default||(l.default={}),a.data&&(l.default.allLists=a.data),s(f({},l)),t(!1),h.success(u("Lists fetched successfully","bit-integrations"));return}t(!1),h.error(u("Lists fetch failed. please try again","bit-integrations"))}).catch(()=>t(!1))},S=(e,s,t,i,r,a)=>{if(!e.auth_token){t({auth_token:e.auth_token?"":u("Api Key can't be empty","bit-integrations")});return}t({}),r(!0);const l={auth_token:e.auth_token};o(l,"acumbamail_authorization_and_fetch_subscriber_list").then(d=>{if(d&&d.success){const n=f({},e);s(n),i(!0),r(!1),h.success(u("Authorized successfully","bit-integrations"));return}r(!1),h.error(u("Authorized failed","bit-integrations"))})},v=e=>!((e!=null&&e.field_map?e.field_map.filter(t=>{var i,r,a;return!t.formField&&t.acumbamailFormField&&((a=(r=(i=e==null?void 0:e.default)==null?void 0:i.allFields)==null?void 0:r[e.listId])==null?void 0:a.required.indexOf(t.acumbamailFormField))!==-1}):[]).length>0);export{S as a,v as c,z as f,A as h,y as r};
