var I=Object.defineProperty;var j=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var A=(i,s,a)=>s in i?I(i,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[s]=a,l=(i,s)=>{for(var a in s||(s={}))E.call(s,a)&&A(i,a,s[a]);if(j)for(var a of j(s))K.call(s,a)&&A(i,a,s[a]);return i};import{r as g,j as e}from"./main.js";import{_ as t,E as k,ad as P,b as T,ag as u}from"./bi-490-178.js";import{B}from"./bi-475-763.js";import{r as F}from"./bi-497-916.js";function Y({campaignMonitorConf:i,setCampaignMonitorConf:s,step:a,setstep:_,setSnackbar:f,isInfo:c,isLoading:o,setIsLoading:p}){const[d,N]=g.useState(!1),[m,x]=g.useState({name:"",api_key:""}),[v,z]=g.useState(!1),w=()=>{const n=l({},i);if(!n.name||!n.client_id||!n.api_key){x({name:n.name?"":t("Integration name cann't be empty","bit-integrations"),client_id:n.client_id?"":t("Client Id cann't be empty","bit-integrations"),api_key:n.api_key?"":t("Access Api Key cann't be empty","bit-integrations")});return}p("auth");const h={api_key:n.api_key,client_id:n.client_id};T(h,"campaign_monitor_authorize").then(r=>{if(r&&r.success){const y=l({},i);y.tokenDetails=r.data,s(y),N(!0),u.success(t("Authorized Successfully","bit-integrations"))}else r&&r.data||!r.success&&typeof r.data.Message=="string"?u.error(`${t("Authorization failed Cause:","bit-integrations")}${r.data.Message}. ${t("please try again","bit-integrations")}`):u.error(t("Authorization failed. please try again","bit-integrations"));z(!0),p(!1)})},b=n=>{const h=l({},i),r=l({},m);r[n.target.name]="",h[n.target.name]=n.target.value,x(r),s(h)},C=()=>{setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),F(i,s,p,f),_(2)},S=`
            <h4>Get Client Id & Api key</h4>
            <ul>
                <li>First go to your CampaignMonitor dashboard.</li>
                <li>Click on Your "Profile Image" at the top right</li>
                <li>Click on the "Account Settings"</li>
                <li>Then Click "API keys"</li>
            </ul>`;return e.jsxs("div",{className:"btcd-stp-page",style:{width:a===1&&900,height:a===1&&"auto"},children:[e.jsx("div",{className:"mt-3 wdt-200",children:e.jsx("b",{children:t("Integration Name:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:b,name:"name",value:i.name,type:"text",placeholder:t("Integration Name...","bit-integrations"),disabled:c}),e.jsx("div",{style:{color:"red",fontSize:"15px"},children:m.name}),e.jsx("div",{className:"mt-3 wdt-250",children:e.jsx("b",{children:t("Client Id:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:b,name:"client_id",value:i.client_id,type:"text",placeholder:t("Client Id...","bit-integrations"),disabled:c}),e.jsx("div",{style:{color:"red",fontSize:"15px"},children:m.client_id}),e.jsx("div",{className:"mt-3 wdt-250",children:e.jsx("b",{children:t("Access Api Key:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:b,name:"api_key",value:i.api_key,type:"text",placeholder:t("Access Api Key...","bit-integrations"),disabled:c}),e.jsx("div",{style:{color:"red",fontSize:"15px"},children:m.api_key}),e.jsxs("small",{className:"d-blk mt-3",children:[t("To Get Client Id & Api Key, Please Visit","bit-integrations")," ",e.jsx("a",{className:"btcd-link",href:"https://bitcode2.createsend.com/account/apikeys",target:"_blank",rel:"noreferrer",children:t("Campaign Monitor API Key","bit-integrations")})]}),e.jsx("br",{}),e.jsx("br",{}),o==="auth"&&e.jsxs("div",{className:"flx mt-5",children:[e.jsx(k,{size:25,clr:"#022217",className:"mr-2"}),"Checking Api Key!!!"]}),v&&!d&&!o&&e.jsxs("div",{className:"flx mt-5",style:{color:"red"},children:[e.jsx("span",{className:"btcd-icn mr-2",style:{fontSize:30,marginTop:-5},children:"×"}),"Sorry, Api key is invalid"]}),!c&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:w,className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:d||o,children:[d?t("Authorized ✔","bit-integrations"):t("Authorize","bit-integrations"),o&&e.jsx(k,{size:20,clr:"#022217",className:"ml-2"})]}),e.jsx("br",{}),e.jsxs("button",{onClick:()=>C(),className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",disabled:!d,children:[t("Next","bit-integrations"),e.jsx(B,{className:"ml-1 rev-icn"})]})]}),e.jsx(P,{note:S})]})}export{Y as default};
