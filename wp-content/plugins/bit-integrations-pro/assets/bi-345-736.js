var xe=Object.defineProperty;var se=Object.getOwnPropertySymbols;var ge=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable;var ie=(t,r,u)=>r in t?xe(t,r,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[r]=u,k=(t,r)=>{for(var u in r||(r={}))ge.call(r,u)&&ie(t,u,r[u]);if(se)for(var u of se(r))je.call(r,u)&&ie(t,u,r[u]);return t};import{r as X,j as e,L as I}from"./main.js";import{T as be,a as le,P as ae}from"./bi-805-737.js";import{_ as a,a7 as $,d as C,a8 as ne,M as me,ac as de,h as we,B as ve,a9 as Ne}from"./bi-490-178.js";import{b as re,h as ye,a as D,d as _e}from"./bi-266-720.js";import{C as ee}from"./bi-579-738.js";import{T as Re}from"./bi-699-739.js";import{r as oe,a as Fe,b as ce,d as ue,e as he,f as Me,g as ke}from"./bi-186-735.js";import{S as Te}from"./bi-652-725.js";import{T as Oe}from"./bi-528-726.js";function pe({crmConf:t,setCrmConf:r,formFields:u,tab:l,formID:n,setSnackbar:i}){var U,f,Z,P,z,L,q,A,S,V,B,o,H,J,K,Q,y;const[j,R]=X.useState(!1),[p,h]=X.useState(!1),[b,N]=X.useState({show:!1,action:()=>{}}),F=typeof btcbi!="undefined"&&btcbi.isPro,x=(s,c)=>{var T,_;const d=k({},t);if(l===0){if(c==="attachment"&&(s!==""?d.actions.attachment=s:delete d.actions.attachment),c==="approval"&&(s.target.checked?d.actions.approval=!0:delete d.actions.approval),c==="workflow"&&(s.target.checked?d.actions.workflow=!0:delete d.actions.workflow),c==="blueprint"&&(s.target.checked?d.actions.blueprint=!0:delete d.actions.blueprint),c==="gclid"&&(s.target.checked?d.actions.gclid=!0:delete d.actions.gclid),c==="assignment_rules"&&(s!==""?d.actions.assignment_rules=s:delete d.actions.assignment_rules),c==="tag_rec"&&(s!==""?d.actions.tag_rec=s:delete d.actions.tag_rec),c==="rec_owner"&&(s!==""?d.actions.rec_owner=s:delete d.actions.rec_owner),c==="upsert")if(s.target.checked){const W=(T=d.default.layouts[d.module][d.layout].unique)==null?void 0:T.map((G,Y)=>({i:Y,name:G}));d.actions.upsert={overwrite:!0,crmField:W}}else delete d.actions.upsert}else if(c==="attachment"&&(s!==""?d.relatedlists[l-1].actions.attachment=s:delete d.relatedlists[l-1].actions.attachment),c==="approval"&&(s.target.checked?d.relatedlists[l-1].actions.approval=!0:delete d.relatedlists[l-1].actions.approval),c==="workflow"&&(s.target.checked?d.relatedlists[l-1].actions.workflow=!0:delete d.relatedlists[l-1].actions.workflow),c==="blueprint"&&(s.target.checked?d.relatedlists[l-1].actions.blueprint=!0:delete d.relatedlists[l-1].actions.blueprint),c==="gclid"&&(s.target.checked?d.relatedlists[l-1].actions.gclid=!0:delete d.relatedlists[l-1].actions.gclid),c==="assignment_rules"&&(s!==""?d.relatedlists[l-1].actions.assignment_rules=s:delete d.relatedlists[l-1].actions.assignment_rules),c==="tag_rec"&&(s!==""?d.relatedlists[l-1].actions.tag_rec=s:delete d.relatedlists[l-1].actions.tag_rec),c==="rec_owner"&&(s!==""?d.relatedlists[l-1].actions.rec_owner=s:delete d.relatedlists[l-1].actions.rec_owner),c==="upsert")if(s.target.checked){const W=(_=d.default.layouts[d.relatedlists[l-1].module][d.relatedlists[l-1].layout].unique)==null?void 0:_.map((G,Y)=>({i:Y,name:G}));d.relatedlists[l-1].actions.upsert={overwrite:!0,crmField:W}}else delete d.relatedlists[l-1].actions.upsert;r(k({},d))},g=()=>{N({show:!1})},m=l===0?t.module:t.relatedlists[l-1].module,O=()=>{var c,d;const s=[{title:"Zoho CRM Tags",type:"group",childs:[]},{title:"Form Fields",type:"group",childs:[]}];return(c=t.default.tags)!=null&&c[m]&&(s[0].childs=Object.values((d=t.default.tags)==null?void 0:d[m]).map(T=>({label:T,value:T}))),s[1].childs=u.map(T=>({label:T.label,value:`\${${T.name}}`})),s},w=(s,c)=>{const d=k({},t);l===0?(c==="list"&&(d.actions.upsert.crmField=s),c==="overwrite"&&(d.actions.upsert.overwrite=s)):(c==="list"&&(d.relatedlists[l-1].actions.upsert.crmField=s),c==="overwrite"&&(d.relatedlists[l-1].actions.upsert.overwrite=s)),r(k({},d))},v=()=>{var s;(s=t.default)!=null&&s.crmOwner||ce(n,t,r,h,i),N({show:"rec_owner"})},M=()=>{var s,c;(c=(s=t==null?void 0:t.default)==null?void 0:s.assignmentRules)!=null&&c[m]||oe(l,t,r,h,i),N({show:"assignment_rules"})},E=()=>{var s,c,d,T;if(l&&!((s=t.relatedlists[l-1].actions.upsert)!=null&&s.crmField)){const _=k({},t),W=(c=_.default.layouts[_.relatedlists[l-1].module][_.relatedlists[l-1].layout].unique)==null?void 0:c.map((G,Y)=>({i:Y,name:G}));_.relatedlists[l-1].actions.upsert={overwrite:!0,crmField:W},r(_)}else if(!((d=t.actions.upsert)!=null&&d.crmField)){const _=k({},t),W=(T=_.default.layouts[_.module][_.layout].unique)==null?void 0:T.map((G,Y)=>({i:Y,name:G}));_.actions.upsert={overwrite:!0,crmField:W},r(k({},_))}R(!0)};return e.jsxs("div",{className:"pos-rel",children:[!F&&e.jsx("div",{className:"pro-blur flx w-10",style:{top:-25},children:e.jsxs("div",{className:"pro",children:[a("Available On","bit-integrations"),e.jsx("a",{href:"https://bitapps.pro/",target:"_blank",rel:"noreferrer",children:e.jsxs("span",{className:"txt-pro",children:[" ",a("Premium","bit-integrations")]})})]})}),e.jsxs("div",{className:"d-flx flx-wrp",children:[e.jsx($,{onChange:s=>x(s,"workflow"),checked:l===0?"workflow"in t.actions:"workflow"in t.relatedlists[l-1].actions,className:"wdt-200 mt-4 mr-2",value:"Workflow",title:a("Workflow","bit-integrations"),subTitle:a("Trigger CRM workflows","bit-integrations")}),e.jsx($,{onChange:()=>N({show:"attachment"}),checked:l===0?"attachment"in t.actions:"attachment"in t.relatedlists[l-1].actions,className:"wdt-200 mt-4 mr-2",value:"Attachment",title:a("Attachment","bit-integrations"),subTitle:a("Add attachments or signatures from Trigger to CRM.","bit-integrations")}),e.jsx($,{onChange:s=>x(s,"approval"),checked:l===0?"approval"in t.actions:"approval"in t.relatedlists[l-1].actions,className:"wdt-200 mt-4 mr-2",value:"Approval",title:a("Approval","bit-integrations"),subTitle:a("Send entries to CRM approval list.","bit-integrations")}),e.jsx($,{onChange:s=>x(s,"blueprint"),checked:l===0?"blueprint"in t.actions:"blueprint"in t.relatedlists[l-1].actions,className:"wdt-200 mt-4 mr-2",value:"Blueprint",title:a("Blueprint","bit-integrations"),subTitle:a("Trigger CRM Blueprint","bit-integrations")}),e.jsx($,{onChange:s=>x(s,"gclid"),checked:l===0?"gclid"in t.actions:"gclid"in t.relatedlists[l-1].actions,className:"wdt-200 mt-4 mr-2",value:"Capture_GCLID",title:a("Capture GCLID","bit-integrations"),subTitle:a("Sends the click details of AdWords Ads to Zoho CRM.","bit-integrations")}),e.jsx(Re,{action:E,children:e.jsx($,{onChange:s=>x(s,"upsert"),checked:l===0?"upsert"in t.actions:"upsert"in t.relatedlists[l-1].actions,className:"wdt-200 mt-4 mr-2",value:"Upsert_Record",title:a("Upsert Records","bit-integrations"),subTitle:a("The record is updated if it already exists else it is inserted as a new record.","bit-integrations")})}),e.jsx($,{onChange:M,checked:l===0?"assignment_rules"in t.actions:"assignment_rules"in t.relatedlists[l-1].actions,className:"wdt-200 mt-4 mr-2",value:"Assignment_Rule",title:a("Assignment Rules","bit-integrations"),subTitle:a("Trigger Assignment Rules in Zoho CRM.","bit-integrations")}),e.jsx($,{onChange:()=>N({show:"tag_rec"}),checked:l===0?"tag_rec"in t.actions:"tag_rec"in t.relatedlists[l-1].actions,className:"wdt-200 mt-4 mr-2",value:"Tag_Records",title:a("Tag Records","bit-integrations"),subTitle:a("Add a tag to records pushed to Zoho CRM.","bit-integrations")}),e.jsx($,{onChange:v,checked:l===0?"rec_owner"in t.actions:"rec_owner"in t.relatedlists[l-1].actions,className:"wdt-200 mt-4 mr-2",value:"Record_Owner",title:a("Record Owner","bit-integrations"),subTitle:a("Add a owner to records pushed to Zoho CRM.","bit-integrations")})]}),e.jsxs(C,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:a("Ok","bit-integrations"),show:b.show==="attachment",close:g,action:g,title:a("Select Attachment","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2"}),e.jsx("div",{className:"mt-2",children:a("Select file upload fields","bit-integrations")}),e.jsx(ne,{defaultValue:l===0?t.actions.attachment:t.relatedlists[l-1].actions.attachment,className:"mt-2 w-9",onChange:s=>x(s,"attachment"),options:u.filter(s=>s.type==="file").map(s=>({label:s.label,value:s.name}))})]}),e.jsxs(C,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:a("Ok","bit-integrations"),show:b.show==="assignment_rules",close:g,action:g,title:a("Assignment Rules","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2"}),e.jsx("div",{className:"mt-2",children:a("Assignment Rules","bit-integrations")}),p?e.jsx(I,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):e.jsxs("div",{className:"flx flx-between mt-2",children:[e.jsxs("select",{value:l===0?t.actions.assignment_rules:t.relatedlists[l-1].actions.assignment_rules,className:"btcd-paper-inp",onChange:s=>x(s.target.value,"assignment_rules"),children:[e.jsx("option",{value:"",children:a("Select Assignment Rule","bit-integrations")}),((f=(U=t==null?void 0:t.default)==null?void 0:U.assignmentRules)==null?void 0:f[m])&&Object.keys(t.default.assignmentRules[m]).map(s=>e.jsx("option",{value:t.default.assignmentRules[m][s],children:s},s))]}),e.jsx("button",{onClick:()=>oe(l,t,r,h,i),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${a("Refresh CRM Assignment Rules","bit-integrations")}'`},type:"button",disabled:p,children:"â†»"})]})]}),e.jsxs(C,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:a("Ok","bit-integrations"),show:b.show==="tag_rec",close:g,action:g,title:a("Tag Records","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2 mb-2"}),e.jsx("small",{children:a("Add a tag to records pushed to Zoho CRM","bit-integrations")}),e.jsx("div",{className:"mt-2",children:a("Tag Name","bit-integrations")}),p?e.jsx(I,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):e.jsxs("div",{className:"flx flx-between mt-2",children:[e.jsx(ne,{className:"msl-wrp-options",defaultValue:l===0?t.actions.tag_rec:t.relatedlists[l-1].actions.tag_rec,options:O(),onChange:s=>x(s,"tag_rec"),customValue:!0}),e.jsx("button",{onClick:()=>Fe(l,n,t,r,h,i),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`${a("Refresh CRM Tags","bit-integrations")}'`},type:"button",disabled:p,children:"â†»"})]})]}),e.jsxs(C,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:a("Ok","bit-integrations"),show:b.show==="rec_owner",close:g,action:g,title:a("Record Owner","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2"}),e.jsx("div",{className:"mt-2",children:a("Owner Name","bit-integrations")}),p?e.jsx(I,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):e.jsxs("div",{className:"flx flx-between mt-2",children:[e.jsxs("select",{value:l===0?t.actions.rec_owner:t.relatedlists[l-1].actions.rec_owner,className:"btcd-paper-inp",onChange:s=>x(s.target.value,"rec_owner"),children:[e.jsx("option",{value:"",children:a("Select Owner","bit-integrations")}),((Z=t.default)==null?void 0:Z.crmOwner)&&((P=Object.values(t.default.crmOwner))==null?void 0:P.map(s=>e.jsx("option",{value:s.id,children:s.full_name},s.id)))]}),e.jsx("button",{onClick:()=>ce(n,t,r,h,i),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${a("Refresh CRM Owners","bit-integrations")}'`},type:"button",disabled:p,children:"â†»"})]})]}),e.jsx(me,{md:!0,show:j,setModal:R,title:a("Upsert Record","bit-integrations"),children:e.jsx("div",{className:"o-a",children:l===0?((z=t==null?void 0:t.actions)==null?void 0:z.upsert)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-w-m mt-2",children:a("Upsert Using","bit-integrations")}),e.jsx("small",{children:a("Arrange fields in order of preferance for upsertion","bit-integrations")}),e.jsx(de.ReactSortable,{list:(L=t.actions.upsert)==null?void 0:L.crmField,setList:s=>w(s,"list"),children:(A=(q=t.actions.upsert)==null?void 0:q.crmField)==null?void 0:A.map(s=>e.jsxs("div",{className:"upsert_rec w-7 mt-1 flx",children:[e.jsx("span",{className:"btcd-icn btcd-mnu mr-2"}),s.name]},`cf-${s.i}`))}),e.jsx("div",{className:"font-w-m mt-3",children:a("Upsert Preferance","bit-integrations")}),e.jsx("small",{children:a("Overwrite existing field values in Zoho CRM with empty field values from Zoho CRM For Triggers while upserting a record?","bit-integrations")}),e.jsxs("div",{children:[e.jsx(ee,{onChange:()=>w(!0,"overwrite"),radio:!0,checked:(S=t.actions.upsert)==null?void 0:S.overwrite,name:"up-rec",title:a("Yes","bit-integrations")}),e.jsx(ee,{onChange:()=>w(!1,"overwrite"),radio:!0,checked:!((V=t.actions.upsert)!=null&&V.overwrite),name:"up-rec",title:a("No","bit-integrations")})]})]}):((o=(B=t==null?void 0:t.relatedlists[l-1])==null?void 0:B.actions)==null?void 0:o.upsert)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-w-m mt-2",children:a("Upsert Using","bit-integrations")}),e.jsx("small",{children:a("Arrange fields in order of preferance for upsertion","bit-integrations")}),e.jsx(de.ReactSortable,{list:(H=t.relatedlists[l-1].actions.upsert)==null?void 0:H.crmField,setList:s=>w(s,"list"),children:(K=(J=t.relatedlists[l-1].actions.upsert)==null?void 0:J.crmField)==null?void 0:K.map(s=>e.jsxs("div",{className:"upsert_rec w-7 mt-1 flx",children:[e.jsx("span",{className:"btcd-icn btcd-mnu mr-2"}),s.name]},`cf-${s.i}`))}),e.jsx("div",{className:"font-w-m mt-3",children:a("Upsert Preferance","bit-integrations")}),e.jsx("small",{children:a("Overwrite existing field values in Zoho CRM with empty field values from Zoho CRM For WPForms while upserting a record?","bit-integrations")}),e.jsxs("div",{children:[e.jsx(ee,{onChange:()=>w(!0,"overwrite"),radio:!0,checked:(Q=t.relatedlists[l-1].actions.upsert)==null?void 0:Q.overwrite,name:"up-rec",title:a("Yes","bit-integrations")}),e.jsx(ee,{onChange:()=>w(!1,"overwrite"),radio:!0,checked:!((y=t.relatedlists[l-1].actions.upsert)!=null&&y.overwrite),name:"up-rec",title:a("No","bit-integrations")})]})]})})})]})}function te({i:t,formFields:r,uploadFields:u,field:l,crmConf:n,setCrmConf:i,tab:j,type:R}){var x,g,m,O,w,v,M,E,U,f,Z,P,z,L,q,A,S,V,B;const p=j===0?n.module:(g=(x=n.relatedlists)==null?void 0:x[j-1])==null?void 0:g.module,h=j===0?n.layout:(O=(m=n.relatedlists)==null?void 0:m[j-1])==null?void 0:O.layout;let b;u?b=l.zohoFormField===""||((E=(M=(v=(w=n.default.layouts)==null?void 0:w[p])==null?void 0:v[h])==null?void 0:M.requiredFileUploadFields)==null?void 0:E.indexOf(l.zohoFormField))===-1:b=l.zohoFormField===""||((P=(Z=(f=(U=n.default.layouts)==null?void 0:U[p])==null?void 0:f[h])==null?void 0:Z.required)==null?void 0:P.indexOf(l.zohoFormField))===-1;const N=we(ve),{isPro:F}=N;return e.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:e.jsxs("div",{className:"pos-rel flx",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:l.formField||"",onChange:o=>re(o,t,n,i,u,j),children:[e.jsx("option",{value:"",children:a("Select Field","bit-integrations")}),e.jsx("optgroup",{label:"Form Fields",children:u?r.map(o=>o.type==="file"&&e.jsx("option",{value:o.name,children:o.label},`ff-zhcrm-${o.name}`)):r.map(o=>o.type!=="file"&&e.jsx("option",{value:o.name,children:o.label},`ff-zhcrm-${o.name}`))}),!u&&e.jsx("option",{value:"custom",children:a("Custom...","bit-integrations")}),e.jsx("optgroup",{label:`General Smart Codes ${F?"":"(PRO)"}`,children:F&&((z=Te)==null?void 0:z.map(o=>e.jsx("option",{value:o.name,children:o.label},`ff-zhcrm-${o.name}`)))})]}),l.formField==="custom"&&e.jsx(Oe,{onChange:o=>ye(o,t,n,i),label:a("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:l.customValue,placeholder:a("Custom Value","bit-integrations"),formFields:r}),e.jsxs("select",{className:"btcd-paper-inp",disabled:!b,name:"zohoFormField",value:l.zohoFormField||"",onChange:o=>re(o,t,n,i,u,j),children:[e.jsx("option",{value:"",children:a("Select Field","bit-integrations")}),u?((A=(q=(L=n.default.layouts)==null?void 0:L[p])==null?void 0:q[h])==null?void 0:A.fileUploadFields)&&Object.keys(n.default.layouts[p][h].fileUploadFields).filter(o=>o.required!==!0).map(o=>b?!n.default.layouts[p][h].fileUploadFields[o].required&&e.jsx("option",{value:o,children:n.default.layouts[p][h].fileUploadFields[o].display_label},o):e.jsx("option",{value:o,children:n.default.layouts[p][h].fileUploadFields[o].display_label},o)):((B=(V=(S=n.default.layouts)==null?void 0:S[p])==null?void 0:V[h])==null?void 0:B.fields)&&Object.keys(n.default.layouts[p][h].fields).filter(o=>o.required!==!0).map(o=>b?!n.default.layouts[p][h].fields[o].required&&e.jsx("option",{value:o,children:n.default.layouts[p][h].fields[o].display_label},o):e.jsx("option",{value:o,children:n.default.layouts[p][h].fields[o].display_label},o))]})]}),e.jsx("div",{className:"flx integ-fld-wrp",children:b&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>D(t,n,i,u,j),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>_e(t,n,i,u,j),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx("span",{className:"btcd-icn icn-trash-2"})})]})})]})})}function $e({tab:t,settab:r,formID:u,formFields:l,crmConf:n,setCrmConf:i,handleInput:j,isLoading:R,setIsLoading:p,setSnackbar:h}){var N,F,x,g,m,O,w;X.useEffect(()=>{ue(0,r)},[]);const b=typeof btcbi!="undefined"&&btcbi.isPro;return e.jsxs(e.Fragment,{children:[R&&e.jsx(I,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:a("Layout:","bit-integrations")}),e.jsxs("select",{onChange:j,name:"layout",value:n.layout,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:a("Select Layout","bit-integrations")}),((F=(N=n==null?void 0:n.default)==null?void 0:N.layouts)==null?void 0:F[n.module])&&Object.keys(n.default.layouts[n.module]).map(v=>e.jsx("option",{value:v,children:v},v))]}),e.jsx("button",{onClick:()=>he(t,u,n,i,p,h),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${a("Refresh CRM Layouts","bit-integrations")}'`},type:"button",disabled:R,children:"â†»"}),e.jsx("br",{}),e.jsx("br",{}),((O=(m=(g=(x=n.default)==null?void 0:x.layouts)==null?void 0:g[n.module])==null?void 0:m[n.layout])==null?void 0:O.fields)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:a("Field Map","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Zoho Fields","bit-integrations")})})]}),n.field_map.map((v,M)=>e.jsx(te,{i:M,field:v,crmConf:n,formFields:l,setCrmConf:i,tab:t,setSnackbar:h},`crm-m-${M+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>D(n.field_map.length,n,i,!1,t),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{}),Object.keys((w=n.default.layouts[n.module][n.layout])==null?void 0:w.fileUploadFields).length!==0&&e.jsxs("div",{className:"pos-rel",children:[!b&&e.jsx("div",{className:"pro-blur flx",children:e.jsxs("div",{className:"pro",children:["Available On",e.jsx("a",{href:"https://bitapps.pro/",target:"_blank",rel:"noreferrer",children:e.jsxs("span",{className:"txt-pro",children:[" ",a("Premium","bit-integrations")]})})]})}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:a("Map File Upload Fields","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Zoho Fields","bit-integrations")})})]}),n.upload_field_map.map((v,M)=>e.jsx(te,{i:M,uploadFields:!0,field:v,crmConf:n,formFields:l,setCrmConf:i,tab:t,setSnackbar:h},`crm-m-${M+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>D(n.upload_field_map.length,n,i,!0,t),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{})]}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:a("Actions","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(pe,{formID:u,formFields:l,crmConf:n,setCrmConf:i,tab:t,setSnackbar:h})]})]})}function Ue({indx:t,tab:r,settab:u,formID:l,formFields:n,crmConf:i,setCrmConf:j,handleInput:R,isLoading:p,setIsLoading:h,setSnackbar:b}){var F,x,g,m,O,w,v,M,E,U,f,Z,P,z,L,q,A,S,V,B,o,H,J,K,Q;X.useEffect(()=>{ue(t+1,u,l,i,j,h,b)},[]);const N=typeof btcbi!="undefined"&&btcbi.isPro;return e.jsxs(e.Fragment,{children:[p&&e.jsx(I,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"pos-rel",children:[!N&&e.jsx("div",{className:"pro-blur flx w-9",children:e.jsxs("div",{className:"pro",children:[a("Available On","bit-integrations"),e.jsx("a",{href:"https://bitapps.pro/",target:"_blank",rel:"noreferrer",children:e.jsxs("span",{className:"txt-pro",children:[" ",a("Premium","bit-integrations")]})})]})}),e.jsx("b",{className:"wdt-100 d-in-b",children:a("Related List:","bit-integrations")}),e.jsxs("select",{onChange:R,name:"module",value:(x=(F=i==null?void 0:i.relatedlists)==null?void 0:F[r-1])==null?void 0:x.module,className:"btcd-paper-inp w-7",disabled:!i.module,children:[e.jsx("option",{value:"",children:a("Select Related Module","bit-integrations")}),((m=(g=i==null?void 0:i.default)==null?void 0:g.relatedlists)==null?void 0:m[i.module])&&Object.values(i.default.relatedlists[i.module]).map(y=>e.jsx("option",{value:y.module,children:y.name},y.module))]}),e.jsx("button",{onClick:()=>Me(l,i,j,h,b),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${a("Refresh CRM Related Lists","bit-integrations")}'`},type:"button",disabled:p,children:"â†»"}),e.jsx("br",{}),e.jsx("br",{})]}),e.jsx("b",{className:"wdt-100 d-in-b",children:a("Layout:","bit-integrations")}),e.jsxs("select",{onChange:R,name:"layout",value:(w=(O=i==null?void 0:i.relatedlists)==null?void 0:O[r-1])==null?void 0:w.layout,className:"btcd-paper-inp w-7",disabled:!((M=(v=i==null?void 0:i.relatedlists)==null?void 0:v[r-1])!=null&&M.module),children:[e.jsx("option",{value:"",children:a("Select Layout","bit-integrations")}),((Z=(E=i==null?void 0:i.default)==null?void 0:E.layouts)==null?void 0:Z[(f=(U=i.relatedlists)==null?void 0:U[r-1])==null?void 0:f.module])&&Object.keys(i.default.layouts[i.relatedlists[r-1].module]).map(y=>e.jsx("option",{value:y,children:y},y))]}),e.jsx("button",{onClick:()=>he(r,l,i,j,h,b),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh CRM Layouts"'},type:"button",disabled:p,children:"â†»"}),e.jsx("br",{}),e.jsx("br",{}),((B=(V=(q=(P=i.default)==null?void 0:P.layouts)==null?void 0:q[(L=(z=i==null?void 0:i.relatedlists)==null?void 0:z[r-1])==null?void 0:L.module])==null?void 0:V[(S=(A=i==null?void 0:i.relatedlists)==null?void 0:A[r-1])==null?void 0:S.layout])==null?void 0:B.fields)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:a("Field Map","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Zoho Fields","bit-integrations")})})]}),(J=(H=(o=i.relatedlists)==null?void 0:o[r-1])==null?void 0:H.field_map)==null?void 0:J.map((y,s)=>e.jsx(te,{i:s,field:y,crmConf:i,formFields:n,setCrmConf:j,tab:r,setSnackbar:b},`crm-m-${s+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>D(i.relatedlists[r-1].field_map.length,i,j,!1,r),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{}),((Q=(K=i.default)==null?void 0:K.layouts[i.relatedlists[r-1].module])==null?void 0:Q[i.relatedlists[r-1].layout])&&Object.keys(i.default.layouts[i.relatedlists[r-1].module][i.relatedlists[r-1].layout].fileUploadFields).length!==0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:a("File Upload Field Map","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:a("Zoho Fields","bit-integrations")})})]}),i.relatedlists[r-1].upload_field_map.map((y,s)=>e.jsx(te,{i:s,uploadFields:1,field:y,crmConf:i,formFields:n,setCrmConf:j,tab:r,setSnackbar:b},`crm-m-${s+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>D(i.relatedlists[r-1].upload_field_map.length,i,j,!0,r),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{})]}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:a("Actions","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(pe,{formFields:n,crmConf:i,setCrmConf:j,tab:r,formID:l,setSnackbar:b})]})]})}function Ee({tab:t,settab:r,formID:u,formFields:l,handleInput:n,crmConf:i,setCrmConf:j,isLoading:R,setIsLoading:p,setSnackbar:h}){var F;const b=()=>{if(i.relatedlists.length<3){const x=k({},i);x.relatedlists.push({actions:{},field_map:[{formField:"",zohoFormField:""}],layout:"",module:"",upload_field_map:[{formField:"",zohoFormField:""}]}),j(k({},x))}},N=x=>{const g=k({},i);g.relatedlists.splice(x,1),g.relatedlists.length||r(0),j(k({},g))};return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:a("Module:","bit-integrations")}),e.jsxs("select",{onChange:n,name:"module",value:i.module,className:"btcd-paper-inp w-5",disabled:t,children:[e.jsx("option",{value:"",children:a("Select Module","bit-integrations")}),((F=i==null?void 0:i.default)==null?void 0:F.modules)&&Object.keys(i.default.modules).map(x=>e.jsx("option",{value:x,children:i.default.modules[x].plural_label},x))]}),t===0&&e.jsx("button",{onClick:()=>ke(u,i,j,p,h),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${a("Refresh CRM Modules","bit-integrations")}'`},type:"button",disabled:R,children:"â†»"}),e.jsx("br",{}),e.jsx("div",{children:e.jsxs(be,{children:[e.jsxs("div",{className:"flx mt-2",children:[e.jsx(le,{children:e.jsx("button",{className:`btcd-s-tab-link ${t===0&&"s-t-l-active"}`,type:"button",children:a("New Record","bit-integrations")})}),(i==null?void 0:i.relatedlists)&&i.relatedlists.map((x,g)=>e.jsxs(e.Fragment,{children:[e.jsx(le,{children:e.jsxs("button",{className:`btcd-s-tab-link ${t===g+1&&"s-t-l-active"}`,type:"button",children:[a("Related List #","bit-integrations"),g+1]})},`t-${g*3}`),e.jsx("button",{onClick:()=>N(g),className:"icn-btn","aria-label":"delete-relatedlist",type:"button",children:e.jsx(Ne,{size:"14"})})]})),i.relatedlists.length<3&&e.jsx("button",{onClick:b,className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${a("Add More Related List","bit-integrations")}'`},type:"button",children:"+"})]}),e.jsx("div",{className:"btcd-hr"}),e.jsx(ae,{children:e.jsx($e,{tab:t,settab:r,formID:u,formFields:l,crmConf:i,setCrmConf:j,handleInput:n,isLoading:R,setIsLoading:p,setSnackbar:h})}),(i==null?void 0:i.relatedlists)&&i.relatedlists.map((x,g)=>e.jsx(ae,{children:e.jsx(Ue,{indx:g,tab:t,settab:r,formID:u,formFields:l,crmConf:i,setCrmConf:j,handleInput:n,isLoading:R,setIsLoading:p,setSnackbar:h})},`p-${g+2.4}`))]})}),e.jsx("br",{})]})}export{Ee as Z};
