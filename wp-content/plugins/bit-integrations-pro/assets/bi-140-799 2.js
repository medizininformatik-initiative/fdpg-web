var _=Object.defineProperty;var x=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var b=(e,s,i)=>s in e?_(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i,d=(e,s)=>{for(var i in s||(s={}))F.call(s,i)&&b(e,i,s[i]);if(x)for(var i of x(s))N.call(s,i)&&b(e,i,s[i]);return e};import{j as l,L as v}from"./main.js";import{h as w,B as y,_ as m}from"./bi-490-178.js";import{S}from"./bi-652-725.js";import{g as I}from"./bi-546-798.js";import{T as V}from"./bi-528-726.js";import{h as $}from"./bi-266-720.js";const W=e=>{const s={},a=window.location.href.replace(`${window.opener.location.href}/redirect`,"").split("&");a&&a.forEach(n=>{const t=n.split("=");t[1]&&(s[t[0]]=t[1])}),localStorage.setItem(`__${e}`,JSON.stringify(s)),window.close()},f=(e,s,i,a,n)=>{const t=d({},s);n?a?t.relatedlists[n-1].upload_field_map.splice(e,0,{}):t.relatedlists[n-1].field_map.splice(e,0,{}):a?t.upload_field_map.splice(e,0,{}):t.field_map.splice(e,0,{}),i(d({},t))},L=(e,s,i,a,n)=>{const t=d({},s);n?a?t.relatedlists[n-1].upload_field_map.length>1&&t.relatedlists[n-1].upload_field_map.splice(e,1):t.relatedlists[n-1].field_map.length>1&&t.relatedlists[n-1].field_map.splice(e,1):a?t.upload_field_map.length>1&&t.upload_field_map.splice(e,1):t.field_map.length>1&&t.field_map.splice(e,1),i(d({},t))},j=(e,s,i,a,n,t)=>{const c=d({},i);t?n?c.relatedlists[t-1].upload_field_map[s][e.target.name]=e.target.value:c.relatedlists[t-1].field_map[s][e.target.name]=e.target.value:n?c.upload_field_map[s][e.target.name]=e.target.value:c.field_map[s][e.target.name]=e.target.value,e.target.value==="custom"&&(t?c.relatedlists[t-1].field_map[s].customValue="":c.field_map[s].customValue=""),a(d({},c))};function M({i:e,formFields:s,field:i,keapConf:a,setKeapConf:n}){var p,o;if(((p=a==null?void 0:a.field_map)==null?void 0:p.length)===1&&i.keapField===""){const r=d({},a),h=I(r);r.field_map=h,n(r)}const t=(a==null?void 0:a.contactFields.filter(r=>r.required===!0))||[],c=(a==null?void 0:a.contactFields.filter(r=>r.required===!1))||[],g=w(y),{isPro:u}=g;return l.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:l.jsxs("div",{className:"pos-rel flx",children:[l.jsxs("div",{className:"flx integ-fld-wrp",children:[l.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:i.formField||"",onChange:r=>j(r,e,a,n),children:[l.jsx("option",{value:"",children:m("Select Field","bit-integrations")}),l.jsx("optgroup",{label:"Form Fields",children:s==null?void 0:s.map(r=>l.jsx("option",{value:r.name,children:r.label},`ff-rm-${r.name}`))}),l.jsx("option",{value:"custom",children:m("Custom...","bit-integrations")}),l.jsx("optgroup",{label:`General Smart Codes ${u?"":"(PRO)"}`,children:u&&((o=S)==null?void 0:o.map(r=>l.jsx("option",{value:r.name,children:r.label},`ff-rm-${r.name}`)))})]}),i.formField==="custom"&&l.jsx(V,{onChange:r=>$(r,e,a,n),label:m("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:i.customValue,placeholder:m("Custom Value","bit-integrations"),formFields:s}),l.jsxs("select",{className:"btcd-paper-inp",disabled:e<t.length,name:"keapField",value:e<t.length?t[e].key||"":i.keapField||"",onChange:r=>j(r,e,a,n),children:[l.jsx("option",{value:"",children:m("Select Field","bit-integrations")}),e<t.length?l.jsx("option",{value:t[e].key,children:t[e].label},t[e].key):c.map(({key:r,label:h})=>l.jsx("option",{value:r,children:h},r))]})]}),e>=t.length&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>f(e,a,n),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),l.jsx("button",{onClick:()=>L(e,a,n),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:l.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function B({formID:e,formFields:s,handleInput:i,keapConf:a,setKeapConf:n,isLoading:t,setIsLoading:c,setSnackbar:g,a:u}){return l.jsxs(l.Fragment,{children:[t&&l.jsx(v,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mt-4",children:l.jsx("b",{className:"wdt-100",children:m("Map Fields","bit-integrations")})}),l.jsx("div",{className:"btcd-hr mt-1"}),l.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[l.jsx("div",{className:"txt-dp",children:l.jsx("b",{children:m("Form Fields","bit-integrations")})}),l.jsx("div",{className:"txt-dp",children:l.jsx("b",{children:m("Keap Fields","bit-integrations")})})]}),a.field_map.map((p,o)=>l.jsx(M,{i:o,field:p,keapConf:a,formFields:s,setKeapConf:n},`keap-m-${o+9}`)),l.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:l.jsx("button",{onClick:()=>f(a.field_map.length,a,n),className:"icn-btn sh-sm",type:"button",children:"+"})}),l.jsx("br",{}),l.jsx("br",{}),l.jsx("br",{}),l.jsx("br",{})]})]})}export{B as K,W as s};
