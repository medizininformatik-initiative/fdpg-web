var K=Object.defineProperty,P=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var o=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var p=(e,s,t)=>s in e?K(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,f=(e,s)=>{for(var t in s||(s={}))b.call(s,t)&&p(e,t,s[t]);if(o)for(var t of o(s))q.call(s,t)&&p(e,t,s[t]);return e},d=(e,s)=>P(e,A(s));var y=(e,s,t)=>new Promise((r,a)=>{var u=c=>{try{l(t.next(c))}catch(m){a(m)}},i=c=>{try{l(t.throw(c))}catch(m){a(m)}},l=c=>c.done?r(c.value):Promise.resolve(c.value).then(u,i);l((t=t.apply(e,s)).next())});import{_ as n,b as F,a as h}from"./bi-490-178.js";import{e as v,s as z}from"./bi-266-720.js";const x=(e,s,t,r,a)=>{const u=f({},s),i=f({},r);i[e.target.name]="",u[e.target.name]=e.target.value,a(i),t(u)},I=(e,s,t,r,a)=>{if(!e.authKey){s({authKey:e.authKey?"":n("API key can't be empty")});return}s({}),a(d(f({},r),{auth:!0}));const u={authKey:e.authKey};F(u,"moosend_handle_authorize").then(i=>{if(i.data.Code===0){t(!0),a(d(f({},r),{auth:!1})),h.success(n("Authorized successfully"));return}a(d(f({},r),{auth:!1})),h.error(n("Authorized failed"))})},M=(e,s,t,r)=>y(void 0,null,function*(){r&&r(d(f({},t),{list:!0}));const a={authKey:e.authKey},u=yield F(a,"moosend_handle_authorize");if(u.success&&u.data.Code===0){const{MailingLists:i}=u.data.Context,l=f({},e);return i&&(l.default||(l.default={}),l.default.lists=i,s(l),r&&(r(d(f({},t),{list:!1})),h.success(n("List refresh successfully")))),!0}return r&&(r(d(f({},t),{list:!1})),h.success(n("List refresh failed"))),!1}),S=e=>{const s=e==null?void 0:e.moosendFields.filter(t=>t.required===!0);return s.length>0?s.map(t=>({formFields:"",moosendFormFields:t.key})):[{formFields:"",moosendFormFields:""}]},_=e=>!((e!=null&&e.field_map?e.field_map.filter(t=>!t.formFields||!t.moosendFormFields||!t.formFields==="custom"&&!t.customValue):[]).length>0),T=(e,s,t)=>{if(!e.listId&&e.method!=="0"&&h.error("Please select list"),!_(e)){h.error("Please map mandatory fields");return}e.field_map.length>0&&s(t),document.querySelector(".btcd-s-wrp").scrollTop=0},V=(e,s,t,r,a,u)=>{u(!0),v(e,s,t,r,a,"","",u).then(l=>{var c;l.success?(h.success((c=l.data)==null?void 0:c.msg),a.push(t)):h.error(l.data||l)})},j=(e,s,t,r,a,u)=>{if(!_(t)){h.error("Please map mandatory fields");return}z({flow:e,allIntegURL:s,conf:t,history:r,edit:a,setIsLoading:u})};export{S as a,I as b,V as c,M as g,x as h,T as n,j as s};
