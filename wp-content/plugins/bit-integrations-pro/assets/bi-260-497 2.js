var P=Object.defineProperty;var k=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var S=(a,t,s)=>t in a?P(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,y=(a,t)=>{for(var s in t||(t={}))q.call(t,s)&&S(a,s,t[s]);if(k)for(var s of k(t))w.call(t,s)&&S(a,s,t[s]);return a};import{r as o,j as r}from"./main.js";import{e as D,c as F,_ as L,a as i}from"./bi-490-178.js";import{S as T}from"./bi-224-925.js";import{e as E}from"./bi-266-720.js";import{I as M}from"./bi-811-721.js";import z from"./bi-898-380.js";import{h as A,c as j}from"./bi-292-902.js";import{C as H}from"./bi-624-903.js";import"./bi-369-724.js";import"./bi-422-718.js";import"./bi-652-725.js";function $({formFields:a,setFlow:t,flow:s,allIntegURL:m}){const u=D(),[v,f]=o.useState(!1),[h,g]=o.useState({}),[n,b]=o.useState(1),[C,p]=o.useState({show:!1}),N=[{key:"name",label:"Name",required:!0},{key:"description",label:"Description",required:!1},{key:"start_date",label:"Start Date",required:!1},{key:"due_date",label:"Due Date",required:!1}],[e,c]=o.useState({name:"Clickup",type:"Clickup",api_key:"",field_map:[{formField:"",clickupFormField:""}],actionName:"",taskFields:N,actions:{}}),_=()=>{f(!0),E(s,t,m,e,u,"","",f).then(d=>{var x;d.success?(i.success((x=d.data)==null?void 0:x.msg),u.push(m)):i.error(d.data||d)})},I=l=>{if(!j(e)){i.error("Please map mandatory fields");return}if(e.actionName==="task"){if(!e.selectedTeam){i.error("Please select a team");return}if(!e.selectedSpace){i.error("Please select a space");return}if(!e.selectedFolder){i.error("Please select a folder");return}if(!e.selectedList){i.error("Please select a list");return}}e.field_map.length>0&&b(l)};return document.querySelector(".btcd-s-wrp").scrollTop=0,r.jsxs("div",{children:[r.jsx(F,{snack:C,setSnackbar:p}),r.jsx("div",{className:"txt-center mt-2",children:r.jsx(T,{step:3,active:n})}),r.jsx(z,{clickupConf:e,setClickupConf:c,step:n,setStep:b,loading:h,setLoading:g,setSnackbar:p}),r.jsxs("div",{className:"btcd-stp-page",style:y({},n===2&&{width:900,height:"auto",overflow:"visible"}),children:[r.jsx(H,{formFields:a,handleInput:l=>A(l,e,c),clickupConf:e,setClickupConf:c,loading:h,setLoading:g,setSnackbar:p}),(e==null?void 0:e.actionName)&&r.jsxs("button",{onClick:()=>I(3),disabled:!j(e),className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[L("Next","bit-integrations")," ","Â ",r.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(e==null?void 0:e.actionName)&&r.jsx(M,{step:n,saveConfig:()=>_(),isLoading:v,dataConf:e,setDataConf:c,formFields:a})]})}export{$ as default};
