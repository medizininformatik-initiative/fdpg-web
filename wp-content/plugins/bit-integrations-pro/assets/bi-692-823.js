var _=Object.defineProperty;var g=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var v=(n,d,e)=>d in n?_(n,d,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[d]=e,h=(n,d)=>{for(var e in d||(d={}))w.call(d,e)&&v(n,e,d[e]);if(g)for(var e of g(d))y.call(d,e)&&v(n,e,d[e]);return n};import{j as l}from"./main.js";import{h as L,B as M,_ as s}from"./bi-490-178.js";import{g as S,a as A}from"./bi-269-822.js";import{S as $}from"./bi-652-725.js";import{T as V}from"./bi-528-726.js";import{h as k}from"./bi-266-720.js";const F=(n,d,e)=>{const a=h({},d);a.field_map.splice(n,0,{}),e(h({},a))},q=(n,d,e)=>{const a=h({},d);a.field_map.length>1&&a.field_map.splice(n,1),e(h({},a))},N=(n,d,e,a)=>{const b=h({},e);b.field_map[d][n.target.name]=n.target.value,n.target.value==="custom"&&(b.field_map[d].customValue=""),a(h({},b))};function I({i:n,formFields:d,field:e,restrictConf:a,setRestrictConf:b}){var p,u;if(((p=a==null?void 0:a.field_map)==null?void 0:p.length)===1&&e.restrictField===""){const m=h({},a),j=S(m);m.field_map=j,b(m)}const x=(a==null?void 0:a.actionName)==="level-member"?a==null?void 0:a.memberFields:(a==null?void 0:a.levelFields)||[],t=x.filter(m=>m.required===!0)||[],o=x.filter(m=>m.required===!1)||[],c=L(M),{isPro:i}=c;return l.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:l.jsxs("div",{className:"pos-rel flx",children:[l.jsxs("div",{className:"flx integ-fld-wrp",children:[l.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:e.formField||"",onChange:m=>N(m,n,a,b),children:[l.jsx("option",{value:"",children:s("Select Field","bit-integrations")}),l.jsx("optgroup",{label:"Form Fields",children:d==null?void 0:d.map(m=>l.jsx("option",{value:m.name,children:m.label},`ff-rm-${m.name}`))}),l.jsx("option",{value:"custom",children:s("Custom...","bit-integrations")}),l.jsx("optgroup",{label:`General Smart Codes ${i?"":"(PRO)"}`,children:i&&((u=$)==null?void 0:u.map(m=>l.jsx("option",{value:m.name,children:m.label},`ff-rm-${m.name}`)))})]}),e.formField==="custom"&&l.jsx(V,{onChange:m=>k(m,n,a,b),label:s("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:e.customValue,placeholder:s("Custom Value","bit-integrations"),formFields:d}),l.jsxs("select",{className:"btcd-paper-inp",disabled:n<t.length,name:"restrictField",value:n<t?t[n].label||"":e.restrictField||"",onChange:m=>N(m,n,a,b),children:[l.jsx("option",{value:"",children:s("Select Field","bit-integrations")}),n<t.length?l.jsx("option",{value:t[n].key,children:t[n].label},t[n].key):o.map(({key:m,label:j})=>l.jsx("option",{value:m,children:j},m))]})]}),n>=t.length&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>F(n,a,b),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),l.jsx("button",{onClick:()=>q(n,a,b),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:l.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function D({formFields:n,handleInput:d,restrictConf:e,setRestrictConf:a,isLoading:b,setIsLoading:x,setSnackbar:t}){var c;const o=i=>{const p=h({},e),{name:u,value:m}=i.target;i.target.value!==""?p[u]=i.target.value:delete p[u],a(p)};return l.jsxs(l.Fragment,{children:[l.jsx("br",{}),l.jsx("b",{className:"wdt-200 d-in-b",children:s("Action:","bit-integrations")}),l.jsxs("select",{onChange:o,name:"actionName",value:e==null?void 0:e.actionName,className:"btcd-paper-inp w-5",children:[l.jsx("option",{value:"",children:s("Select Action","bit-integrations")}),(e==null?void 0:e.actionLists)&&e.actionLists.map(({key:i,label:p})=>l.jsx("option",{value:i,children:p},i))]}),l.jsx("br",{}),l.jsx("br",{}),(e==null?void 0:e.actionName)&&l.jsxs(l.Fragment,{children:[l.jsx("b",{className:"wdt-200 d-in-b",children:s("Membership Level:","bit-integrations")}),l.jsxs("select",{onChange:d,name:"level_id",value:e.level_id,className:"btcd-paper-inp w-5",children:[l.jsx("option",{value:"",children:s("Select Level","bit-integrations")}),e.actionName==="remove-member-level"&&l.jsx("option",{value:"all",children:s("All memberships","bit-integrations")}),((c=e==null?void 0:e.default)==null?void 0:c.levellists)&&e.default.levellists.map(({id:i,name:p})=>l.jsx("option",{value:i,children:p},i))]}),l.jsx("button",{onClick:()=>A(e,a,x),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${s("Fetch All Level","bit-integrations")}'`},type:"button",disabled:b,children:"â†»"})]}),l.jsx("br",{}),e.actionName==="add-member-level"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mt-5",children:l.jsx("b",{className:"wdt-100",children:s("Field Map","bit-integrations")})}),l.jsx("div",{className:"btcd-hr mt-1"}),l.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[l.jsx("div",{className:"txt-dp",children:l.jsx("b",{children:s("Form Fields","bit-integrations")})}),l.jsx("div",{className:"txt-dp",children:l.jsx("b",{children:s("Restrict Content Fields","bit-integrations")})})]})]}),(e==null?void 0:e.level_id)&&e.actionName==="add-member-level"&&(e==null?void 0:e.field_map.map((i,p)=>l.jsx(I,{i:p,field:i,restrictConf:e,formFields:n,setRestrictConf:a,setSnackbar:t},`rp-m-${p+9}`))),(e==null?void 0:e.actionName)==="add-member-level"&&l.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:l.jsx("button",{onClick:()=>F(e.field_map.length,e,a),className:"icn-btn sh-sm",type:"button",children:"+"})}),l.jsx("br",{}),l.jsx("br",{})]})}export{D as R};
