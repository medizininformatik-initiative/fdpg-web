var y=Object.defineProperty;var g=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var b=(a,t,s)=>t in a?y(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,S=(a,t)=>{for(var s in t||(t={}))D.call(t,s)&&b(a,s,t[s]);if(g)for(var s of g(t))_.call(t,s)&&b(a,s,t[s]);return a};import{r as i,j as o}from"./main.js";import{e as k,f as w,c as I,_ as d}from"./bi-490-178.js";import{S as P}from"./bi-224-925.js";import{s as N}from"./bi-266-720.js";import{I as A}from"./bi-811-721.js";import L from"./bi-610-372.js";import{h as E,c as M,a as R}from"./bi-985-888.js";import{F as T}from"./bi-142-889.js";import"./bi-369-724.js";import"./bi-422-718.js";import"./bi-805-737.js";import"./bi-652-725.js";import"./bi-528-726.js";function $({formFields:a,setFlow:t,flow:s,allIntegURL:x}){const F=k(),{formID:u}=w(),[m,n]=i.useState(!1),[l,p]=i.useState(1),[j,r]=i.useState({show:!1}),[h,v]=i.useState(0),[e,c]=i.useState({name:"FreshSales",type:"FreshSales",api_key:"",bundle_alias:"",default:{modules:{Account:{required:!0,requiredFields:[]},Deal:{required:!0,requiredFields:[]},Contact:{required:!0,requiredFields:[]},Product:{requiredFields:[]}}},moduleData:{module:""},field_map:[{formField:"",freshSalesFormField:""}],relatedlists:[],actions:{}}),C=()=>{N({flow:s,setFlow:t,allIntegURL:x,conf:e,history:F,setIsLoading:n,setSnackbar:r})},q=f=>{if(!M(e)){r({show:!0,msg:d("Please map mandatory fields","bit-integrations")});return}if(!R(e)){["Deal","Contact"].includes(e.moduleData.module)&&r({show:!0,msg:d("Please select a account or a contact","bit-integrations")}),e.moduleData.module==="Contacts"&&r({show:!0,msg:d("Please select a account","bit-integrations")});return}e.moduleData.module&&e.field_map.length>0&&p(f)};return document.querySelector(".btcd-s-wrp").scrollTop=0,o.jsxs("div",{children:[o.jsx(I,{snack:j,setSnackbar:r}),o.jsx("div",{className:"txt-center mt-2",children:o.jsx(P,{step:3,active:l})}),o.jsx(L,{formID:u,freshSalesConf:e,setFreshSalesConf:c,step:l,setstep:p,isLoading:m,setIsLoading:n,setSnackbar:r}),o.jsxs("div",{className:"btcd-stp-page",style:S({},l===2&&{width:900,height:"auto",overflow:"visible"}),children:[o.jsx(T,{tab:h,settab:v,formID:u,formFields:a,handleInput:f=>E(f,h,e,c,u,n,r),freshSalesConf:e,setFreshSalesConf:c,isLoading:m,setIsLoading:n,setSnackbar:r}),o.jsxs("button",{onClick:()=>q(3),disabled:e.moduleData.module===""||e.field_map.length<1,className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[d("Next","bit-integrations")," ","Â ",o.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),o.jsx(A,{step:l,saveConfig:()=>C(),isLoading:m,dataConf:e,setDataConf:c,formFields:a})]})}export{$ as default};
