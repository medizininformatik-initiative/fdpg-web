var v=Object.defineProperty;var p=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var j=(s,n,t)=>n in s?v(s,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[n]=t,b=(s,n)=>{for(var t in n||(n={}))N.call(n,t)&&j(s,t,n[t]);if(p)for(var t of p(n))_.call(n,t)&&j(s,t,n[t]);return s};import{j as e}from"./main.js";import{h as y,B as w,_ as r}from"./bi-490-178.js";import{g as M,a as S}from"./bi-427-740.js";import{S as $}from"./bi-652-725.js";import{T as k}from"./bi-528-726.js";import{h as R}from"./bi-266-720.js";const F=(s,n,t)=>{const l=b({},n);l.field_map.splice(s,0,{}),t(b({},l))},V=(s,n,t)=>{const l=b({},n);l.field_map.length>1&&l.field_map.splice(s,1),t(b({},l))},g=(s,n,t,l)=>{const i=b({},t);i.field_map[n][s.target.name]=s.target.value,s.target.value==="custom"&&(i.field_map[n].customValue=""),l(b({},i))};function q({i:s,formFields:n,field:t,rapidmailConf:l,setRapidmailConf:i}){var d,x;if(((d=l==null?void 0:l.field_map)==null?void 0:d.length)===1&&t.rapidmailFormField===""){const c=b({},l),h=M(c);c.field_map=h,i(c)}const a=(l==null?void 0:l.recipientsFields.filter(c=>c.required===!0))||[],u=(l==null?void 0:l.recipientsFields.filter(c=>c.required===!1))||[],m=y(w),{isPro:o}=m;return e.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:e.jsxs("div",{className:"pos-rel flx",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:t.formField||"",onChange:c=>g(c,s,l,i),children:[e.jsx("option",{value:"",children:r("Select Field","bit-integrations")}),e.jsx("optgroup",{label:"Form Fields",children:n==null?void 0:n.map(c=>e.jsx("option",{value:c.name,children:c.label},`ff-rm-${c.name}`))}),e.jsx("option",{value:"custom",children:r("Custom...","bit-integrations")}),e.jsx("optgroup",{label:`General Smart Codes ${o?"":"(PRO)"}`,children:o&&((x=$)==null?void 0:x.map(c=>e.jsx("option",{value:c.name,children:c.label},`ff-rm-${c.name}`)))})]}),t.formField==="custom"&&e.jsx(k,{onChange:c=>R(c,s,l,i),label:r("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:t.customValue,placeholder:r("Custom Value","bit-integrations"),formFields:n}),e.jsxs("select",{className:"btcd-paper-inp",disabled:s<a.length,name:"rapidmailFormField",value:s<a?a[s].label||"":t.rapidmailFormField||"",onChange:c=>g(c,s,l,i),children:[e.jsx("option",{value:"",children:r("Select Field","bit-integrations")}),s<a.length?e.jsx("option",{value:a[s].key,children:a[s].label},a[s].key):u.map(({key:c,label:h})=>e.jsx("option",{value:c,children:h},c))]})]}),s>=a.length&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>F(s,l,i),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>V(s,l,i),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function L({formFields:s,handleInput:n,rapidmailConf:t,setRapidmailConf:l,isLoading:i,setIsLoading:a,setSnackbar:u}){var m;return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:r("Recipient:","bit-integrations")}),e.jsxs("select",{onChange:n,name:"recipient_id",value:t.recipient_id,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:r("Select Recipients","bit-integrations")}),((m=t==null?void 0:t.default)==null?void 0:m.recipientlists)&&t.default.recipientlists.map(({id:o,name:d})=>e.jsx("option",{value:o,children:d},o))]}),e.jsx("button",{onClick:()=>S(t,l,a),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${r("Fetch All Recipients","bit-integrations")}'`},type:"button",disabled:i,children:"â†»"}),e.jsx("br",{}),e.jsx("div",{className:"mt-5",children:e.jsx("b",{className:"wdt-100",children:r("Field Map","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:r("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:r("Rapidmail Fields","bit-integrations")})})]}),(t==null?void 0:t.recipient_id)&&(t==null?void 0:t.field_map.map((o,d)=>e.jsx(q,{i:d,field:o,rapidmailConf:t,formFields:s,setRapidmailConf:l,setSnackbar:u},`rp-m-${d+9}`))),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>F(t.field_map.length,t,l),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{})]})}export{L as R};
