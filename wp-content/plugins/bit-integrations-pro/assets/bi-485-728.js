var _=Object.defineProperty;var F=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var D=(t,a,l)=>a in t?_(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,r=(t,a)=>{for(var l in a||(a={}))k.call(a,l)&&D(t,l,a[l]);if(F)for(var l of F(a))w.call(a,l)&&D(t,l,a[l]);return t};import{b as n,_ as u,aa as z}from"./bi-490-178.js";const g=(t,a,l,s,d,f,e,o,i,m)=>{let c=r({},l);if(a===0){if(o){const p=r({},i);p[t.target.name]="",m(r({},p))}c[t.target.name]=t.target.value}else c.relatedlists[a-1][t.target.name]=t.target.value;switch(t.target.name){case"module":c=y(a,c,d,s,f,e);break}s(r({},c))},O=(t,a,l,s,d,f,e)=>{var o,i;t&&!((i=(o=l==null?void 0:l.default)==null?void 0:o.relatedlists)!=null&&i[l.module])&&R(d,l,s,f,e),a(t)},y=(t,a,l,s,d,f)=>{var i,m;const e=r({},a),o=t===0?e.module:e.relatedlists[t-1].module;return t===0?(e.actions={},e.field_map=[{formField:"",zohoFormField:""}],e.upload_field_map=[{formField:"",zohoFormField:""}],t&&(e.relatedlists[t-1]={})):(e.relatedlists[t-1].field_map=[{formField:"",zohoFormField:""}],e.relatedlists[t-1].upload_field_map=[{formField:"",zohoFormField:""}],e.relatedlists[t-1].actions={}),(m=(i=e.default)==null?void 0:i.moduleData)!=null&&m[o]?t===0?(e.field_map=h(t,e),Object.keys(e.default.moduleData[o].fileUploadFields).length>0&&(e.upload_field_map=h(t,e,!0))):(e.relatedlists[t-1].field_map=h(t,e),Object.keys(e.default.moduleData[o].fileUploadFields).length>0&&(e.relatedlists[t-1].upload_field_map=h(t,e,!0))):q(t,l,e,s,d,f),e},P=(t,a,l,s,d)=>{s(!0);const f={formID:t,id:a.id,dataCenter:a.dataCenter,clientId:a.clientId,clientSecret:a.clientSecret,tokenDetails:a.tokenDetails};n(f,"zbigin_refresh_modules").then(e=>{if(e&&e.success){const o=r({},a);o.default||(o.default={}),e.data.modules&&(o.default.modules=e.data.modules),e.data.tokenDetails&&(o.tokenDetails=e.data.tokenDetails),l(r({},o)),d({show:!0,msg:u("Modules refreshed","bit-integrations")})}else e&&e.data&&e.data.data||!e.success&&typeof e.data=="string"?d({show:!0,msg:z(u("Modules refresh failed Cause: %s. please try again","bit-integrations"),e.data.data||e.data)}):d({show:!0,msg:u("Modules refresh failed. please try again","bit-integrations")});s(!1)}).catch(()=>s(!1))},R=(t,a,l,s,d)=>{if(!a.module)return;s(!0);const f={formID:t,module:a.module,dataCenter:a.dataCenter,clientId:a.clientId,clientSecret:a.clientSecret,tokenDetails:a.tokenDetails};n(f,"zbigin_refresh_related_lists").then(e=>{var o;if(e&&e.success){const i=r({},a);e.data.related_modules&&(i.default.relatedlists||(i.default.relatedlists={}),i.default.relatedlists[i.module]=e.data.related_modules),e.data.tokenDetails&&(i.tokenDetails=e.data.tokenDetails),l(r({},i)),d({show:!0,msg:u("RelatedLists refreshed","bit-integrations")})}else(o=e==null?void 0:e.data)!=null&&o.data||!e.success&&typeof e.data=="string"?d({show:!0,msg:`${u("RelatedLists refresh failed Cause:","bit-integrations")}${e.data.data||e.data}. ${u("please try again","bit-integrations")}`}):d({show:!0,msg:u("RelatedLists refresh failed. please try again","bit-integrations")});s(!1)}).catch(()=>s(!1))},q=(t,a,l,s,d,f)=>{const e=t===0?l.module:l.relatedlists[t-1].module;if(!e)return;d(!0);const o={formID:a,module:e,dataCenter:l.dataCenter,clientId:l.clientId,clientSecret:l.clientSecret,tokenDetails:l.tokenDetails};n(o,"zbigin_refresh_fields").then(i=>{if(i&&i.success){const m=r({},l);i.data.fieldDetails&&(m.default.moduleData||(m.default.moduleData={}),m.default.moduleData[e]=i.data.fieldDetails,t===0?(m.field_map=h(t,m),Object.keys(m.default.moduleData[e].fileUploadFields).length>0&&(m.upload_field_map=h(t,m,!0))):(m.relatedlists[t-1].field_map=h(t,m),Object.keys(m.default.moduleData[e].fileUploadFields).length>0&&(m.relatedlists[t-1].upload_field_map=h(t,m,!0)))),i.data.tokenDetails&&(m.tokenDetails=i.data.tokenDetails),s(r({},m))}else f({show:!0,msg:u("Fields refresh failed. please try again","bit-integrations")});d(!1)}).catch(()=>d(!1))},j=(t,a,l,s,d,f)=>{const e=t===0?l.module:l.relatedlists[t-1].module;if(!e)return;d(!0);const o={formID:a,module:e,dataCenter:l.dataCenter,clientId:l.clientId,clientSecret:l.clientSecret,tokenDetails:l.tokenDetails};n(o,"zbigin_refresh_tags").then(i=>{if(i&&i.success){const m=r({},l);i.data.tags&&(m.default.moduleData||(m.default.moduleData={}),m.default.moduleData[e].tags=i.data.tags,f({show:!0,msg:u("Tags Refreshed","bit-integrations")})),i.data.tokenDetails&&(m.tokenDetails=i.data.tokenDetails),s(r({},m))}else f({show:!0,msg:u("Tags refresh failed. please try again","bit-integrations")});d(!1)}).catch(()=>d(!1))},S=(t,a,l,s,d)=>{s(!0);const f={formID:t,dataCenter:a.dataCenter,clientId:a.clientId,clientSecret:a.clientSecret,tokenDetails:a.tokenDetails};n(f,"zbigin_refresh_users").then(e=>{if(e&&e.success){const o=r({},a);e.data.users&&(o.default||(o.default={}),o.default.users=e.data.users,d({show:!0,msg:u("Users Refreshed","bit-integrations")})),e.data.tokenDetails&&(o.tokenDetails=e.data.tokenDetails),l(r({},o))}else d({show:!0,msg:u("Users refresh failed. please try again","bit-integrations")});s(!1)}).catch(()=>s(!1))},h=(t,a,l)=>{var d,f;const s=t===0?a.module:a.relatedlists[t-1].module;return l?a.default.moduleData[s].requiredFileUploadFields.length>0?(d=a.default.moduleData[s].requiredFileUploadFields)==null?void 0:d.map(e=>({formField:"",zohoFormField:e})):[{formField:"",zohoFormField:""}]:a.default.moduleData[s].required.length>0?(f=a.default.moduleData[s].required)==null?void 0:f.map(e=>({formField:"",zohoFormField:e})):[{formField:"",zohoFormField:""}]},$=t=>{const a=t!=null&&t.field_map?t.field_map.filter(s=>{var d,f,e;return!s.formField&&s.zohoFormField&&((e=(f=(d=t==null?void 0:t.default)==null?void 0:d.moduleData)==null?void 0:f[t.module])==null?void 0:e.required.indexOf(s.zohoFormField))!==-1}):[],l=t.relatedlists.map(s=>s.field_map.filter(d=>!d.formField&&d.zohoFormField));return!(a.length>0||l.find(s=>s.length))};export{j as a,O as b,$ as c,P as d,q as g,g as h,S as r};
