var I=Object.defineProperty;var j=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var v=(a,t,s)=>t in a?I(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,N=(a,t)=>{for(var s in t||(t={}))M.call(t,s)&&v(a,s,t[s]);if(j)for(var s of j(t))R.call(t,s)&&v(a,s,t[s]);return a};import{r as h,j as e}from"./main.js";import{_ as m,E as z,b as _,F,e as B,f as E,h as T,B as G,c as P}from"./bi-490-178.js";import{S as q}from"./bi-224-925.js";import{s as H}from"./bi-266-720.js";import{I as U}from"./bi-811-721.js";import{L as O,h as $,c as J}from"./bi-74-821.js";import{B as K}from"./bi-475-763.js";import"./bi-369-724.js";import"./bi-422-718.js";import"./bi-350-191.js";import"./bi-652-725.js";import"./bi-771-767.js";import"./bi-389-719.js";import"./bi-528-726.js";function Q({formID:a,learnDashConf:t,setLearnDashConf:s,step:d,setStep:x,isLoading:u,setIsLoading:b,setSnackbar:k}){const[i,y]=h.useState(!1),[l,p]=h.useState(!1),c=()=>{b("auth"),_({},"learnDash_authorize").then(r=>{r!=null&&r.success&&(y(!0),k({show:!0,msg:m("Connected with LearnDash Successfully","bit-integrations")})),b(!1),p(!0)})},f=r=>{const n=F(t);n[r.target.name]=r.target.value,s(n)};return e.jsxs("div",{className:"btcd-stp-page",style:{width:d===1&&900,height:d===1&&"auto"},children:[e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:m("Integration Name:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:f,name:"name",value:t.name,type:"text",placeholder:m("Integration Name...","bit-integrations")}),u==="auth"&&e.jsxs("div",{className:"flx mt-5",children:[e.jsx(z,{size:25,clr:"#022217",className:"mr-2"}),"Checking if LearnDash is active!!!"]}),l&&!i&&!u&&e.jsxs("div",{className:"flx mt-5",style:{color:"red"},children:[e.jsx("span",{className:"btcd-icn mr-2",style:{fontSize:30,marginTop:-5},children:"×"}),"LearnDash plugin must be activated to integrate with Bit Integrations."]}),!i&&e.jsx("button",{onClick:c,className:"btn btcd-btn-lg green sh-sm flx mt-5",type:"button",children:m("Connect","bit-integrations")}),i&&e.jsxs("button",{onClick:()=>x(2),className:"btn btcd-btn-lg green sh-sm flx mt-5",type:"button",disabled:!i,children:[m("Next","bit-integrations"),e.jsx(K,{className:"ml-1 rev-icn"})]})]})}function me({formFields:a,setFlow:t,flow:s,allIntegURL:d,isInfo:x,edit:u}){const b=B(),{formID:k}=E(),i=T(G),{siteURL:y}=i,[l,p]=h.useState(!1),[c,f]=h.useState(1),[r,n]=h.useState({show:!1}),S=[{key:"1",label:"Create Group"},{key:"2",label:"Add the user to a group pro"},{key:"3",label:"Enroll the user in a course"},{key:"4",label:"Make the user the leader of group"},{key:"5",label:"Mark a course complete for the user"},{key:"6",label:"Mark a lesson complete for the user"},{key:"7",label:"Mark a lesson not complete for the user pro"},{key:"8",label:"Mark a topic complete for the user"},{key:"9",label:"Mark a topic not complete for the user pro"},{key:"10",label:"Remove the Leader from a group and its children pro"},{key:"11",label:"Remove the user from a group pro"},{key:"12",label:"Remove the user from a group and its children pro"},{key:"13",label:"Reset the users attempts for a quiz pro "},{key:"14",label:"Reset the users progress in a course pro"},{key:"16",label:"Send an email to the users group leaders"},{key:"17",label:"Unenroll the user from a course pro"}],w=[{key:"1",label:"Do not add group leader role"},{key:"2",label:"Add the role to their exiting role"},{key:"3",label:"Replace their existing role(s) with the Group Leader role"}],A=[{key:"1",label:"Do nothing"},{key:"2",label:"Add the role to their exiting role"},{key:"3",label:"Replace their existing role(s) with the Group Leader role"}],D=[{key:"title",label:"Title",required:!0}],[o,g]=h.useState({name:"LearnDash",type:"LearnDash",mainAction:"",courseId:"",domainName:y,field_map:[{formField:"",learnDeshFormField:""}],allActions:S,groupUserRole:w,groupOfLeader4:A,createGroupFields:D,actions:{}}),L=()=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),o.mainAction==="1"&&!J(o)){n({show:!0,msg:"Please map fields to continue."});return}o.mainAction!==""&&f(3)};return e.jsxs("div",{children:[e.jsx(P,{snack:r,setSnackbar:n}),e.jsx("div",{className:"txt-center mt-2",children:e.jsx(q,{step:3,active:c})}),e.jsx(Q,{formID:k,learnDashConf:o,setLearnDashConf:g,step:c,setStep:f,isLoading:l,setIsLoading:p,setSnackbar:n}),e.jsxs("div",{className:"btcd-stp-page",style:N({},c===2&&{width:900,height:"auto",overflow:"visible"}),children:[e.jsx(O,{formFields:a,handleInput:C=>$(C,o,g),learnDashConf:o,setLearnDashConf:g,isLoading:l,setIsLoading:p,setSnackbar:n,allIntegURL:d,isInfo:x,edit:u}),o.mainAction!=="16"&&e.jsxs("button",{onClick:()=>L(),disabled:!o.mainAction||l,className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[m("Next","bit-integrations")," ",e.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),o.mainAction!=="16"&&e.jsx(U,{step:c,saveConfig:()=>H({flow:s,setFlow:t,allIntegURL:d,history:b,conf:o,setIsLoading:p,setSnackbar:n}),isLoading:l,dataConf:o,setDataConf:g,formFields:a})]})}export{me as default};
