var C=Object.defineProperty;var v=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var y=(i,t,s)=>t in i?C(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s,N=(i,t)=>{for(var s in t||(t={}))I.call(t,s)&&y(i,s,t[s]);if(v)for(var s of v(t))A.call(t,s)&&y(i,s,t[s]);return i};import{r as m,j as e}from"./main.js";import{_ as r,E as W,b as _,F as z,e as F,f as B,c as E}from"./bi-490-178.js";import{S as M}from"./bi-224-925.js";import{s as T}from"./bi-266-720.js";import{I as q}from"./bi-811-721.js";import{S as D,h as P,c as H}from"./bi-663-727.js";import{B as L}from"./bi-475-763.js";import"./bi-369-724.js";import"./bi-422-718.js";import"./bi-652-725.js";import"./bi-528-726.js";function R({formID:i,sliceWpConf:t,setSliceWpConf:s,step:d,setStep:x,isLoading:u,setIsLoading:f,setSnackbar:S}){const[a,p]=m.useState(!1),[l,h]=m.useState(!1),j=()=>{f("auth"),_({},"slicewp_authorize").then(o=>{o!=null&&o.success&&(p(!0),S({show:!0,msg:r("Connected with SliceWp affiliate Successfully","bit-integrations")})),f(!1),h(!0)})},c=o=>{const b=z(t);b[o.target.name]=o.target.value,s(b)};return e.jsxs("div",{className:"btcd-stp-page",style:{width:d===1&&900,height:d===1&&"auto"},children:[e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:r("Integration Name:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:c,name:"name",value:t.name,type:"text",placeholder:r("Integration Name...","bit-integrations")}),u==="auth"&&e.jsxs("div",{className:"flx mt-5",children:[e.jsx(W,{size:25,clr:"#022217",className:"mr-2"}),"Checking if SliceWp affiliate is active!!!"]}),l&&!a&&!u&&e.jsxs("div",{className:"flx mt-5",style:{color:"red"},children:[e.jsx("span",{className:"btcd-icn mr-2",style:{fontSize:30,marginTop:-5},children:"×"}),"SliceWp affiliate plugin must be activated to integrate with Bit Integrations."]}),!a&&e.jsx("button",{onClick:j,className:"btn btcd-btn-lg green sh-sm flx mt-5",type:"button",children:r("Connect","bit-integrations")}),a&&e.jsxs("button",{onClick:()=>x(2),className:"btn btcd-btn-lg green sh-sm flx mt-5",type:"button",disabled:!a,children:[r("Next","bit-integrations"),e.jsx(L,{className:"ml-1 rev-icn"})]})]})}function te({formFields:i,setFlow:t,flow:s,allIntegURL:d,isInfo:x,edit:u}){const f=F(),{formID:S}=B(),[a,p]=m.useState(!1),[l,h]=m.useState(1),[j,c]=m.useState({show:!1}),o=[{key:"1",label:"Add commission to user's affiliate"}],b=[{key:"commission_date",label:"commission_date",required:!0},{key:"reference",label:"Reference",required:!1},{key:"amount",label:"Amount",required:!1}],[n,g]=m.useState({name:"SliceWp",type:"SliceWp",mainAction:"",field_map:[{formField:"",slicewpFormField:""}],allActions:o,sliceWpFields:b,actions:{}}),w=()=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),!H(n)){c({show:!0,msg:r("Please map mandatory fields","bit-integrations")});return}n.mainAction!==""&&h(3)};return e.jsxs("div",{children:[e.jsx(E,{snack:j,setSnackbar:c}),e.jsx("div",{className:"txt-center mt-2",children:e.jsx(M,{step:3,active:l})}),e.jsx(R,{formID:S,sliceWpConf:n,setSliceWpConf:g,step:l,setStep:h,isLoading:a,setIsLoading:p,setSnackbar:c}),e.jsxs("div",{className:"btcd-stp-page",style:N({},l===2&&{width:900,height:"auto",overflow:"visible"}),children:[e.jsx(D,{formFields:i,handleInput:k=>P(k,n,g),sliceWpConf:n,setSliceWpConf:g,isLoading:a,setIsLoading:p,setSnackbar:c,allIntegURL:d,isInfo:x,edit:u}),e.jsxs("button",{onClick:()=>w(),disabled:!n.mainAction||a||n.statusId===void 0,className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[r("Next","bit-integrations")," ",e.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),e.jsx(q,{step:l,saveConfig:()=>T({flow:s,setFlow:t,allIntegURL:d,history:f,conf:n,setIsLoading:p,setSnackbar:c}),isLoading:a,dataConf:n,setDataConf:g,formFields:i})]})}export{te as default};
