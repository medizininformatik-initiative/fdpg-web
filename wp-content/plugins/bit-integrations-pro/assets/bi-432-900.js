var k=Object.defineProperty;var v=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var S=(t,d,s)=>d in t?k(t,d,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[d]=s,n=(t,d)=>{for(var s in d||(d={}))T.call(d,s)&&S(t,s,d[s]);if(v)for(var s of v(d))_.call(d,s)&&S(t,s,d[s]);return t};import{r as A,j as e,L}from"./main.js";import{h as V,B as $,_ as r,a8 as g,a7 as U}from"./bi-490-178.js";import{h as R,a as q}from"./bi-266-720.js";import{g as I,a as E,b as P}from"./bi-514-901.js";import{S as B}from"./bi-652-725.js";import{T as H}from"./bi-528-726.js";const G=(t,d,s)=>{const l=n({},d);l.field_map.splice(t,0,{}),s(n({},l))},O=(t,d,s)=>{const l=n({},d);l.field_map.length>1&&l.field_map.splice(t,1),s(n({},l))},y=(t,d,s,l)=>{l(u=>(u.field_map[d][t.target.name]=t.target.value,t.target.value==="custom"&&(u.field_map[d].customValue=""),u))};function z({i:t,formFields:d,field:s,mailMintConf:l,setMailMintConf:u}){var o;A.useEffect(()=>{var c;((c=l==null?void 0:l.field_map)==null?void 0:c.length)===1&&s.mailMintFormField===""&&u(h=>(h.field_map=I(h),h))},[]);const i=(l==null?void 0:l.mailMintContactFields.filter(c=>c.required===!0))||[],j=(l==null?void 0:l.mailMintContactFields.filter(c=>c.required===!1))||[],m=V($),{isPro:x}=m;return e.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:e.jsxs("div",{className:"pos-rel flx",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:s.formField||"",onChange:c=>y(c,t,l,u),children:[e.jsx("option",{value:"",children:r("Select Field","bit-integrations")}),e.jsx("optgroup",{label:"Form Fields",children:d==null?void 0:d.map(c=>e.jsx("option",{value:c.name,children:c.label},`ff-rm-${c.name}`))}),e.jsx("option",{value:"custom",children:r("Custom...","bit-integrations")}),e.jsx("optgroup",{label:`General Smart Codes ${x?"":"(PRO)"}`,children:x&&((o=B)==null?void 0:o.map(c=>e.jsx("option",{value:c.name,children:c.label},`ff-rm-${c.name}`)))})]}),s.formField==="custom"&&e.jsx(H,{onChange:c=>R(c,t,l,u),label:r("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:s.customValue,placeholder:r("Custom Value","bit-integrations"),formFields:d}),e.jsxs("select",{className:"btcd-paper-inp",disabled:t<i.length,name:"mailMintFormField",value:t<i.length?i[t].key||"":s.mailMintFormField||"",onChange:c=>y(c,t,l,u),children:[e.jsx("option",{value:"",children:r("Select Field","bit-integrations")}),t<i.length?e.jsx("option",{value:i[t].key,children:i[t].label},i[t].key):j.map(({key:c,label:h})=>e.jsx("option",{value:c,children:h},c))]})]}),t>=i.length&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>G(t,l,u),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>O(t,l,u),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function Z({formFields:t,handleInput:d,mailMintConf:s,setMailMintConf:l,isLoading:u,setIsLoading:i,setSnackbar:j,allIntegURL:m,isInfo:x,edit:o}){var N,F;const c=(a,b)=>{const p=n({},s);(b==="selectedList"||b==="selectedTags"||b==="selectedSubStatus")&&(a!==""?p[b]=a:delete p[b]),l(n({},p))},h=(a,b)=>{const p=n({},s);b==="selectedUpdate"&&(a.target.checked?p.update=!0:delete p.update),l(n({},p))},w=[{key:"pending",label:"Pending"},{key:"subscribed",label:"Subscribed"},{key:"unsubscribed",label:"Unsubscribed"}];return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:r("Actions:","bit-integrations")}),e.jsxs("select",{onChange:d,name:"mainAction",value:s==null?void 0:s.mainAction,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:r("Select Actions","bit-integrations")}),(s==null?void 0:s.allActions)&&s.allActions.map(({key:a,label:b})=>e.jsx("option",{value:a,children:b},a))]}),e.jsx("br",{}),e.jsxs("div",{className:"flx mt-4",children:[e.jsx("b",{className:"wdt-200 d-in-b",children:r("Select List: ","bit-integrations")}),e.jsx(g,{className:"w-5",defaultValue:s==null?void 0:s.selectedList,options:((N=s==null?void 0:s.default)==null?void 0:N.allLists)&&s.default.allLists.map(a=>({label:a.name,value:a.id.toString()})),onChange:a=>c(a,"selectedList")}),e.jsx("button",{onClick:()=>E(s,l,i),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${r("Fetch All List","bit-integrations")}'`},type:"button",disabled:u,children:"↻"})]}),e.jsxs("div",{className:"flx mt-4",children:[e.jsx("b",{className:"wdt-200 d-in-b",children:r("Select Tags: ","bit-integrations")}),e.jsx(g,{className:"w-5",defaultValue:s==null?void 0:s.selectedTags,options:((F=s==null?void 0:s.default)==null?void 0:F.allTags)&&s.default.allTags.map(a=>({label:a.name,value:a.id.toString()})),onChange:a=>c(a,"selectedTags")}),e.jsx("button",{onClick:()=>P(s,l,i),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${r("Fetch All Tags","bit-integrations")}'`},type:"button",disabled:u,children:"↻"})]}),e.jsxs("div",{className:"flx mt-4",children:[e.jsx("b",{className:"wdt-200 d-in-b",children:r("Select subscription status: ","bit-integrations")}),e.jsx(g,{className:"w-5",singleSelect:!0,defaultValue:s==null?void 0:s.selectedSubStatus,options:w.map(a=>({label:a.label,value:a.key})),onChange:a=>c(a,"selectedSubStatus")})]}),e.jsx("br",{}),u&&e.jsx(L,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:r("Map Fields","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:r("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:r("Mail Mint Fields","bit-integrations")})})]}),s.field_map.map((a,b)=>e.jsx(z,{i:b,field:a,mailMintConf:s,formFields:t,setMailMintConf:l},`dash-m-${b+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>q(s.field_map.length,s,l),className:"icn-btn sh-sm",type:"button",children:"+"})})]}),e.jsx("div",{className:"pos-rel d-flx w-8",children:e.jsx(U,{checked:s.update||!1,onChange:a=>h(a,"selectedUpdate"),className:"wdt-200 mt-4 mr-2",value:"selectedUpdate",title:r("Update Contact","bit-integrations"),subTitle:r("Update contact if contact already exist?","bit-integrations")})}),e.jsx("br",{})]})}export{Z as M};
