var w=Object.defineProperty;var k=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var A=(s,t,a)=>t in s?w(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,v=(s,t)=>{for(var a in t||(t={}))_.call(t,a)&&A(s,a,t[a]);if(k)for(var a of k(t))z.call(t,a)&&A(s,a,t[a]);return s};import{r as f,j as e}from"./main.js";import{_ as c,E as F,b as B,F as D,e as P,f as T,h as q,B as E,c as M}from"./bi-490-178.js";import{S as R}from"./bi-224-925.js";import{s as L}from"./bi-266-720.js";import{I as H}from"./bi-811-721.js";import{A as O,h as $,c as G}from"./bi-896-824.js";import{B as J}from"./bi-475-763.js";import"./bi-369-724.js";import"./bi-422-718.js";import"./bi-652-725.js";import"./bi-528-726.js";function K({formID:s,affiliateConf:t,setAffiliateConf:a,step:d,setStep:x,isLoading:u,setIsLoading:h,setSnackbar:y}){const[i,m]=f.useState(!1),[o,b]=f.useState(!1),j=()=>{h("auth"),B({},"affiliate_authorize").then(r=>{r!=null&&r.success&&(m(!0),y({show:!0,msg:c("Connected with Affiliate Successfully","bit-integrations")})),h(!1),b(!0)})},l=r=>{const p=D(t);p[r.target.name]=r.target.value,a(p)};return e.jsxs("div",{className:"btcd-stp-page",style:{width:d===1&&900,height:d===1&&"auto"},children:[e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:c("Integration Name:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:l,name:"name",value:t.name,type:"text",placeholder:c("Integration Name...","bit-integrations")}),u==="auth"&&e.jsxs("div",{className:"flx mt-5",children:[e.jsx(F,{size:25,clr:"#022217",className:"mr-2"}),"Checking if LearnDash is active!!!"]}),o&&!i&&!u&&e.jsxs("div",{className:"flx mt-5",style:{color:"red"},children:[e.jsx("span",{className:"btcd-icn mr-2",style:{fontSize:30,marginTop:-5},children:"×"}),"Affiliate plugin must be activated to integrate with Bit Integrations."]}),!i&&e.jsx("button",{onClick:j,className:"btn btcd-btn-lg green sh-sm flx mt-5",type:"button",children:c("Connect","bit-integrations")}),i&&e.jsxs("button",{onClick:()=>x(2),className:"btn btcd-btn-lg green sh-sm flx mt-5",type:"button",disabled:!i,children:[c("Next","bit-integrations"),e.jsx(J,{className:"ml-1 rev-icn"})]})]})}function ne({formFields:s,setFlow:t,flow:a,allIntegURL:d,isInfo:x,edit:u}){const h=P(),{formID:y}=T();q(E);const[i,m]=f.useState(!1),[o,b]=f.useState(1),[j,l]=f.useState({show:!1}),r=[{key:"1",label:"Create a referral for specific affiliate Id"},{key:"2",label:"Create a referral for the user"}],p=[{key:"1",label:"Paid"},{key:"2",label:"Unpaid"},{key:"3",label:"Pending"},{key:"4",label:"Reject"}],N=[{key:"1",label:"Sale"},{key:"2",label:"Opt-in"},{key:"3",label:"Lead"}],S=[{key:"amount",label:"Amount",required:!0},{key:"description",label:"Description",required:!0},{key:"reference",label:"Reference",required:!1},{key:"context",label:"Context",required:!1}],[n,g]=f.useState({name:"Affiliate",type:"Affiliate",mainAction:"",affiliate_id:"",referralId:"",statusId:"",field_map:[{formField:"",affiliateFormField:""}],allReferralType:N,allStatus:p,allActions:r,createAffiliateFields:S,actions:{}}),C=()=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),!G(n)){l({show:!0,msg:"Please map fields to continue."});return}n.mainAction!==""&&b(3)};return e.jsxs("div",{children:[e.jsx(M,{snack:j,setSnackbar:l}),e.jsx("div",{className:"txt-center mt-2",children:e.jsx(R,{step:3,active:o})}),e.jsx(K,{formID:y,affiliateConf:n,setAffiliateConf:g,step:o,setStep:b,isLoading:i,setIsLoading:m,setSnackbar:l}),e.jsxs("div",{className:"btcd-stp-page",style:v({},o===2&&{width:900,height:"auto",overflow:"visible"}),children:[e.jsx(O,{formFields:s,handleInput:I=>$(I,n,g),affiliateConf:n,setAffiliateConf:g,isLoading:i,setIsLoading:m,setSnackbar:l,allIntegURL:d,isInfo:x,edit:u}),e.jsxs("button",{onClick:()=>C(),disabled:!n.statusId||!n.referralId||i,className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[c("Next","bit-integrations")," ",e.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),e.jsx(H,{step:o,saveConfig:()=>L({flow:a,setFlow:t,allIntegURL:d,history:h,conf:n,setIsLoading:m,setSnackbar:l}),isLoading:i,dataConf:n,setDataConf:g,formFields:s})]})}export{ne as default};
