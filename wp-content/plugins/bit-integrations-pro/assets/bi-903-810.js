var f=Object.defineProperty;var N=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var y=(i,n,t)=>n in i?f(i,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[n]=t,j=(i,n)=>{for(var t in n||(n={}))w.call(n,t)&&y(i,t,n[t]);if(N)for(var t of N(n))S.call(n,t)&&y(i,t,n[t]);return i};import{r as $,j as e,L as k}from"./main.js";import{a7 as A,_ as r,h as I,B as T}from"./bi-490-178.js";import{h as q,a as L}from"./bi-266-720.js";import{f as M,r as O}from"./bi-510-811.js";import{T as R}from"./bi-422-718.js";import{S as V}from"./bi-652-725.js";import{T as B}from"./bi-528-726.js";import{a as _,b as D,c as E}from"./bi-313-753.js";function P({acumbamailConf:i,setAcumbamailConf:n,formFields:t}){var d;$.useState(!1);const l=(o,x)=>{const a=j({},i);x==="double_optin"&&(o.target.checked?a.actions.double_optin=!0:delete a.actions.double_optin),n(j({},a))};return e.jsx("div",{className:"pos-rel d-flx w-8",children:e.jsx(A,{checked:((d=i.actions)==null?void 0:d.double_optin)||!1,onChange:o=>l(o,"double_optin"),className:"wdt-200 mt-4 mr-2",value:"double_optin",title:r("Double Opt-in","bit-integrations"),subTitle:r("Double Opt-In for confirm subscription.","bit-integrations")})})}function z({i,formFields:n,field:t,acumbamailConf:l,setAcumbamailConf:d}){var p,m,u,g,F,v;const o=I(T),{isPro:x}=o,a=(p=l.default.allFields[l.listId].required)==null?void 0:p.includes(t.acumbamailFormField),h=Object.entries((u=(m=l.default.allFields)==null?void 0:m[l.listId])==null?void 0:u.fields).filter(s=>s[1].required===!0)||[],c=Object.entries((F=(g=l.default.allFields)==null?void 0:g[l.listId])==null?void 0:F.fields).filter(s=>s[1].required===!1)||[];return e.jsxs("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:t.formField||"",onChange:s=>_(s,i,l,d),children:[e.jsx("option",{value:"",children:r("Select Field","bit-integrations")}),e.jsx("optgroup",{label:"Form Fields",children:n.map(s=>s.type!=="file"&&e.jsx("option",{value:s.name,children:s.label},`ff-zhcrm-${s.name}`))}),e.jsx("option",{value:"custom",children:r("Custom...","bit-integrations")}),e.jsx("optgroup",{label:`General Smart Codes ${x?"":"(PRO)"}`,children:x&&((v=V)==null?void 0:v.map(s=>e.jsx("option",{value:s.name,children:s.label},`ff-rm-${s.name}`)))})]}),t.formField==="custom"&&e.jsx(B,{onChange:s=>q(s,i,l,d),label:r("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:t.customValue,placeholder:r("Custom Value","bit-integrations"),formFields:n}),e.jsxs("select",{className:"btcd-paper-inp",name:"acumbamailFormField",disabled:i<1,value:t.acumbamailFormField||"",onChange:s=>_(s,i,l,d),children:[e.jsx("option",{value:"",children:r("Select Field","bit-integrations")}),a&&h.map((s,b)=>e.jsx("option",{value:s[0],children:s[0]},`mchimp-${b*2}`)),!a&&c.map((s,b)=>e.jsx("option",{value:s[0],children:s[0]},`mchimp-${b*2}`))]})]}),!a&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>D(i,l,d),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>E(i,l,d),className:"icn-btn sh-sm",type:"button","aria-label":"btn",children:e.jsx(R,{})})]})]})}function Z({formFields:i,handleInput:n,acumbamailConf:t,setAcumbamailConf:l,isLoading:d,setIsLoading:o,setSnackbar:x}){var a,h;return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:r("Actions:","bit-integrations")}),e.jsxs("select",{onChange:n,name:"mainAction",value:t.mainAction,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:r("Select Actions","bit-integrations")}),t.allActions&&t.allActions.map(({key:c,label:p})=>e.jsx("option",{value:c,children:p},c))]}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:r("All List:","bit-integrations")}),e.jsxs("select",{onChange:n,name:"listId",value:t.listId,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:r("Select List","bit-integrations")}),((a=t==null?void 0:t.default)==null?void 0:a.allLists)&&Object.entries(t.default.allLists).map(c=>e.jsx("option",{value:c[0],children:c[1].name},c[0]))]}),e.jsx("button",{onClick:()=>M(t,l,o),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${r("Fetch Subscriber List","bit-integrations")}'`},type:"button",disabled:d,children:"↻"}),e.jsx("br",{}),d&&e.jsx(k,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),e.jsxs("div",{className:"mt-4",children:[e.jsx("b",{className:"wdt-100",children:r("Map Fields","bit-integrations")}),e.jsx("button",{onClick:()=>O(null,t,l,o),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${r("Refresh Acumbamail Fields","bit-integrations")}'`},type:"button",disabled:d,children:"↻"})]}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:r("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:r("Acumbamail Fields","bit-integrations")})})]}),((h=t.default)==null?void 0:h.allFields)&&e.jsxs(e.Fragment,{children:[t.field_map.map((c,p)=>e.jsx(z,{i:p,field:c,acumbamailConf:t,formFields:i,setAcumbamailConf:l},`sheet-m-${p+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>L(t.field_map.length,t,l),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{})]}),e.jsx("br",{}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:r("Actions","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(P,{acumbamailConf:t,setAcumbamailConf:l,formFields:i})]})}export{Z as A};
