var R=Object.defineProperty;var C=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var h=(s,a,t)=>a in s?R(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,g=(s,a)=>{for(var t in a||(a={}))w.call(a,t)&&h(s,t,a[t]);if(C)for(var t of C(a))F.call(a,t)&&h(s,t,a[t]);return s};import{r as l,j as r}from"./main.js";import{e as I,c as E,_ as T,a as i}from"./bi-490-178.js";import{S as L}from"./bi-224-925.js";import{e as O}from"./bi-266-720.js";import{I as W}from"./bi-811-721.js";import z from"./bi-322-382.js";import{h as A,c as _}from"./bi-638-906.js";import{C as H}from"./bi-246-907.js";import"./bi-369-724.js";import"./bi-422-718.js";import"./bi-652-725.js";function ae({formFields:s,setFlow:a,flow:t,allIntegURL:c}){const m=I(),[x,y]=l.useState(!1),[f,b]=l.useState({}),[o,k]=l.useState(1),[S,p]=l.useState({show:!1}),N=[{key:"name",label:"Name",required:!0},{key:"email_domain",label:"Email",required:!1},{key:"details",label:"Description",required:!1},{key:"street",label:"Street",required:!1},{key:"city",label:"City",required:!1},{key:"state",label:"State",required:!1},{key:"postal_code",label:"Postal Code",required:!1},{key:"country",label:"Country",required:!1},{key:"phone_numbers",label:"Phone",required:!1},{key:"websites",label:"Website",required:!1}],j=[{key:"name",label:"Name",required:!0},{key:"title",label:"Title",required:!1},{key:"details",label:"Description",required:!1},{key:"email_domain",label:"Email",required:!1},{key:"phone_numbers",label:"Phone",required:!1},{key:"street",label:"Street",required:!1},{key:"city",label:"City",required:!1},{key:"state",label:"State",required:!1},{key:"postal_code",label:"Postal Code",required:!1},{key:"country",label:"Country",required:!1},{key:"websites",label:"Website",required:!1}],v=[{key:"name",label:"Opportunity Name",required:!0},{key:"close_date",label:"Close Date",required:!1},{key:"details",label:"Opportunity Details",required:!1},{key:"monetary_value",label:"Value",required:!1}],P=[{key:"name",label:"Task Name",required:!0},{key:"due_date",label:"Due Date",required:!1},{key:"reminder_date",label:"Reminder Date",required:!1},{key:"details",label:"Description",required:!1}],[e,n]=l.useState({name:"CopperCRM",type:"CopperCRM",api_key:"",api_email:"",field_map:[{formField:"",coppercrmFormField:""}],actionName:"",companyFields:N,personFields:j,opportunityFields:v,taskFields:P,actions:{}}),M=()=>{y(!0),O(t,a,c,e,m,"","",y).then(u=>{var q;u.success?(i.success((q=u.data)==null?void 0:q.msg),m.push(c)):i.error(u.data||u)})},D=d=>{if(!_(e)){i.error("Please map mandatory fields");return}if(e.actionName==="opportunity"){if(!e.selectedCRMPeople){i.error("Please select a people");return}if(!e.selectedCRMPipelines&&e.actionName==="opportunity"){i.error("Please select a Pipeline");return}}e.field_map.length>0&&k(d)};return document.querySelector(".btcd-s-wrp").scrollTop=0,r.jsxs("div",{children:[r.jsx(E,{snack:S,setSnackbar:p}),r.jsx("div",{className:"txt-center mt-2",children:r.jsx(L,{step:3,active:o})}),r.jsx(z,{coppercrmConf:e,setCopperCRMConf:n,step:o,setStep:k,loading:f,setLoading:b,setSnackbar:p}),r.jsxs("div",{className:"btcd-stp-page",style:g({},o===2&&{width:900,height:"auto",overflow:"visible"}),children:[r.jsx(H,{formFields:s,handleInput:d=>A(d,e,n),coppercrmConf:e,setCopperCRMConf:n,loading:f,setLoading:b,setSnackbar:p}),(e==null?void 0:e.actionName)&&r.jsxs("button",{onClick:()=>D(3),disabled:!_(e),className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[T("Next","bit-integrations")," ","Â ",r.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(e==null?void 0:e.actionName)&&r.jsx(W,{step:o,saveConfig:()=>M(),isLoading:x,dataConf:e,setDataConf:n,formFields:s})]})}export{ae as default};
