var z=Object.defineProperty;var x=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var I=(a,s,i)=>s in a?z(a,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[s]=i,S=(a,s)=>{for(var i in s||(s={}))M.call(s,i)&&I(a,i,s[i]);if(x)for(var i of x(s))E.call(s,i)&&I(a,i,s[i]);return a};import{r as l,j as t}from"./main.js";import{_ as c,E as G,b as D,F as H,e as R,f as L,c as O}from"./bi-490-178.js";import{S as W}from"./bi-224-925.js";import{s as J}from"./bi-266-720.js";import{I as K}from"./bi-811-721.js";import{B as Q,h as U,c as V}from"./bi-787-825.js";import{B as X}from"./bi-475-763.js";import"./bi-369-724.js";import"./bi-422-718.js";import"./bi-652-725.js";import"./bi-528-726.js";function Y({formID:a,buddyBossConf:s,setBuddyBossConf:i,step:u,setStep:h,isLoading:p,setIsLoading:b,setSnackbar:g}){const[o,m]=l.useState(!1),[d,y]=l.useState(!1),k=()=>{b("auth"),D({},"buddyBoss_authorize").then(r=>{r!=null&&r.success&&(m(!0),g({show:!0,msg:c("Connected with BuddyBoss Successfully","bit-integrations")})),b(!1),y(!0)})},n=r=>{const f=H(s);f[r.target.name]=r.target.value,i(f)};return t.jsxs("div",{className:"btcd-stp-page",style:{width:u===1&&900,height:u===1&&"auto"},children:[t.jsx("div",{className:"mt-3",children:t.jsx("b",{children:c("Integration Name:","bit-integrations")})}),t.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:n,name:"name",value:s.name,type:"text",placeholder:c("Integration Name...","bit-integrations")}),p==="auth"&&t.jsxs("div",{className:"flx mt-5",children:[t.jsx(G,{size:25,clr:"#022217",className:"mr-2"}),"Checking if BuddyBoss is active!!!"]}),d&&!o&&!p&&t.jsxs("div",{className:"flx mt-5",style:{color:"red"},children:[t.jsx("span",{className:"btcd-icn mr-2",style:{fontSize:30,marginTop:-5},children:"×"}),"BuddyBoss plugin must be activated to integrate with Bit Integrations."]}),!o&&t.jsx("button",{onClick:k,className:"btn btcd-btn-lg green sh-sm flx mt-5",type:"button",children:c("Connect","bit-integrations")}),o&&t.jsxs("button",{onClick:()=>h(2),className:"btn btcd-btn-lg green sh-sm flx mt-5",type:"button",disabled:!o,children:[c("Next","bit-integrations"),t.jsx(X,{className:"ml-1 rev-icn"})]})]})}function le({formFields:a,setFlow:s,flow:i,allIntegURL:u,isInfo:h,edit:p}){const b=R(),{formID:g}=L(),[o,m]=l.useState(!1),[d,y]=l.useState(1),[k,n]=l.useState({show:!1}),r=[{key:"1",label:"Create Group Pro"},{key:"2",label:"Add the user to a group"},{key:"3",label:"End friendship with a user Pro"},{key:"4",label:"Follow a user Pro"},{key:"5",label:"Post a topic in a forum Pro"},{key:"6",label:"Remove user from a group Pro"},{key:"7",label:"Send a friendship request to a user Pro"},{key:"8",label:"Send a notification to all members of a group Pro"},{key:"9",label:"Send a private message to all members of a group Pro"},{key:"10",label:"Send a private message to a user Pro"},{key:"11",label:"Send a notification to a user Pro"},{key:"12",label:"Stop following a user Pro"},{key:"13",label:"Subscribe the user to a forum Pro"},{key:"14",label:"Add a post to the activity stream of a group Pro"},{key:"15",label:"Add a post to the site wide activity stream Pro"},{key:"16",label:"Add a post to the user's activity stream Pro"},{key:"17",label:"Post a reply to a topic in a forum"},{key:"18",label:"Set the user's status to a specific status"}],f=[{key:"group_name",label:"Group Name",required:!0}],P=[{key:"topic_content",label:"Topic Content",required:!0},{key:"topic_title",label:"Topic Title",required:!1}],_=[{key:"notification_content",label:"Notification Content",required:!0},{key:"notification_link",label:"Notification Link",required:!1}],j=[{key:"message_content",label:"Message Content",required:!0},{key:"message_subject",label:"Message subject",required:!1}],B=[{key:"activity_action",label:"activity_action",required:!0},{key:"activity_content",label:"activity_content",required:!0}],N=[{key:"activity_action",label:"activity_action",required:!1},{key:"activity_action_link",label:"activity_action_link",required:!1},{key:"activity_content",label:"activity_content",required:!0}],A=[{key:"reply_content",label:"Reply Content",required:!0}],w=[{key:"1",label:"Public"},{key:"2",label:"Private"},{key:"3",label:"Hidden"}],C=[{key:"1",label:"Active"},{key:"2",label:"Suspend"}],[e,v]=l.useState({name:"BuddyBoss",type:"BuddyBoss",mainAction:"",field_map:[{formField:"",buddyBossFormField:""}],allActions:r,groupPrivacyOptions:w,userStatusOptions:C,createGroupFields:f,topicInForumFields:P,sendAllUserNotificationFields:_,sendAllGroupPrivateMessageFields:j,addPostToGroupFields:B,addPostSiteWideActivityStreamFields:N,postReplyTopicForumFields:A,actions:{}}),F=()=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),["1","5","8","9","10","11","14","15","16","17"].includes(e.mainAction)&&!V(e)){n({show:!0,msg:"Please map fields to continue."});return}e.mainAction!==""&&y(3)};function q(){switch(e.mainAction){case"1":return e.privacyId===void 0;case"2":return e.groupId===void 0;case"3":return e.friendId===void 0;case"4":return e.friendId===void 0;case"5":return e.forumId===void 0;case"6":return e.groupId===void 0;case"7":return e.friendId===void 0;case"8":return e.groupId===void 0||e.friendId===void 0;case"9":return e.groupId===void 0||e.friendId===void 0;case"10":return e.friendId===void 0;case"12":return e.friendId===void 0;case"13":return e.forumId===void 0;case"14":return e.groupId===void 0||e.friendId===void 0;case"15":return e.friendId===void 0;case"16":return e.friendId===void 0;case"17":return e.topicId===void 0||e.forumId===void 0;case"18":return e.userStatusId===void 0;default:return!1}}return t.jsxs("div",{children:[t.jsx(O,{snack:k,setSnackbar:n}),t.jsx("div",{className:"txt-center mt-2",children:t.jsx(W,{step:3,active:d})}),t.jsx(Y,{formID:g,buddyBossConf:e,setBuddyBossConf:v,step:d,setStep:y,isLoading:o,setIsLoading:m,setSnackbar:n}),t.jsxs("div",{className:"btcd-stp-page",style:S({},d===2&&{width:900,height:"auto",overflow:"visible"}),children:[t.jsx(Q,{formFields:a,handleInput:T=>U(T,e,v),buddyBossConf:e,setBuddyBossConf:v,isLoading:o,setIsLoading:m,setSnackbar:n,allIntegURL:u,isInfo:h,edit:p}),t.jsxs("button",{onClick:()=>F(),disabled:!e.mainAction||o||q(),className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[c("Next","bit-integrations")," ",t.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),t.jsx(K,{step:d,saveConfig:()=>J({flow:i,setFlow:s,allIntegURL:u,history:b,conf:e,setIsLoading:m,setSnackbar:n}),isLoading:o,dataConf:e,setDataConf:v,formFields:a})]})}export{le as default};
